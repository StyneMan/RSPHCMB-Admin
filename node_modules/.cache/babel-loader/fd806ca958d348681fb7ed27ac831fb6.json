{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar immutable_1 = __importDefault(require(\"immutable\"));\n\nvar classnames_1 = __importDefault(require(\"classnames\"));\n\nvar styles_1 = require(\"@mui/styles\");\n\nvar material_1 = require(\"@mui/material\");\n\nvar draft_js_1 = require(\"draft-js\");\n\nvar Toolbar_1 = __importDefault(require(\"./components/Toolbar\"));\n\nvar Link_1 = __importDefault(require(\"./components/Link\"));\n\nvar Media_1 = __importDefault(require(\"./components/Media\"));\n\nvar Blockquote_1 = __importDefault(require(\"./components/Blockquote\"));\n\nvar CodeBlock_1 = __importDefault(require(\"./components/CodeBlock\"));\n\nvar UrlPopover_1 = __importDefault(require(\"./components/UrlPopover\"));\n\nvar Autocomplete_1 = __importDefault(require(\"./components/Autocomplete\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar styles = function styles(theme) {\n  var _a, _b, _c, _d, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4;\n\n  return (0, styles_1.createStyles)({\n    root: ((_b = (_a = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _a === void 0 ? void 0 : _a.MUIRichTextEditor) === null || _b === void 0 ? void 0 : _b.root) || {},\n    container: ((_d = (_c = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _c === void 0 ? void 0 : _c.MUIRichTextEditor) === null || _d === void 0 ? void 0 : _d.container) || {\n      margin: theme.spacing(1, 0, 0, 0),\n      position: \"relative\",\n      fontFamily: theme.typography.body1.fontFamily,\n      fontSize: theme.typography.body1.fontSize,\n      '& figure': {\n        margin: 0\n      }\n    },\n    inheritFontSize: ((_g = (_f = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _f === void 0 ? void 0 : _f.MUIRichTextEditor) === null || _g === void 0 ? void 0 : _g.inheritFontSize) || {\n      fontSize: \"inherit\"\n    },\n    editor: ((_j = (_h = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _h === void 0 ? void 0 : _h.MUIRichTextEditor) === null || _j === void 0 ? void 0 : _j.editor) || {},\n    editorContainer: ((_l = (_k = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _k === void 0 ? void 0 : _k.MUIRichTextEditor) === null || _l === void 0 ? void 0 : _l.editorContainer) || {\n      margin: theme.spacing(1, 0, 0, 0),\n      cursor: \"text\",\n      width: \"100%\",\n      padding: theme.spacing(0, 0, 1, 0)\n    },\n    editorReadOnly: ((_o = (_m = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _m === void 0 ? void 0 : _m.MUIRichTextEditor) === null || _o === void 0 ? void 0 : _o.editorReadOnly) || {\n      borderBottom: \"none\"\n    },\n    error: ((_q = (_p = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _p === void 0 ? void 0 : _p.MUIRichTextEditor) === null || _q === void 0 ? void 0 : _q.error) || {\n      borderBottom: \"2px solid red\"\n    },\n    hidePlaceholder: ((_s = (_r = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _r === void 0 ? void 0 : _r.MUIRichTextEditor) === null || _s === void 0 ? void 0 : _s.hidePlaceholder) || {\n      display: \"none\"\n    },\n    placeHolder: ((_u = (_t = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _t === void 0 ? void 0 : _t.MUIRichTextEditor) === null || _u === void 0 ? void 0 : _u.placeHolder) || {\n      color: theme.palette.grey[600],\n      position: \"absolute\",\n      outline: \"none\"\n    },\n    linkPopover: ((_w = (_v = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _v === void 0 ? void 0 : _v.MUIRichTextEditor) === null || _w === void 0 ? void 0 : _w.linkPopover) || {\n      padding: theme.spacing(2, 2, 2, 2)\n    },\n    linkTextField: ((_y = (_x = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _x === void 0 ? void 0 : _x.MUIRichTextEditor) === null || _y === void 0 ? void 0 : _y.linkTextField) || {\n      width: \"100%\"\n    },\n    anchorLink: ((_0 = (_z = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _z === void 0 ? void 0 : _z.MUIRichTextEditor) === null || _0 === void 0 ? void 0 : _0.anchorLink) || {},\n    toolbar: ((_2 = (_1 = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _1 === void 0 ? void 0 : _1.MUIRichTextEditor) === null || _2 === void 0 ? void 0 : _2.toolbar) || {},\n    inlineToolbar: ((_4 = (_3 = theme === null || theme === void 0 ? void 0 : theme.overrides) === null || _3 === void 0 ? void 0 : _3.MUIRichTextEditor) === null || _4 === void 0 ? void 0 : _4.inlineToolbar) || {\n      maxWidth: \"180px\",\n      position: \"absolute\",\n      padding: \"5px\",\n      zIndex: 10\n    }\n  });\n};\n\nvar blockRenderMap = immutable_1.default.Map({\n  'blockquote': {\n    element: \"blockquote\",\n    wrapper: react_1.default.createElement(Blockquote_1.default, null)\n  },\n  'code-block': {\n    element: \"pre\",\n    wrapper: react_1.default.createElement(CodeBlock_1.default, null)\n  }\n});\nvar styleRenderMap = {\n  'STRIKETHROUGH': {\n    textDecoration: \"line-through\"\n  },\n  'HIGHLIGHT': {\n    backgroundColor: \"yellow\"\n  }\n};\nvar hasCommandModifier = draft_js_1.KeyBindingUtil.hasCommandModifier;\nvar autocompleteMinSearchCharCount = 2;\nvar lineHeight = 26;\nvar defaultInlineToolbarControls = [\"bold\", \"italic\", \"underline\", \"clear\"];\n\nvar findLinkEntities = function findLinkEntities(contentBlock, callback, contentState) {\n  contentBlock.findEntityRanges(function (character) {\n    var entityKey = character.getEntity();\n    return entityKey !== null && contentState.getEntity(entityKey).getType() === 'LINK';\n  }, callback);\n};\n\nvar findDecoWithRegex = function findDecoWithRegex(regex, contentBlock, callback) {\n  var text = contentBlock.getText();\n  var matchArr, start;\n\n  while ((matchArr = regex.exec(text)) !== null) {\n    start = matchArr.index;\n    callback(start, start + matchArr[0].length);\n  }\n};\n\nvar useEditorState = function useEditorState(props) {\n  var decorators = [{\n    strategy: findLinkEntities,\n    component: Link_1.default\n  }];\n\n  if (props.decorators) {\n    props.decorators.forEach(function (deco) {\n      return decorators.push({\n        strategy: function strategy(contentBlock, callback) {\n          findDecoWithRegex(deco.regex, contentBlock, callback);\n        },\n        component: deco.component\n      });\n    });\n  }\n\n  var decorator = new draft_js_1.CompositeDecorator(decorators);\n  var defaultValue = props.defaultValue || props.value;\n  return defaultValue ? draft_js_1.EditorState.createWithContent((0, draft_js_1.convertFromRaw)(JSON.parse(defaultValue)), decorator) : draft_js_1.EditorState.createEmpty(decorator);\n};\n\nvar MUIRichTextEditor = function MUIRichTextEditor(props, ref) {\n  var _a, _b, _c;\n\n  var classes = props.classes,\n      controls = props.controls,\n      customControls = props.customControls;\n\n  var _d = (0, react_1.useState)({}),\n      state = _d[0],\n      setState = _d[1];\n\n  var _f = (0, react_1.useState)(false),\n      focus = _f[0],\n      setFocus = _f[1];\n\n  var _g = (0, react_1.useState)(\"\"),\n      searchTerm = _g[0],\n      setSearchTerm = _g[1];\n\n  var _h = (0, react_1.useState)(0),\n      selectedIndex = _h[0],\n      setSelectedIndex = _h[1];\n\n  var _j = (0, react_1.useState)(function () {\n    return useEditorState(props);\n  }),\n      editorState = _j[0],\n      setEditorState = _j[1];\n\n  var _k = (0, react_1.useState)(\"\"),\n      focusMediaKey = _k[0],\n      setFocusMediaKey = _k[1];\n\n  var editorRef = (0, react_1.useRef)(null);\n  var editorId = props.id || \"mui-rte\";\n  var toolbarPositionRef = (0, react_1.useRef)(undefined);\n  var editorStateRef = (0, react_1.useRef)(editorState);\n  var autocompleteRef = (0, react_1.useRef)(undefined);\n  var autocompleteSelectionStateRef = (0, react_1.useRef)(undefined);\n  var autocompletePositionRef = (0, react_1.useRef)(undefined);\n  var autocompleteLimit = props.autocomplete ? props.autocomplete.suggestLimit || 5 : 5;\n  var isFirstFocus = (0, react_1.useRef)(true);\n  var customBlockMapRef = (0, react_1.useRef)(undefined);\n  var customStyleMapRef = (0, react_1.useRef)(undefined);\n  var isFocusedWithMouse = (0, react_1.useRef)(false);\n  var selectionRef = (0, react_1.useRef)({\n    start: 0,\n    end: 0\n  });\n  /**\n   * Exposed methods\n   */\n\n  (0, react_1.useImperativeHandle)(ref, function () {\n    return {\n      focus: function focus() {\n        handleFocus();\n      },\n      save: function save() {\n        handleSave();\n      },\n      insertAtomicBlock: function insertAtomicBlock(name, data) {\n        handleInsertAtomicBlockSync(name, data);\n      },\n      insertAtomicBlockSync: function insertAtomicBlockSync(name, data) {\n        handleInsertAtomicBlockSync(name, data);\n      },\n      insertAtomicBlockAsync: function insertAtomicBlockAsync(name, promise, placeholder) {\n        handleInsertAtomicBlockAsync(name, promise, placeholder);\n      }\n    };\n  });\n  (0, react_1.useEffect)(function () {\n    var editorState = useEditorState(props);\n    setEditorState(editorState);\n    toggleMouseUpListener(true);\n    return function () {\n      toggleMouseUpListener();\n    };\n  }, [props.value, props.defaultValue]);\n  (0, react_1.useEffect)(function () {\n    if (props.onChange) {\n      props.onChange(editorState);\n    }\n\n    editorStateRef.current = editorState;\n  }, [editorState]);\n  (0, react_1.useEffect)(function () {\n    toolbarPositionRef.current = state.toolbarPosition;\n  }, [state.toolbarPosition]);\n  (0, react_1.useEffect)(function () {\n    if (searchTerm.length < autocompleteMinSearchCharCount) {\n      setSelectedIndex(0);\n    }\n  }, [searchTerm]);\n\n  var clearSearch = function clearSearch() {\n    setSearchTerm(\"\");\n    autocompletePositionRef.current = undefined;\n    autocompleteSelectionStateRef.current = undefined;\n  };\n\n  var handleMouseUp = function handleMouseUp(event) {\n    var nodeName = event.target.nodeName;\n    clearSearch();\n\n    if (nodeName === \"IMG\" || nodeName === \"VIDEO\") {\n      return;\n    }\n\n    setTimeout(function () {\n      var _a;\n\n      var selection = editorStateRef.current.getSelection();\n\n      if (selection.isCollapsed() || toolbarPositionRef !== undefined && selectionRef.current.start === selection.getStartOffset() && selectionRef.current.end === selection.getEndOffset()) {\n        var selectionInfo = (0, utils_1.getSelectionInfo)(editorStateRef.current);\n\n        if (selectionInfo.entityType === \"IMAGE\") {\n          focusMedia(selectionInfo.block);\n          return;\n        }\n\n        setState(__assign(__assign({}, state), {\n          toolbarPosition: undefined\n        }));\n        return;\n      }\n\n      selectionRef.current = {\n        start: selection.getStartOffset(),\n        end: selection.getEndOffset()\n      };\n      var editor = (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.editor;\n\n      if (!editor) {\n        return;\n      }\n\n      var _b = (0, utils_1.getEditorBounds)(editor),\n          editorRect = _b.editorRect,\n          selectionRect = _b.selectionRect;\n\n      if (!selectionRect) {\n        return;\n      }\n\n      var position = {\n        top: editor.offsetTop - 48 + (selectionRect.top - editorRect.top),\n        left: editor.offsetLeft + (selectionRect.left - editorRect.left)\n      };\n      setState(__assign(__assign({}, state), {\n        toolbarPosition: position\n      }));\n    }, 1);\n  };\n\n  var findAutocompleteStrategy = function findAutocompleteStrategy(chars) {\n    if (!props.autocomplete) {\n      return undefined;\n    }\n\n    var acArray = props.autocomplete.strategies.filter(function (ac) {\n      return ac.triggerChar === chars;\n    });\n\n    if (acArray.length) {\n      return acArray[0];\n    }\n\n    return undefined;\n  };\n\n  var updateAutocompletePosition = function updateAutocompletePosition() {\n    var _a;\n\n    var editor = (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.editor;\n\n    if (!editor) {\n      return;\n    }\n\n    var _b = (0, utils_1.getEditorBounds)(editor),\n        editorRect = _b.editorRect,\n        selectionRect = _b.selectionRect;\n\n    var line = (0, utils_1.getLineNumber)(editorState);\n    var top = selectionRect ? selectionRect.top : editorRect.top + lineHeight * line;\n    var left = selectionRect ? selectionRect.left : editorRect.left;\n    var position = {\n      top: editor.offsetTop + (top - editorRect.top) + lineHeight,\n      left: editor.offsetLeft + (left - editorRect.left)\n    };\n\n    if (!autocompleteSelectionStateRef.current) {\n      autocompleteSelectionStateRef.current = editorStateRef.current.getSelection();\n    }\n\n    autocompletePositionRef.current = position;\n  };\n\n  var insertAutocompleteSuggestionAsAtomicBlock = function insertAutocompleteSuggestionAsAtomicBlock(name, selection, value) {\n    var block = (0, utils_1.atomicBlockExists)(name, props.customControls);\n\n    if (!block) {\n      return;\n    }\n\n    var contentState = draft_js_1.Modifier.removeRange(editorStateRef.current.getCurrentContent(), selection, \"forward\");\n    var newEditorState = draft_js_1.EditorState.push(editorStateRef.current, contentState, \"remove-range\");\n    var withAtomicBlock = insertAtomicBlock(newEditorState, name.toUpperCase(), {\n      value: value\n    }, {\n      selection: newEditorState.getCurrentContent().getSelectionAfter()\n    });\n    handleChange(withAtomicBlock);\n  };\n\n  var insertAutocompleteSuggestionAsText = function insertAutocompleteSuggestionAsText(selection, value) {\n    var currentContentState = editorState.getCurrentContent();\n    var entityKey = currentContentState.createEntity(\"AC_ITEM\", 'IMMUTABLE').getLastCreatedEntityKey();\n    var contentState = draft_js_1.Modifier.replaceText(editorStateRef.current.getCurrentContent(), selection, value, editorStateRef.current.getCurrentInlineStyle(), entityKey);\n    var newEditorState = draft_js_1.EditorState.push(editorStateRef.current, contentState, \"insert-characters\");\n\n    if (autocompleteRef.current.insertSpaceAfter === false) {\n      handleChange(newEditorState);\n    } else {\n      var addSpaceState = draft_js_1.Modifier.insertText(newEditorState.getCurrentContent(), newEditorState.getSelection(), \" \", newEditorState.getCurrentInlineStyle());\n      handleChange(draft_js_1.EditorState.push(newEditorState, addSpaceState, \"insert-characters\"));\n    }\n  };\n\n  var handleAutocompleteSelected = function handleAutocompleteSelected(index) {\n    var itemIndex = index || selectedIndex;\n    var items = getAutocompleteItems();\n\n    if (items.length > itemIndex) {\n      var item = items[itemIndex];\n      var currentSelection = autocompleteSelectionStateRef.current;\n      var offset = currentSelection.getFocusOffset() + searchTerm.length + 1;\n      var newSelection = currentSelection.merge({\n        'focusOffset': offset\n      });\n\n      if (autocompleteRef.current.atomicBlockName) {\n        var name_1 = autocompleteRef.current.atomicBlockName;\n        insertAutocompleteSuggestionAsAtomicBlock(name_1, newSelection, item.value);\n      } else {\n        insertAutocompleteSuggestionAsText(newSelection, item.value);\n      }\n    }\n\n    handleAutocompleteClosed();\n  };\n\n  var handleAutocompleteClosed = function handleAutocompleteClosed() {\n    clearSearch();\n    setSelectedIndex(0);\n    refocus();\n  };\n\n  var getAutocompleteItems = function getAutocompleteItems() {\n    if (searchTerm.length < autocompleteMinSearchCharCount) {\n      return [];\n    }\n\n    return autocompleteRef.current.items.filter(function (item) {\n      return item.keys.filter(function (key) {\n        return key.includes(searchTerm);\n      }).length > 0;\n    }).splice(0, autocompleteLimit);\n  };\n\n  var handleChange = function handleChange(state) {\n    setEditorState(state);\n  };\n\n  var handleBeforeInput = function handleBeforeInput(chars, editorState) {\n    if (chars === \" \" && searchTerm.length) {\n      clearSearch();\n    } else if (autocompleteSelectionStateRef.current) {\n      setSearchTerm(searchTerm + chars);\n    } else {\n      var strategy = findAutocompleteStrategy(chars);\n\n      if (strategy) {\n        autocompleteRef.current = strategy;\n        updateAutocompletePosition();\n      }\n    }\n\n    return isMaxLengthHandled(editorState, 1);\n  };\n\n  var handleEditorFocus = function handleEditorFocus() {\n    handleFocus();\n\n    if (isFocusedWithMouse.current === true) {\n      isFocusedWithMouse.current = false;\n      return;\n    }\n\n    var nextEditorState = draft_js_1.EditorState.forceSelection(editorState, editorState.getSelection());\n    setTimeout(function () {\n      return setEditorState(draft_js_1.EditorState.moveFocusToEnd(nextEditorState));\n    }, 0);\n  };\n\n  var handlePlaceholderFocus = function handlePlaceholderFocus() {\n    if (isFirstFocus.current === false) {\n      focusEditor();\n      return;\n    }\n\n    handleFocus();\n    isFirstFocus.current = false;\n  };\n\n  var handleFocus = function handleFocus() {\n    focusEditor();\n\n    if (props.onFocus) {\n      props.onFocus();\n    }\n  };\n\n  var focusEditor = function focusEditor() {\n    setFocus(true);\n    setTimeout(function () {\n      var _a;\n\n      return (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }, 0);\n  };\n\n  var handleBlur = function handleBlur() {\n    isFocusedWithMouse.current = false;\n    setFocus(false);\n\n    if (props.onBlur) {\n      props.onBlur();\n    }\n\n    if (!state.anchorUrlPopover) {\n      setState(__assign(__assign({}, state), {\n        toolbarPosition: undefined\n      }));\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown() {\n    isFocusedWithMouse.current = true;\n  };\n\n  var handleClearFormat = function handleClearFormat() {\n    if (customStyleMapRef.current === undefined) {\n      return;\n    }\n\n    var withoutStyles = (0, utils_1.clearInlineStyles)(editorState, customStyleMapRef.current);\n    var selectionInfo = (0, utils_1.getSelectionInfo)(editorState);\n    var newEditorState = draft_js_1.EditorState.push(editorState, withoutStyles, 'change-inline-style');\n    setEditorState(draft_js_1.RichUtils.toggleBlockType(newEditorState, selectionInfo.blockType));\n  };\n\n  var handleSave = function handleSave() {\n    if (props.onSave) {\n      props.onSave(JSON.stringify((0, draft_js_1.convertToRaw)(editorState.getCurrentContent())));\n    }\n  };\n\n  var handleInsertAtomicBlockSync = function handleInsertAtomicBlockSync(name, data) {\n    var block = (0, utils_1.atomicBlockExists)(name, props.customControls);\n\n    if (!block) {\n      return;\n    }\n\n    var newEditorState = insertAtomicBlock(editorState, block.name.toUpperCase(), data, {\n      selection: editorState.getCurrentContent().getSelectionAfter()\n    });\n    updateStateForPopover(newEditorState);\n  };\n\n  var handleInsertAtomicBlockAsync = function handleInsertAtomicBlockAsync(name, promise, placeholder) {\n    var selection = insertAsyncAtomicBlockPlaceholder(name, placeholder);\n    var offset = selection.getFocusOffset() + 1;\n    var newSelection = selection.merge({\n      'focusOffset': offset\n    });\n    promise.then(function (response) {\n      var newEditorState = insertAtomicBlock(editorStateRef.current, name, response.data, {\n        selection: newSelection\n      });\n      handleChange(newEditorState);\n    }).catch(function (error) {\n      if (error) {\n        return;\n      }\n\n      var newContentState = draft_js_1.Modifier.removeRange(editorStateRef.current.getCurrentContent(), newSelection, \"forward\");\n      handleChange(draft_js_1.EditorState.push(editorStateRef.current, newContentState, \"remove-range\"));\n    });\n  };\n\n  var insertAsyncAtomicBlockPlaceholder = function insertAsyncAtomicBlockPlaceholder(name, placeholder) {\n    var placeholderName = placeholder || name + \"...\";\n    var currentContentState = editorStateRef.current.getCurrentContent();\n    var entityKey = currentContentState.createEntity(\"ASYNC_ATOMICBLOCK\", 'IMMUTABLE').getLastCreatedEntityKey();\n    var contentState = draft_js_1.Modifier.insertText(editorStateRef.current.getCurrentContent(), currentContentState.getSelectionAfter(), placeholderName, undefined, entityKey);\n    var selection = currentContentState.getSelectionAfter();\n    var newEditorState = draft_js_1.EditorState.push(editorStateRef.current, contentState, \"insert-characters\");\n    handleChange(newEditorState);\n    return selection;\n  };\n\n  var handleKeyCommand = function handleKeyCommand(command, editorState) {\n    var newState = draft_js_1.RichUtils.handleKeyCommand(editorState, command);\n\n    if (newState) {\n      handleChange(newState);\n      return \"handled\";\n    } else {\n      if (command.includes(\"mui-autocomplete\")) {\n        if (command === \"mui-autocomplete-insert\") {\n          handleAutocompleteSelected();\n        }\n\n        if (command === \"mui-autocomplete-end\") {\n          handleAutocompleteClosed();\n        }\n\n        return \"handled\";\n      }\n\n      if (props.keyCommands) {\n        var keyCommand = props.keyCommands.find(function (comm) {\n          return comm.name === command;\n        });\n\n        if (keyCommand) {\n          var newState_1 = keyCommand.callback(editorState);\n          handleChange(newState_1);\n          return \"handled\";\n        }\n      }\n    }\n\n    return \"not-handled\";\n  };\n\n  var handleCustomClick = function handleCustomClick(style, id) {\n    if (!props.customControls) {\n      return;\n    }\n\n    for (var _i = 0, _a = props.customControls; _i < _a.length; _i++) {\n      var control = _a[_i];\n\n      if (control.name.toUpperCase() === style) {\n        if (control.onClick) {\n          setTimeout(function () {\n            var _a;\n\n            return (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n          }, 0);\n          var newState = control.onClick(editorState, control.name, document.getElementById(id));\n\n          if (newState) {\n            if (newState.getSelection().isCollapsed()) {\n              setEditorState(newState);\n            } else {\n              updateStateForPopover(newState);\n            }\n          } else {\n            if (!editorState.getSelection().isCollapsed()) {\n              refocus();\n            }\n          }\n        }\n\n        break;\n      }\n    }\n  };\n\n  var handleUndo = function handleUndo() {\n    setEditorState(draft_js_1.EditorState.undo(editorState));\n  };\n\n  var handleRedo = function handleRedo() {\n    setEditorState(draft_js_1.EditorState.redo(editorState));\n  };\n\n  var handlePrompt = function handlePrompt(lastState, type, inlineMode) {\n    var selectionInfo = (0, utils_1.getSelectionInfo)(lastState);\n    var contentState = lastState.getCurrentContent();\n    var linkKey = selectionInfo.linkKey;\n    var data = undefined;\n\n    if (linkKey) {\n      var linkInstance = contentState.getEntity(linkKey);\n      data = linkInstance.getData();\n    }\n\n    setState({\n      urlData: data,\n      urlKey: linkKey,\n      toolbarPosition: !inlineMode ? undefined : state.toolbarPosition,\n      anchorUrlPopover: !inlineMode ? document.getElementById(editorId + \"-\" + type + \"-control-button\") : document.getElementById(editorId + \"-\" + type + \"-control-button-toolbar\"),\n      urlIsMedia: type === \"media\" ? true : undefined\n    });\n  };\n\n  var handlePromptForLink = function handlePromptForLink(inlineMode) {\n    var selection = editorState.getSelection();\n\n    if (!selection.isCollapsed()) {\n      handlePrompt(editorState, \"link\", inlineMode);\n    }\n  };\n\n  var handlePromptForMedia = function handlePromptForMedia(inlineMode, newState) {\n    var lastState = newState || editorState;\n    handlePrompt(lastState, \"media\", inlineMode);\n  };\n\n  var handleConfirmPrompt = function handleConfirmPrompt(isMedia) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    if (isMedia) {\n      confirmMedia.apply(void 0, args);\n      return;\n    }\n\n    confirmLink.apply(void 0, args);\n  };\n\n  var handleToolbarClick = function handleToolbarClick(style, type, id, inlineMode) {\n    if (type === \"inline\") {\n      return toggleInlineStyle(style);\n    }\n\n    if (type === \"block\") {\n      return toggleBlockType(style);\n    }\n\n    switch (style) {\n      case \"UNDO\":\n        handleUndo();\n        break;\n\n      case \"REDO\":\n        handleRedo();\n        break;\n\n      case \"LINK\":\n        handlePromptForLink(inlineMode);\n        break;\n\n      case \"IMAGE\":\n        handlePromptForMedia(inlineMode);\n        break;\n\n      case \"clear\":\n        handleClearFormat();\n        break;\n\n      case \"save\":\n        handleSave();\n        break;\n\n      default:\n        handleCustomClick(style, id);\n    }\n  };\n\n  var handlePastedText = function handlePastedText(text, _html, editorState) {\n    return isMaxLengthHandled(editorState, text.length);\n  };\n\n  var handleReturn = function handleReturn(_e, editorState) {\n    return isMaxLengthHandled(editorState, 1);\n  };\n\n  var isMaxLengthHandled = function isMaxLengthHandled(editorState, nextLength) {\n    var currentLength = editorState.getCurrentContent().getPlainText('').length;\n    return (0, utils_1.isGreaterThan)(currentLength + nextLength, props.maxLength) ? \"handled\" : \"not-handled\";\n  };\n\n  var toggleMouseUpListener = function toggleMouseUpListener(addAfter) {\n    var _a;\n\n    if (addAfter === void 0) {\n      addAfter = false;\n    }\n\n    var editor = (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.editor;\n\n    if (!editor) {\n      return;\n    }\n\n    editor.removeEventListener(\"mouseup\", handleMouseUp);\n\n    if (addAfter) {\n      editor.addEventListener(\"mouseup\", handleMouseUp);\n    }\n  };\n\n  var removeLink = function removeLink() {\n    var selection = editorState.getSelection();\n    setEditorState(draft_js_1.RichUtils.toggleLink(editorState, selection, null));\n  };\n\n  var confirmLink = function confirmLink(url) {\n    var urlKey = state.urlKey;\n\n    if (!url) {\n      if (urlKey) {\n        removeLink();\n      }\n\n      dismissPopover();\n      return;\n    }\n\n    var contentState = editorState.getCurrentContent();\n    var replaceEditorState = editorState;\n    var data = {\n      url: url,\n      className: classes.anchorLink\n    };\n\n    if (urlKey) {\n      contentState.replaceEntityData(urlKey, data);\n      replaceEditorState = draft_js_1.EditorState.push(editorState, contentState, \"apply-entity\");\n    } else {\n      var contentStateWithEntity = contentState.createEntity('LINK', 'MUTABLE', data);\n      var entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n      var newEditorState = draft_js_1.EditorState.set(editorState, {\n        currentContent: contentStateWithEntity\n      });\n      replaceEditorState = draft_js_1.RichUtils.toggleLink(newEditorState, newEditorState.getSelection(), entityKey);\n    }\n\n    updateStateForPopover(replaceEditorState);\n  };\n\n  var removeMedia = function removeMedia() {\n    var blockKey = editorState.getSelection().getStartKey();\n    var contentState = editorState.getCurrentContent();\n    var mediaBlock = contentState.getBlockForKey(blockKey);\n    var newContentState = (0, utils_1.removeBlockFromMap)(editorState, mediaBlock);\n    var newEditorState = draft_js_1.EditorState.push(editorState, newContentState, \"remove-range\");\n    setEditorState(newEditorState);\n  };\n\n  var confirmMedia = function confirmMedia(url, width, height, alignment, type) {\n    var urlKey = state.urlKey;\n\n    if (!url) {\n      if (urlKey) {\n        removeMedia();\n      }\n\n      dismissPopover();\n      return;\n    }\n\n    var contentState = editorState.getCurrentContent();\n    var data = {\n      url: url,\n      width: width,\n      height: height,\n      alignment: alignment,\n      type: type\n    };\n\n    if (urlKey) {\n      contentState.replaceEntityData(urlKey, data);\n      var newEditorState = draft_js_1.EditorState.push(editorState, contentState, \"apply-entity\");\n      updateStateForPopover(draft_js_1.EditorState.forceSelection(newEditorState, newEditorState.getCurrentContent().getSelectionAfter()));\n    } else {\n      var newEditorState = insertAtomicBlock(editorState, \"IMAGE\", data);\n      updateStateForPopover(draft_js_1.EditorState.forceSelection(newEditorState, newEditorState.getCurrentContent().getSelectionAfter()));\n    }\n\n    setFocusMediaKey(\"\");\n  };\n\n  var updateStateForPopover = function updateStateForPopover(editorState) {\n    setEditorState(editorState);\n    dismissPopover();\n  };\n\n  var dismissPopover = function dismissPopover() {\n    refocus();\n    setState(__assign(__assign({}, state), {\n      anchorUrlPopover: undefined,\n      urlKey: undefined,\n      urlIsMedia: undefined,\n      urlData: undefined\n    }));\n  };\n\n  var refocus = function refocus() {\n    setTimeout(function () {\n      var _a;\n\n      return (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    }, 0);\n    setTimeout(function () {\n      var _a;\n\n      return (_a = editorRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }, 1);\n  };\n\n  var toggleBlockType = function toggleBlockType(blockType) {\n    setEditorState(draft_js_1.RichUtils.toggleBlockType(editorState, blockType));\n  };\n\n  var toggleInlineStyle = function toggleInlineStyle(inlineStyle) {\n    setEditorState(draft_js_1.RichUtils.toggleInlineStyle(editorState, inlineStyle));\n  };\n\n  var focusMedia = function focusMedia(block) {\n    var newSeletion = draft_js_1.SelectionState.createEmpty(block.getKey());\n    var newEditorState = draft_js_1.EditorState.forceSelection(editorStateRef.current, newSeletion);\n    editorStateRef.current = newEditorState;\n    setFocusMediaKey(block.getKey());\n    setEditorState(newEditorState);\n    handlePromptForMedia(false, newEditorState);\n  };\n\n  var getStyleMap = function getStyleMap() {\n    if (customStyleMapRef.current === undefined) {\n      setupStyleMap();\n    }\n\n    return customStyleMapRef.current;\n  };\n\n  var setupStyleMap = function setupStyleMap() {\n    var _a;\n\n    var customStyleMap = JSON.parse(JSON.stringify(styleRenderMap));\n    (_a = props.customControls) === null || _a === void 0 ? void 0 : _a.filter(function (control) {\n      return control.type === \"inline\" && control.inlineStyle;\n    }).forEach(function (control) {\n      customStyleMap[control.name.toUpperCase()] = control.inlineStyle;\n    });\n    customStyleMapRef.current = customStyleMap;\n  };\n\n  var getBlockMap = function getBlockMap() {\n    if (customBlockMapRef.current === undefined) {\n      setupBlockMap();\n    }\n\n    return customBlockMapRef.current;\n  };\n\n  var setupBlockMap = function setupBlockMap() {\n    var _a;\n\n    var customBlockMap = {};\n    (_a = props.customControls) === null || _a === void 0 ? void 0 : _a.filter(function (control) {\n      return control.type === \"block\" && control.blockWrapper;\n    }).forEach(function (control) {\n      customBlockMap[control.name.toUpperCase()] = {\n        element: \"div\",\n        wrapper: control.blockWrapper\n      };\n    });\n    customBlockMapRef.current = draft_js_1.DefaultDraftBlockRenderMap.merge(blockRenderMap, immutable_1.default.Map(customBlockMap));\n  };\n\n  var blockRenderer = function blockRenderer(contentBlock) {\n    var blockType = contentBlock.getType();\n\n    if (blockType === 'atomic') {\n      var contentState = editorState.getCurrentContent();\n      var entity = contentBlock.getEntityAt(0);\n\n      if (entity) {\n        var type = contentState.getEntity(entity).getType();\n\n        if (type === \"IMAGE\") {\n          return {\n            component: Media_1.default,\n            editable: false,\n            props: {\n              onClick: focusMedia,\n              readOnly: props.readOnly,\n              focusKey: focusMediaKey\n            }\n          };\n        } else {\n          var block = (0, utils_1.atomicBlockExists)(type.toLowerCase(), props.customControls);\n\n          if (block) {\n            return {\n              component: block.atomicComponent,\n              editable: false,\n              props: contentState.getEntity(contentBlock.getEntityAt(0)).getData()\n            };\n          }\n        }\n      }\n    }\n\n    return null;\n  };\n\n  var styleRenderer = function styleRenderer(style) {\n    var customStyleMap = getStyleMap();\n    var styleNames = style.toJS();\n    return styleNames.reduce(function (styles, styleName) {\n      styles = customStyleMap[styleName];\n      return styles;\n    }, {});\n  };\n\n  var insertAtomicBlock = function insertAtomicBlock(editorState, type, data, options) {\n    var contentState = editorState.getCurrentContent();\n    var contentStateWithEntity = contentState.createEntity(type, 'IMMUTABLE', data);\n    var entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n    var newEditorStateRaw = draft_js_1.EditorState.set(editorState, __assign({\n      currentContent: contentStateWithEntity\n    }, options));\n    return draft_js_1.AtomicBlockUtils.insertAtomicBlock(newEditorStateRaw, entityKey, ' ');\n  };\n\n  var getAutocompleteKeyEvent = function getAutocompleteKeyEvent(keyboardEvent) {\n    var itemsLength = getAutocompleteItems().length;\n    var limit = autocompleteLimit > itemsLength ? itemsLength : autocompleteLimit;\n\n    switch (keyboardEvent.key) {\n      case \"ArrowDown\":\n        if (selectedIndex === 0 && itemsLength === 1 || selectedIndex + 1 === limit) {\n          setSelectedIndex(0);\n        } else {\n          setSelectedIndex(selectedIndex + 1 < limit ? selectedIndex + 1 : selectedIndex);\n        }\n\n        return \"mui-autocomplete-navigate\";\n\n      case \"ArrowUp\":\n        if (selectedIndex) {\n          setSelectedIndex(selectedIndex - 1);\n        } else {\n          setSelectedIndex(limit - 1);\n        }\n\n        return \"mui-autocomplete-navigate\";\n\n      case \"Enter\":\n        return \"mui-autocomplete-insert\";\n\n      case \"Escape\":\n        return \"mui-autocomplete-end\";\n\n      default:\n        return null;\n    }\n  };\n\n  var updateSearchTermForKeyBinding = function updateSearchTermForKeyBinding(keyBinding) {\n    var text = editorStateRef.current.getCurrentContent().getLastBlock().getText();\n\n    if (keyBinding === \"backspace\" && autocompleteRef.current && text.substr(text.length - 1) === autocompleteRef.current.triggerChar) {\n      clearSearch();\n    } else if (autocompletePositionRef.current && keyBinding === \"backspace\" && searchTerm.length) {\n      setSearchTerm(searchTerm.substr(0, searchTerm.length - 1));\n    } else if (!autocompletePositionRef.current && (keyBinding === \"backspace\" || keyBinding === \"split-block\")) {\n      clearSearch();\n    }\n  };\n\n  var keyBindingFn = function keyBindingFn(e) {\n    if (hasCommandModifier(e) && props.keyCommands) {\n      var comm = props.keyCommands.find(function (comm) {\n        return comm.key === e.keyCode;\n      });\n\n      if (comm) {\n        return comm.name;\n      }\n    }\n\n    if (searchTerm) {\n      var autocompleteEvent = getAutocompleteKeyEvent(e);\n\n      if (autocompleteEvent) {\n        return autocompleteEvent;\n      }\n    }\n\n    var keyBinding = (0, draft_js_1.getDefaultKeyBinding)(e);\n    updateSearchTermForKeyBinding(keyBinding);\n    return keyBinding;\n  };\n\n  var renderToolbar = props.toolbar === undefined || props.toolbar;\n  var inlineToolbarControls = props.inlineToolbarControls || defaultInlineToolbarControls;\n  var editable = props.readOnly === undefined || !props.readOnly;\n  var className = \"\";\n  var placeholder = null;\n\n  if (!focus) {\n    var contentState = editorState.getCurrentContent();\n\n    if (!contentState.hasText()) {\n      placeholder = react_1.default.createElement(\"div\", {\n        className: (0, classnames_1.default)(classes.editorContainer, classes.placeHolder, (_a = {}, _a[classes.error] = props.error, _a)),\n        tabIndex: 0,\n        onFocus: handlePlaceholderFocus\n      }, props.label || \"\");\n      className = classes.hidePlaceholder;\n    }\n  }\n\n  return react_1.default.createElement(\"div\", {\n    id: editorId + \"-root\",\n    className: classes.root\n  }, react_1.default.createElement(\"div\", {\n    id: editorId + \"-container\",\n    className: (0, classnames_1.default)(classes.container, (_b = {}, _b[classes.inheritFontSize] = props.inheritFontSize, _b))\n  }, props.autocomplete && autocompletePositionRef.current ? react_1.default.createElement(Autocomplete_1.default, {\n    items: getAutocompleteItems(),\n    top: autocompletePositionRef.current.top,\n    left: autocompletePositionRef.current.left,\n    onClick: handleAutocompleteSelected,\n    selectedIndex: selectedIndex\n  }) : null, props.inlineToolbar && editable && state.toolbarPosition ? react_1.default.createElement(material_1.Paper, {\n    className: classes.inlineToolbar,\n    style: {\n      top: state.toolbarPosition.top,\n      left: state.toolbarPosition.left\n    }\n  }, react_1.default.createElement(Toolbar_1.default, {\n    id: editorId,\n    editorState: editorState,\n    onClick: handleToolbarClick,\n    controls: inlineToolbarControls,\n    customControls: customControls,\n    inlineMode: true,\n    isActive: true\n  })) : null, renderToolbar ? react_1.default.createElement(Toolbar_1.default, {\n    id: editorId,\n    editorState: editorState,\n    onClick: handleToolbarClick,\n    controls: controls,\n    customControls: customControls,\n    className: classes.toolbar,\n    disabled: !editable,\n    size: props.toolbarButtonSize,\n    isActive: focus\n  }) : null, placeholder, react_1.default.createElement(\"div\", {\n    id: editorId + \"-editor\",\n    className: classes.editor\n  }, react_1.default.createElement(\"div\", {\n    id: editorId + \"-editor-container\",\n    className: (0, classnames_1.default)(className, classes.editorContainer, (_c = {}, _c[classes.editorReadOnly] = !editable, _c[classes.error] = props.error, _c)),\n    onMouseDown: handleMouseDown,\n    onBlur: handleBlur\n  }, react_1.default.createElement(draft_js_1.Editor, __assign({\n    blockRenderMap: getBlockMap(),\n    blockRendererFn: blockRenderer,\n    customStyleFn: styleRenderer,\n    editorState: editorState,\n    onChange: handleChange,\n    onFocus: handleEditorFocus,\n    readOnly: props.readOnly,\n    handleKeyCommand: handleKeyCommand,\n    handleBeforeInput: handleBeforeInput,\n    handlePastedText: handlePastedText,\n    handleReturn: handleReturn,\n    keyBindingFn: keyBindingFn,\n    ref: editorRef\n  }, props.draftEditorProps)))), state.anchorUrlPopover ? react_1.default.createElement(UrlPopover_1.default, {\n    data: state.urlData,\n    anchor: state.anchorUrlPopover,\n    onConfirm: handleConfirmPrompt,\n    isMedia: state.urlIsMedia\n  }) : null));\n};\n\nexports.default = (0, styles_1.withStyles)(styles, {\n  withTheme: true,\n  name: \"MUIRichTextEditor\"\n})((0, react_1.forwardRef)(MUIRichTextEditor));","map":{"version":3,"mappings":"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","names":["styles","theme","root","overrides","_a","MUIRichTextEditor","_b","container","_c","_d","margin","spacing","position","fontFamily","typography","body1","fontSize","inheritFontSize","_f","_g","editor","_h","_j","editorContainer","_k","_l","cursor","width","padding","editorReadOnly","_m","_o","borderBottom","error","_p","_q","hidePlaceholder","_r","_s","display","placeHolder","_t","_u","color","palette","grey","outline","linkPopover","_v","_w","linkTextField","_x","_y","anchorLink","_z","_0","toolbar","_1","_2","inlineToolbar","_3","_4","maxWidth","zIndex","blockRenderMap","immutable_1","Map","element","wrapper","react_1","Blockquote_1","CodeBlock_1","styleRenderMap","textDecoration","backgroundColor","draft_js_1","hasCommandModifier","autocompleteMinSearchCharCount","lineHeight","defaultInlineToolbarControls","findLinkEntities","contentBlock","callback","contentState","findEntityRanges","character","entityKey","getEntity","getType","findDecoWithRegex","regex","text","getText","matchArr","start","exec","index","length","useEditorState","props","decorators","strategy","component","Link_1","forEach","push","deco","decorator","defaultValue","value","createWithContent","JSON","parse","createEmpty","ref","controls","customControls","state","setState","focus","setFocus","searchTerm","setSearchTerm","selectedIndex","setSelectedIndex","editorState","setEditorState","focusMediaKey","setFocusMediaKey","editorRef","editorId","id","toolbarPositionRef","undefined","editorStateRef","autocompleteRef","autocompleteSelectionStateRef","autocompletePositionRef","autocompleteLimit","autocomplete","suggestLimit","isFirstFocus","customBlockMapRef","customStyleMapRef","isFocusedWithMouse","selectionRef","end","handleFocus","save","handleSave","insertAtomicBlock","name","data","handleInsertAtomicBlockSync","insertAtomicBlockSync","insertAtomicBlockAsync","promise","placeholder","handleInsertAtomicBlockAsync","toggleMouseUpListener","onChange","current","toolbarPosition","clearSearch","handleMouseUp","event","nodeName","target","setTimeout","selection","getSelection","isCollapsed","getStartOffset","getEndOffset","selectionInfo","entityType","focusMedia","block","editorRect","selectionRect","top","offsetTop","left","offsetLeft","findAutocompleteStrategy","chars","acArray","strategies","filter","triggerChar","updateAutocompletePosition","line","insertAutocompleteSuggestionAsAtomicBlock","removeRange","getCurrentContent","newEditorState","withAtomicBlock","toUpperCase","getSelectionAfter","handleChange","insertAutocompleteSuggestionAsText","currentContentState","createEntity","getLastCreatedEntityKey","replaceText","getCurrentInlineStyle","insertSpaceAfter","addSpaceState","insertText","handleAutocompleteSelected","itemIndex","items","getAutocompleteItems","item","currentSelection","offset","getFocusOffset","newSelection","merge","atomicBlockName","name_1","handleAutocompleteClosed","refocus","keys","includes","splice","handleBeforeInput","isMaxLengthHandled","handleEditorFocus","nextEditorState","forceSelection","moveFocusToEnd","handlePlaceholderFocus","focusEditor","onFocus","handleBlur","onBlur","anchorUrlPopover","handleMouseDown","handleClearFormat","withoutStyles","toggleBlockType","blockType","onSave","stringify","updateStateForPopover","insertAsyncAtomicBlockPlaceholder","then","response","catch","newContentState","placeholderName","handleKeyCommand","command","newState","keyCommands","keyCommand","find","newState_1","handleCustomClick","style","_i","control","onClick","blur","document","getElementById","handleUndo","undo","handleRedo","redo","handlePrompt","lastState","type","inlineMode","linkKey","linkInstance","getData","urlData","urlKey","urlIsMedia","handlePromptForLink","handlePromptForMedia","handleConfirmPrompt","isMedia","args","confirmMedia","confirmLink","handleToolbarClick","toggleInlineStyle","handlePastedText","_html","handleReturn","_e","nextLength","currentLength","getPlainText","maxLength","addAfter","removeEventListener","addEventListener","removeLink","toggleLink","url","dismissPopover","replaceEditorState","className","classes","replaceEntityData","contentStateWithEntity","set","currentContent","removeMedia","blockKey","getStartKey","mediaBlock","getBlockForKey","height","alignment","inlineStyle","newSeletion","getKey","getStyleMap","setupStyleMap","customStyleMap","getBlockMap","setupBlockMap","customBlockMap","blockWrapper","blockRenderer","entity","getEntityAt","Media_1","editable","readOnly","focusKey","toLowerCase","atomicComponent","styleRenderer","styleNames","toJS","reduce","styleName","options","newEditorStateRaw","__assign","getAutocompleteKeyEvent","keyboardEvent","itemsLength","limit","key","updateSearchTermForKeyBinding","keyBinding","getLastBlock","substr","keyBindingFn","e","comm","keyCode","autocompleteEvent","renderToolbar","inlineToolbarControls","hasText","tabIndex","label","Autocomplete_1","material_1","Toolbar_1","isActive","disabled","size","toolbarButtonSize","onMouseDown","blockRendererFn","customStyleFn","draftEditorProps","UrlPopover_1","anchor","onConfirm","exports","withTheme"],"sources":["../src/MUIRichTextEditor.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}