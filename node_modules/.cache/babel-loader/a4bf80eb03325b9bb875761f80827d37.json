{"ast":null,"code":"import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Add,ArrowBackIosNew,Delete}from\"@mui/icons-material\";import{Button,Container,Divider,IconButton,Typography}from\"@mui/material\";import{Box}from\"@mui/system\";import React from\"react\";import{useHistory,useLocation}from\"react-router-dom\";import CustomDialog from\"../../../../../components/dialogs/custom-dialog\";import DeleteDialog from\"../../../../../components/dialogs/custom-dialog\";import AddFunctionForm from\"../../../../../forms/department/add_function\";import{onSnapshot,doc,db}from\"../../../../../../data/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DepartmentInfo=function DepartmentInfo(){var _location$state2,_location$state3,_location$state4,_location$state5,_location$state6,_ref,_location$state7;var history=useHistory();var location=useLocation();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open2=_React$useState4[0],setOpen2=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),functions=_React$useState6[0],setFunctions=_React$useState6[1];React.useEffect(function(){var _location$state;onSnapshot(doc(db,\"departments\",\"\"+(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.id)),function(doc){var _doc$data;// console.log(\"Current data: \", doc.data());\nsetFunctions((_doc$data=doc.data())===null||_doc$data===void 0?void 0:_doc$data.functions);});},[functions,location===null||location===void 0?void 0:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.id]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CustomDialog,{open:open,title:\"Add Department Function\",handleClose:function handleClose(){return setOpen(false);},bodyComponent:/*#__PURE__*/_jsx(AddFunctionForm,{id:location===null||location===void 0?void 0:(_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.id,list:location===null||location===void 0?void 0:(_location$state4=location.state)===null||_location$state4===void 0?void 0:_location$state4.functions,setOpen:setOpen})}),/*#__PURE__*/_jsx(DeleteDialog,{open:open2,title:\"Delete Department Function\",handleClose:function handleClose(){return setOpen2(false);},bodyComponent:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{children:\"Are you sure you want to delete this function?\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirction:\"row\",justifyContent:\"end\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return setOpen2(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{backgroundColor:\"red\"},onClick:function onClick(){return setOpen2(false);},children:\"Delete\"})]})]})}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Box,{py:2,display:\"flex\",flexDirction:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(ArrowBackIosNew,{}),variant:\"text\",onClick:function onClick(){return history.goBack();},children:\"Back\"})}),/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,children:[(_location$state5=location.state)===null||_location$state5===void 0?void 0:_location$state5.title,\" \"]}),/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,children:[(_location$state6=location.state)===null||_location$state6===void 0?void 0:_location$state6.description,\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Functions of Department\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:function onClick(){return setOpen(true);},children:\"Add Function\"})]}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,hidden:((_ref=(location===null||location===void 0?void 0:(_location$state7=location.state)===null||_location$state7===void 0?void 0:_location$state7.functions)||functions)===null||_ref===void 0?void 0:_ref.length)<1,children:\"Below are the roles/functions of the department\"}),/*#__PURE__*/_jsx(\"br\",{}),functions===null||functions===void 0?void 0:functions.map(function(item,index){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:6,height:6,borderRadius:3,backgroundColor:\"black\"}}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"start\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{pl:2,flex:1,children:item===null||item===void 0?void 0:item.text}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpen2(true);},children:/*#__PURE__*/_jsx(Delete,{})})]})]})},index);}),(functions===null||functions===void 0?void 0:functions.length)<1&&/*#__PURE__*/_jsx(Box,{padding:10,display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{children:\"No record found\"})})]})]});};export default DepartmentInfo;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/about/components/department_info.js"],"names":["Add","ArrowBackIosNew","Delete","Button","Container","Divider","IconButton","Typography","Box","React","useHistory","useLocation","CustomDialog","DeleteDialog","AddFunctionForm","onSnapshot","doc","db","DepartmentInfo","history","location","useState","open","setOpen","open2","setOpen2","functions","setFunctions","useEffect","state","id","data","backgroundColor","goBack","title","description","length","map","item","index","width","height","borderRadius","text"],"mappings":"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","sourcesContent":["import { Add, ArrowBackIosNew, Delete } from \"@mui/icons-material\";\nimport {\n  Button,\n  Container,\n  Divider,\n  IconButton,\n  Typography,\n} from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport React from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport CustomDialog from \"../../../../../components/dialogs/custom-dialog\";\nimport DeleteDialog from \"../../../../../components/dialogs/custom-dialog\";\nimport AddFunctionForm from \"../../../../../forms/department/add_function\";\nimport { onSnapshot, doc, db } from \"../../../../../../data/firebase\";\n\nconst DepartmentInfo = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const [open, setOpen] = React.useState(false);\n  const [open2, setOpen2] = React.useState(false);\n  const [functions, setFunctions] = React.useState([]);\n\n  React.useEffect(() => {\n    onSnapshot(doc(db, \"departments\", \"\" + location?.state?.id), (doc) => {\n      // console.log(\"Current data: \", doc.data());\n      setFunctions(doc.data()?.functions);\n    });\n  }, [functions, location?.state?.id]);\n\n  return (\n    <div>\n      <CustomDialog\n        open={open}\n        title=\"Add Department Function\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <AddFunctionForm\n            id={location?.state?.id}\n            list={location?.state?.functions}\n            setOpen={setOpen}\n          />\n        }\n      />\n      <DeleteDialog\n        open={open2}\n        title=\"Delete Department Function\"\n        handleClose={() => setOpen2(false)}\n        bodyComponent={\n          <div>\n            <Typography>\n              Are you sure you want to delete this function?\n            </Typography>\n            <Box\n              display=\"flex\"\n              flexDirction=\"row\"\n              justifyContent={\"end\"}\n              alignItems=\"center\"\n            >\n              <Button variant=\"contained\" onClick={() => setOpen2(false)}>\n                Cancel\n              </Button>\n              <Button\n                variant=\"contained\"\n                sx={{ backgroundColor: \"red\" }}\n                onClick={() => setOpen2(false)}\n              >\n                Delete\n              </Button>\n            </Box>\n          </div>\n        }\n      />\n      <Container>\n        <Box\n          py={2}\n          display=\"flex\"\n          flexDirction=\"row\"\n          justifyContent={\"space-between\"}\n          alignItems=\"center\"\n        >\n          <Button\n            startIcon={<ArrowBackIosNew />}\n            variant=\"text\"\n            onClick={() => history.goBack()}\n          >\n            Back\n          </Button>\n        </Box>\n        <Typography variant=\"h5\" gutterBottom={true}>\n          {location.state?.title}{\" \"}\n        </Typography>\n        <Typography gutterBottom={true}>\n          {location.state?.description}{\" \"}\n        </Typography>\n        <br />\n        <Divider />\n        <br />\n        <Box\n          display={\"flex\"}\n          flexDirection=\"row\"\n          justifyContent={\"space-between\"}\n          alignItems=\"center\"\n        >\n          <Typography variant=\"h6\">Functions of Department</Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => setOpen(true)}\n          >\n            Add Function\n          </Button>\n        </Box>\n        <Typography\n          gutterBottom\n          hidden={(location?.state?.functions || functions)?.length < 1}\n        >\n          Below are the roles/functions of the department\n        </Typography>\n        <br />\n        {functions?.map((item, index) => (\n          <Container key={index}>\n            <Box\n              display={\"flex\"}\n              flexDirection=\"row\"\n              justifyContent={\"space-between\"}\n              alignItems=\"center\"\n            >\n              <div\n                style={{\n                  width: 6,\n                  height: 6,\n                  borderRadius: 3,\n                  backgroundColor: \"black\",\n                }}\n              />\n              <Box\n                display={\"flex\"}\n                flexDirection=\"row\"\n                justifyContent={\"start\"}\n                alignItems=\"center\"\n              >\n                <Typography pl={2} flex={1}>\n                  {item?.text}\n                </Typography>\n                <IconButton onClick={() => setOpen2(true)}>\n                  <Delete />\n                </IconButton>\n              </Box>\n            </Box>\n          </Container>\n        ))}\n        {functions?.length < 1 && (\n          <Box\n            padding={10}\n            display=\"flex\"\n            flexDirection=\"row\"\n            justifyContent=\"center\"\n            alignItems={\"center\"}\n          >\n            <Typography>No record found</Typography>\n          </Box>\n        )}\n      </Container>\n    </div>\n  );\n};\n\nexport default DepartmentInfo;\n"]},"metadata":{},"sourceType":"module"}