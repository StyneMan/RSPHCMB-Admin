{"ast":null,"code":"var _jsxFileName = \"/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/resources/gallery_info.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Add, ArrowBackIos, Delete, Edit } from \"@mui/icons-material\";\nimport { Button, Card, CardActionArea, CardMedia, Divider, Grid, IconButton, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport CustomDialog from \"../../../../components/dialogs/custom-dialog\";\nimport DeleteDialog from \"../../../../components/dialogs/custom-dialog\";\nimport { useSnackbar } from \"notistack\";\nimport { makeStyles } from \"@mui/styles\";\nimport CloudOffIcon from \"@mui/icons-material/CloudOff\";\nimport { db, doc, deleteDoc, onSnapshot } from \"../../../../../data/firebase\";\nimport AddSubAlbumForm from \"../../../../forms/gallery/add_sub_album\";\nimport UpdateSubAlbumForm from \"../../../../forms/gallery/update_sub_album\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: 286,\n    width: \"100%\"\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  rowHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 10\n  },\n  main: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"column\",\n    margin: \"auto\",\n    minHeight: 275,\n    minWidth: 320,\n    alignItems: \"center\"\n  },\n  cardMedia: {\n    height: 156,\n    width: \"100%\"\n  },\n  subRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"end\",\n    alignItems: \"center\"\n  },\n  lhsRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"start\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    height: 36,\n    width: 36\n  },\n  column: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"start\",\n    alignItems: \"start\",\n    padding: 4\n  }\n}));\n\nconst ItemCard = props => {\n  _s();\n\n  var _item$desc, _item$desc2;\n\n  const {\n    item,\n    index,\n    list\n  } = props;\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [openDelete, setOpenDelete] = React.useState(false);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n\n  const deleteService = async () => {\n    setOpenDelete(false);\n\n    try {\n      await deleteDoc(doc(db, \"gallery\", \"\" + (item === null || item === void 0 ? void 0 : item.id)));\n      enqueueSnackbar(`Item deleted successfully`, {\n        variant: \"success\"\n      });\n    } catch (error) {\n      console.log(\"ERR: Del: \", error);\n      enqueueSnackbar(`Item not deleted. Try again`, {\n        variant: \"error\"\n      });\n    }\n  };\n\n  const deleteBody = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      gutterBottom: true,\n      children: `Are you sure you want to delete this item?`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.subRow,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        variant: \"contained\",\n        style: {\n          marginRight: 4\n        },\n        onClick: () => setOpenDelete(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        variant: \"contained\",\n        color: \"error\",\n        onClick: deleteService,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(DeleteDialog, {\n      open: openDelete,\n      title: \"Delete Gallery Album\",\n      handleClose: () => setOpenDelete(false),\n      bodyComponent: deleteBody\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomDialog, {\n      open: open,\n      title: \"Update Gallery Items\",\n      handleClose: () => setOpen(false),\n      bodyComponent: /*#__PURE__*/_jsxDEV(UpdateSubAlbumForm, {\n        setOpen: setOpen,\n        id: index,\n        list: list\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      elevation: 3,\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.rowHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.subRow,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"delete\",\n            color: \"error\",\n            onClick: () => setOpenDelete(true),\n            children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"edit\",\n          onClick: () => setOpen(true),\n          children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardActionArea, {\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          image: item === null || item === void 0 ? void 0 : item.image,\n          className: classes.cardMedia\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.row,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            pt: 2,\n            fontSize: 16,\n            color: \"black\",\n            paddingLeft: 1,\n            textAlign: \"start\",\n            fontWeight: \"bold\",\n            children: (item === null || item === void 0 ? void 0 : (_item$desc = item.desc) === null || _item$desc === void 0 ? void 0 : _item$desc.length) > 100 ? (item === null || item === void 0 ? void 0 : (_item$desc2 = item.desc) === null || _item$desc2 === void 0 ? void 0 : _item$desc2.substring(0, 98)) + \"...\" : item === null || item === void 0 ? void 0 : item.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ItemCard, \"DA03wu9yUQo2m9mgb6KE8Je23Js=\", false, function () {\n  return [useStyles, useSnackbar];\n});\n\n_c = ItemCard;\n\nconst GalleryInfo = () => {\n  _s2();\n\n  var _location$state2, _location$state3, _location$state4;\n\n  const location = useLocation();\n  const history = useHistory();\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [items, setItems] = React.useState([]);\n  React.useEffect(() => {\n    var _location$state;\n\n    onSnapshot(doc(db, \"gallery\", \"\" + (location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.id)), doc => {\n      var _doc$data;\n\n      // console.log(\"Current data: \", doc.data());\n      setItems((_doc$data = doc.data()) === null || _doc$data === void 0 ? void 0 : _doc$data.items);\n    });\n  }, [items, location === null || location === void 0 ? void 0 : (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CustomDialog, {\n      open: open,\n      title: \"Add New Album Item\",\n      handleClose: () => setOpen(false),\n      bodyComponent: /*#__PURE__*/_jsxDEV(AddSubAlbumForm, {\n        setOpen: setOpen,\n        list: (location === null || location === void 0 ? void 0 : (_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.items) || items,\n        id: location === null || location === void 0 ? void 0 : (_location$state4 = location.state) === null || _location$state4 === void 0 ? void 0 : _location$state4.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.row,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.lhsRow,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"text\",\n          startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIos, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 24\n          }, this),\n          onClick: () => history.goBack(),\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"blue\",\n          fontSize: 21,\n          children: \"GALLERY ALBUM\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        startIcon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 22\n        }, this),\n        color: \"primary\",\n        variant: \"contained\",\n        onClick: () => setOpen(true),\n        children: \"Add Sub Album\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [items && /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: {\n          xs: 2,\n          md: 2\n        },\n        columns: {\n          xs: 4,\n          sm: 8,\n          md: 12\n        },\n        children: items === null || items === void 0 ? void 0 : items.map((item, index) => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(ItemCard, {\n            item: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this), (items === null || items === void 0 ? void 0 : items.length) < 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.main,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"auto\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CloudOffIcon, {\n            fontSize: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: \"No records found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(GalleryInfo, \"kgTnaNhWCumtNXCO9VUOvlS5IwY=\", false, function () {\n  return [useLocation, useHistory, useStyles];\n});\n\n_c2 = GalleryInfo;\nexport default GalleryInfo;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ItemCard\");\n$RefreshReg$(_c2, \"GalleryInfo\");","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/resources/gallery_info.js"],"names":["Add","ArrowBackIos","Delete","Edit","Button","Card","CardActionArea","CardMedia","Divider","Grid","IconButton","Typography","React","useLocation","useHistory","CustomDialog","DeleteDialog","useSnackbar","makeStyles","CloudOffIcon","db","doc","deleteDoc","onSnapshot","AddSubAlbumForm","UpdateSubAlbumForm","useStyles","theme","root","height","width","row","display","flexDirection","justifyContent","alignItems","rowHeader","padding","main","flex","margin","minHeight","minWidth","cardMedia","subRow","lhsRow","avatar","column","ItemCard","props","item","index","list","classes","open","setOpen","useState","openDelete","setOpenDelete","enqueueSnackbar","deleteService","id","variant","error","console","log","deleteBody","marginRight","image","desc","length","substring","GalleryInfo","location","history","items","setItems","useEffect","state","data","goBack","xs","md","sm","map","marginTop"],"mappings":"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","sourcesContent":["import { Add, ArrowBackIos, Delete, Edit } from \"@mui/icons-material\";\nimport {\n  Button,\n  Card,\n  CardActionArea,\n  CardMedia,\n  Divider,\n  Grid,\n  IconButton,\n  Typography,\n} from \"@mui/material\";\nimport React from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport CustomDialog from \"../../../../components/dialogs/custom-dialog\";\nimport DeleteDialog from \"../../../../components/dialogs/custom-dialog\";\nimport { useSnackbar } from \"notistack\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport CloudOffIcon from \"@mui/icons-material/CloudOff\";\nimport { db, doc, deleteDoc, onSnapshot } from \"../../../../../data/firebase\";\nimport AddSubAlbumForm from \"../../../../forms/gallery/add_sub_album\";\nimport UpdateSubAlbumForm from \"../../../../forms/gallery/update_sub_album\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: 286,\n    width: \"100%\",\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  rowHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 10,\n  },\n  main: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"column\",\n    margin: \"auto\",\n    minHeight: 275,\n    minWidth: 320,\n    alignItems: \"center\",\n  },\n  cardMedia: {\n    height: 156,\n    width: \"100%\",\n  },\n  subRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"end\",\n    alignItems: \"center\",\n  },\n  lhsRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"start\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    height: 36,\n    width: 36,\n  },\n  column: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"start\",\n    alignItems: \"start\",\n    padding: 4,\n  },\n}));\n\nconst ItemCard = (props) => {\n  const { item, index, list } = props;\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [openDelete, setOpenDelete] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const deleteService = async () => {\n    setOpenDelete(false);\n    try {\n      await deleteDoc(doc(db, \"gallery\", \"\" + item?.id));\n      enqueueSnackbar(`Item deleted successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      console.log(\"ERR: Del: \", error);\n      enqueueSnackbar(`Item not deleted. Try again`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  const deleteBody = (\n    <div>\n      <Typography variant=\"body2\" gutterBottom>\n        {`Are you sure you want to delete this item?`}\n      </Typography>\n      <br />\n      <div className={classes.subRow}>\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          style={{ marginRight: 4 }}\n          onClick={() => setOpenDelete(false)}\n        >\n          Cancel\n        </Button>\n\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          color=\"error\"\n          onClick={deleteService}\n        >\n          Delete\n        </Button>\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      <DeleteDialog\n        open={openDelete}\n        title=\"Delete Gallery Album\"\n        handleClose={() => setOpenDelete(false)}\n        bodyComponent={deleteBody}\n      />\n      <CustomDialog\n        open={open}\n        title=\"Update Gallery Items\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <UpdateSubAlbumForm setOpen={setOpen} id={index} list={list} />\n        }\n      />\n      <Card elevation={3} className={classes.root}>\n        <div className={classes.rowHeader}>\n          <div className={classes.subRow}>\n            <IconButton\n              aria-label=\"delete\"\n              color=\"error\"\n              onClick={() => setOpenDelete(true)}\n            >\n              <Delete />\n            </IconButton>\n          </div>\n          <IconButton aria-label=\"edit\" onClick={() => setOpen(true)}>\n            <Edit />\n          </IconButton>\n        </div>\n        <CardActionArea>\n          <CardMedia image={item?.image} className={classes.cardMedia} />\n          <Divider />\n          <div className={classes.row}>\n            <Typography\n              pt={2}\n              fontSize={16}\n              color=\"black\"\n              paddingLeft={1}\n              textAlign=\"start\"\n              fontWeight=\"bold\"\n            >\n              {item?.desc?.length > 100\n                ? item?.desc?.substring(0, 98) + \"...\"\n                : item?.desc}\n            </Typography>\n          </div>\n        </CardActionArea>\n      </Card>\n    </>\n  );\n};\n\nconst GalleryInfo = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [open, setOpen] = React.useState(false);\n  const [items, setItems] = React.useState([]);\n\n  React.useEffect(() => {\n    onSnapshot(doc(db, \"gallery\", \"\" + location?.state?.id), (doc) => {\n      // console.log(\"Current data: \", doc.data());\n      setItems(doc.data()?.items);\n    });\n  }, [items, location?.state?.id]);\n\n  return (\n    <div>\n      <CustomDialog\n        open={open}\n        title=\"Add New Album Item\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <AddSubAlbumForm\n            setOpen={setOpen}\n            list={location?.state?.items || items}\n            id={location?.state?.id}\n          />\n        }\n      />\n      <div className={classes.row}>\n        <div className={classes.lhsRow}>\n          <Button\n            variant=\"text\"\n            startIcon={<ArrowBackIos />}\n            onClick={() => history.goBack()}\n          >\n            Back\n          </Button>\n          <Typography variant=\"h6\" color=\"blue\" fontSize={21}>\n            GALLERY ALBUM\n          </Typography>\n        </div>\n        <Button\n          startIcon={<Add />}\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={() => setOpen(true)}\n        >\n          Add Sub Album\n        </Button>\n      </div>\n      <br />\n      <div>\n        {items && (\n          <Grid\n            container\n            spacing={{ xs: 2, md: 2 }}\n            columns={{ xs: 4, sm: 8, md: 12 }}\n          >\n            {items?.map((item, index) => (\n              <Grid item xs={12} sm={6} md={6} key={index}>\n                <ItemCard item={item} />\n              </Grid>\n            ))}\n          </Grid>\n        )}\n        {items?.length < 1 && (\n          <div className={classes.main}>\n            <div style={{ marginTop: \"auto\" }}>\n              <CloudOffIcon fontSize=\"large\" />\n              <Typography>No records found</Typography>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GalleryInfo;\n"]},"metadata":{},"sourceType":"module"}