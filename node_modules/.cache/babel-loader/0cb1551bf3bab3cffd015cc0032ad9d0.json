{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLineNumber = exports.getEditorBounds = exports.clearInlineStyles = exports.isGreaterThan = exports.atomicBlockExists = exports.removeBlockFromMap = exports.getSelectionInfo = void 0;\n\nvar draft_js_1 = require(\"draft-js\");\n/**\n * Get the current selection details\n */\n\n\nvar getSelectionInfo = function (editorState) {\n  var selection = editorState.getSelection();\n  var startOffset = selection.getStartOffset();\n  var currentContent = editorState.getCurrentContent();\n  var contentBlock = currentContent.getBlockForKey(selection.getStartKey());\n  var currentStyle = editorState.getCurrentInlineStyle();\n  var linkKey = contentBlock.getEntityAt(startOffset);\n  var entityType = \"\";\n\n  if (linkKey) {\n    var linkInstance = currentContent.getEntity(linkKey);\n    entityType = linkInstance.getType();\n  }\n\n  return {\n    inlineStyle: currentStyle,\n    blockType: contentBlock.getType(),\n    entityType: entityType,\n    linkKey: linkKey,\n    block: contentBlock\n  };\n};\n\nexports.getSelectionInfo = getSelectionInfo;\n/**\n * Remove a block from the ContentState\n */\n\nvar removeBlockFromMap = function (editorState, block) {\n  var contentState = editorState.getCurrentContent();\n  var removeBlockContentState = draft_js_1.Modifier.removeRange(contentState, new draft_js_1.SelectionState({\n    anchorKey: block.getKey(),\n    anchorOffset: 0,\n    focusKey: block.getKey(),\n    focusOffset: block.getLength()\n  }), 'backward');\n  var blockMap = removeBlockContentState.getBlockMap().delete(block.getKey());\n  return removeBlockContentState.merge({\n    blockMap: blockMap,\n    selectionAfter: contentState.getSelectionAfter()\n  });\n};\n\nexports.removeBlockFromMap = removeBlockFromMap;\n\nvar atomicBlockExists = function (name, controls) {\n  if (!controls) {\n    return undefined;\n  }\n\n  return controls.find(function (control) {\n    return control.type === \"atomic\" && control.name === name && control.atomicComponent !== undefined;\n  });\n};\n\nexports.atomicBlockExists = atomicBlockExists;\n\nvar isGreaterThan = function (value, maxValue) {\n  if (!maxValue) {\n    return false;\n  }\n\n  return value > maxValue;\n};\n\nexports.isGreaterThan = isGreaterThan;\n\nvar clearInlineStyles = function (editorState, customStyles) {\n  var styles = ['BOLD', 'ITALIC', 'UNDERLINE'];\n\n  if (customStyles) {\n    styles = styles.concat(Object.getOwnPropertyNames(customStyles));\n  }\n\n  return styles.reduce(function (newContentState, style) {\n    return draft_js_1.Modifier.removeInlineStyle(newContentState, editorState.getSelection(), style);\n  }, editorState.getCurrentContent());\n};\n\nexports.clearInlineStyles = clearInlineStyles;\n\nvar getEditorBounds = function (editor) {\n  var fakeClientRect = (0, draft_js_1.getVisibleSelectionRect)(window);\n  return {\n    selectionRect: fakeClientRect ? {\n      top: fakeClientRect === null || fakeClientRect === void 0 ? void 0 : fakeClientRect.top,\n      left: fakeClientRect === null || fakeClientRect === void 0 ? void 0 : fakeClientRect.left\n    } : null,\n    editorRect: editor.getBoundingClientRect()\n  };\n};\n\nexports.getEditorBounds = getEditorBounds;\n\nvar getLineNumber = function (editorState) {\n  var currentBlockKey = editorState.getSelection().getStartKey();\n  return editorState.getCurrentContent().getBlockMap().keySeq().findIndex(function (k) {\n    return k === currentBlockKey;\n  });\n};\n\nexports.getLineNumber = getLineNumber;","map":{"version":3,"mappings":"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","names":["getSelectionInfo","editorState","selection","getSelection","startOffset","getStartOffset","currentContent","getCurrentContent","contentBlock","getBlockForKey","getStartKey","currentStyle","getCurrentInlineStyle","linkKey","getEntityAt","entityType","linkInstance","getEntity","getType","inlineStyle","blockType","block","exports","removeBlockFromMap","contentState","removeBlockContentState","draft_js_1","removeRange","anchorKey","getKey","anchorOffset","focusKey","focusOffset","getLength","blockMap","getBlockMap","delete","merge","selectionAfter","getSelectionAfter","atomicBlockExists","name","controls","undefined","find","type","control","atomicComponent","isGreaterThan","value","maxValue","clearInlineStyles","customStyles","styles","concat","Object","getOwnPropertyNames","reduce","newContentState","style","removeInlineStyle","getEditorBounds","editor","fakeClientRect","window","selectionRect","top","left","editorRect","getBoundingClientRect","getLineNumber","currentBlockKey","keySeq","findIndex"],"sources":["../src/utils.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}