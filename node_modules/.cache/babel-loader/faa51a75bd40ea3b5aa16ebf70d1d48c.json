{"ast":null,"code":"import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import{ArrowBackIosNew,Edit}from\"@mui/icons-material\";import{Avatar,Backdrop,Button,CircularProgress,Container,Divider,Grid,IconButton,Typography}from\"@mui/material\";import{Box}from\"@mui/system\";import React from\"react\";import{useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import MUIRichTextEditor from\"mui-rte\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import CustomDialog from\"../../../../components/dialogs/custom-dialog\";import CustomDialog2 from\"../../../../components/dialogs/custom-dialog\";import CustomDialog3 from\"../../../../components/dialogs/custom-dialog\";import CustomDialog4 from\"../../../../components/dialogs/custom-dialog\";import CustomDialog5 from\"../../../../components/dialogs/custom-dialog\";import{useSnackbar}from\"notistack\";import{doc,getDownloadURL,uploadBytesResumable,ref,db,storage,updateDoc,deleteObject}from\"../../../../../data/firebase\";import{makeStyles}from\"@mui/styles\";import RichText from\"../../../../components/misc/richtext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CircularProgressWithLabel=function CircularProgressWithLabel(props){return/*#__PURE__*/_jsxs(Box,{position:\"relative\",display:\"inline-flex\",children:[/*#__PURE__*/_jsx(CircularProgress,_objectSpread(_objectSpread({variant:\"determinate\"},props),{},{size:90,thickness:3.0,style:{color:\"green\"}})),/*#__PURE__*/_jsx(Box,{top:0,left:0,bottom:0,right:0,position:\"absolute\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"div\",style:{color:\"white\",fontFamily:\"roboto\"},children:\"\".concat(Math.round(props.value),\"%\")})})]});};var PermSec=function PermSec(){var _useSelector=useSelector(function(state){return state.permSec;}),permSecData=_useSelector.permSecData;var history=useHistory();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open2=_React$useState4[0],setOpen2=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),open3=_React$useState6[0],setOpen3=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),open4=_React$useState8[0],setOpen4=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),open5=_React$useState10[0],setOpen5=_React$useState10[1];return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(CustomDialog,{title:\"Update Picture\",open:open,handleClose:function handleClose(){return setOpen(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateImage,{setOpen:setOpen,image:permSecData===null||permSecData===void 0?void 0:permSecData.image,id:\"info\"})}),/*#__PURE__*/_jsx(CustomDialog2,{title:\"Update Name\",open:open2,handleClose:function handleClose(){return setOpen2(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateName,{setOpen:setOpen2,name:permSecData===null||permSecData===void 0?void 0:permSecData.name,id:\"info\"})}),/*#__PURE__*/_jsx(CustomDialog3,{title:\"Update Biography\",open:open3,handleClose:function handleClose(){return setOpen3(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateBio,{setOpen:setOpen3,bio:permSecData===null||permSecData===void 0?void 0:permSecData.biography,id:\"info\"})}),/*#__PURE__*/_jsx(CustomDialog4,{title:\"Update Message\",open:open4,handleClose:function handleClose(){return setOpen4(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateMessage,{setOpen:setOpen4,message:permSecData===null||permSecData===void 0?void 0:permSecData.message,id:\"info\"})}),/*#__PURE__*/_jsx(CustomDialog5,{title:\"Update Summary\",open:open5,handleClose:function handleClose(){return setOpen5(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateSummary,{setOpen:setOpen5,message:permSecData===null||permSecData===void 0?void 0:permSecData.summary,id:\"info\"})}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return history.goBack();},startIcon:/*#__PURE__*/_jsx(ArrowBackIosNew,{}),children:\"Back\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:5,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",children:[/*#__PURE__*/_jsx(\"img\",{src:permSecData===null||permSecData===void 0?void 0:permSecData.image,alt:\"\"}),/*#__PURE__*/_jsx(Button,{sx:{mt:1,textTransform:\"none\"},variant:\"contained\",onClick:function onClick(){return setOpen(true);},children:\"Update Image\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{paddingY:1,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{children:permSecData===null||permSecData===void 0?void 0:permSecData.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{textTransform:\"none\"},startIcon:/*#__PURE__*/_jsx(Edit,{}),onClick:function onClick(){return setOpen2(true);},children:\"Update\"})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Box,{paddingY:1,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{children:permSecData===null||permSecData===void 0?void 0:permSecData.position})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:7,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"BIOGRAPHY\"}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpen3(true);},children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(MUIRichTextEditor,{readOnly:true,inlineToolbar:false,toolbar:false,defaultValue:permSecData===null||permSecData===void 0?void 0:permSecData.biography})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"WELCOME MESSAGE\"}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpen4(true);},children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(MUIRichTextEditor,{readOnly:true,inlineToolbar:false,toolbar:false,defaultValue:permSecData===null||permSecData===void 0?void 0:permSecData.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"MESSAGE SUMMARY (SHORT DESCRIPTION ON HOME PAGE)\"}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpen5(true);},children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{children:permSecData===null||permSecData===void 0?void 0:permSecData.summary})]})});};var useStyles=makeStyles(function(theme){return{image:{margin:\"0px auto 15px auto\",width:128,height:100},mb:{marginBottom:10}};});var UpdateImage=function UpdateImage(props){var classes=useStyles();var image=props.image,setOpen=props.setOpen,id=props.id;var _React$useState11=React.useState({image:\"\"}),_React$useState12=_slicedToArray(_React$useState11,2),formValues=_React$useState12[0],setFormValues=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),file=_React$useState14[0],setFile=_React$useState14[1];var _React$useState15=React.useState(false),_React$useState16=_slicedToArray(_React$useState15,2),isUploading=_React$useState16[0],setIsUploading=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),isLoading=_React$useState18[0],setIsLoading=_React$useState18[1];var _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),progress=_React$useState20[0],setProgress=_React$useState20[1];var _React$useState21=React.useState(\"\"),_React$useState22=_slicedToArray(_React$useState21,2),previewImage=_React$useState22[0],setPreviewImage=_React$useState22[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,name=_e$target.name,value=_e$target.value;if(id===\"image\"){setFile(e.target.files[0]);setPreviewImage(URL.createObjectURL(e.target.files[0]));setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{image:e.target.value});});}else{setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});}};var uploadNewImage=function uploadNewImage(){setIsUploading(true);// const timeNow = new Date();\n//First upload image to firebase storage then save to firestore\nvar storageRef=ref(storage,\"perm-sec/\"+id);var uploadTask=uploadBytesResumable(storageRef,file);uploadTask.on(\"state_changed\",function(snapshot){var uprogress=snapshot.bytesTransferred/snapshot.totalBytes*100;setProgress(uprogress);},function(error){setIsUploading(false);// console.log(error);\nenqueueSnackbar(\"\".concat(error.message),{variant:\"error\"});},function(){setIsUploading(false);setIsLoading(true);getDownloadURL(uploadTask.snapshot.ref).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(downloadURL){var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mRef=doc(db,\"perm-sec\",\"\"+id);_context.prev=1;_context.next=4;return updateDoc(mRef,{image:downloadURL});case 4:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Image updated successfully\",{variant:\"success\"});_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setIsLoading(false);enqueueSnackbar(\"\".concat(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message),{variant:\"error\"});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}());});};var updateImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var fileRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);//Change on the featured image and all texts\nfileRef=ref(storage,\"perm-sec/info\");deleteObject(fileRef).then(function(){setIsLoading(false);uploadNewImage();}).catch(function(error){setIsLoading(false);// console.log(\"ErR: \", error);\n});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function updateImage(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Backdrop,{style:{zIndex:1200},open:isUploading||isLoading,children:[isUploading?/*#__PURE__*/_jsx(CircularProgressWithLabel,{value:progress}):/*#__PURE__*/_jsx(\"div\",{}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateImage,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,padding:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:7,children:/*#__PURE__*/_jsx(TextValidator,{id:\"image\",size:\"small\",variant:\"outlined\",value:formValues.image,name:\"image\",type:\"file\",fullWidth:true,disabled:isLoading,accept:\".png, .jpg, .jpeg\",onChange:handleChange,helperText:\"Featured image\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:5,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Avatar,{variant:\"rounded\",alt:\"Passport\",src:previewImage?previewImage:image,className:classes.image})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading||isUploading,fullWidth:true,children:\"Update\"})]})]});};var UpdateName=function UpdateName(props){var classes=useStyles();var setOpen=props.setOpen,id=props.id,name=props.name;var _React$useState23=React.useState({name:name,image:\"\"}),_React$useState24=_slicedToArray(_React$useState23,2),formValues=_React$useState24[0],setFormValues=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),isLoading=_React$useState26[0],setIsLoading=_React$useState26[1];var _useSnackbar2=useSnackbar(),enqueueSnackbar=_useSnackbar2.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target2=e.target,id=_e$target2.id,name=_e$target2.name,value=_e$target2.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var updateName=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var timeNow,mRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setIsLoading(true);setFormValues({name:formValues.name?formValues.name:name});//No image is changed. So update all text\ntimeNow=new Date();_context3.prev=3;mRef=doc(db,\"perm-sec\",\"\"+id);_context3.next=7;return updateDoc(mRef,{name:formValues.name,updatedAt:timeNow});case 7:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Name updated successfully\",{variant:\"success\"});_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](3);setIsLoading(false);enqueueSnackbar(\"\".concat(_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.message),{variant:\"error\"});case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[3,12]]);}));return function updateName(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateName,children:[/*#__PURE__*/_jsx(TextValidator,{className:classes.mb,id:\"name\",label:\"Name\",size:\"small\",variant:\"outlined\",value:formValues.name===\" \"?name:!formValues.name?\"\":formValues.name,onChange:handleChange,name:\"name\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Name is required\"]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update\"})]})]});};var UpdateBio=function UpdateBio(props){var classes=useStyles();var setOpen=props.setOpen,id=props.id,bio=props.bio;var _React$useState27=React.useState(bio),_React$useState28=_slicedToArray(_React$useState27,2),body=_React$useState28[0],setBody=_React$useState28[1];var _React$useState29=React.useState(false),_React$useState30=_slicedToArray(_React$useState29,2),isLoading=_React$useState30[0],setIsLoading=_React$useState30[1];var _React$useState31=React.useState(false),_React$useState32=_slicedToArray(_React$useState31,2),isError=_React$useState32[0],setIsError=_React$useState32[1];var _React$useState33=React.useState(false),_React$useState34=_slicedToArray(_React$useState33,2),isStartedFilling=_React$useState34[0],setIsStartedFilling=_React$useState34[1];var _useSnackbar3=useSnackbar(),enqueueSnackbar=_useSnackbar3.enqueueSnackbar;var updateName=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var timeNow,mRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setIsLoading(true);//No image is changed. So update all text\ntimeNow=new Date();_context4.prev=2;mRef=doc(db,\"perm-sec\",\"\"+id);_context4.next=6;return updateDoc(mRef,{biography:body,updatedAt:timeNow});case 6:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Biography updated successfully\",{variant:\"success\"});_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](2);setIsLoading(false);enqueueSnackbar(\"\".concat(_context4.t0===null||_context4.t0===void 0?void 0:_context4.t0.message),{variant:\"error\"});case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[2,11]]);}));return function updateName(_x4){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateName,children:[/*#__PURE__*/_jsx(RichText,{value:body,setValue:setBody,error:isError,setError:setIsError,setIsStartedFilling:setIsStartedFilling}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update\"})]})]});};var UpdateMessage=function UpdateMessage(props){// const classes = useStyles();\nvar setOpen=props.setOpen,id=props.id,message=props.message;var _React$useState35=React.useState(message),_React$useState36=_slicedToArray(_React$useState35,2),body=_React$useState36[0],setBody=_React$useState36[1];var _React$useState37=React.useState(false),_React$useState38=_slicedToArray(_React$useState37,2),isLoading=_React$useState38[0],setIsLoading=_React$useState38[1];var _React$useState39=React.useState(false),_React$useState40=_slicedToArray(_React$useState39,2),isError=_React$useState40[0],setIsError=_React$useState40[1];var _React$useState41=React.useState(false),_React$useState42=_slicedToArray(_React$useState41,2),isStartedFilling=_React$useState42[0],setIsStartedFilling=_React$useState42[1];var _useSnackbar4=useSnackbar(),enqueueSnackbar=_useSnackbar4.enqueueSnackbar;var updateMessage=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){var timeNow,mRef;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setIsLoading(true);//No image is changed. So update all text\ntimeNow=new Date();_context5.prev=2;mRef=doc(db,\"perm-sec\",\"\"+id);_context5.next=6;return updateDoc(mRef,{message:body,updatedAt:timeNow});case 6:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Message updated successfully\",{variant:\"success\"});_context5.next=15;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](2);setIsLoading(false);enqueueSnackbar(\"\".concat(_context5.t0===null||_context5.t0===void 0?void 0:_context5.t0.message),{variant:\"error\"});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[2,11]]);}));return function updateMessage(_x5){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateMessage,children:[/*#__PURE__*/_jsx(RichText,{value:body,setValue:setBody,error:isError,setError:setIsError,setIsStartedFilling:setIsStartedFilling}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update\"})]})]});};var UpdateSummary=function UpdateSummary(props){// const classes = useStyles();\nvar setOpen=props.setOpen,id=props.id,summary=props.summary;var _React$useState43=React.useState(summary),_React$useState44=_slicedToArray(_React$useState43,2),body=_React$useState44[0],setBody=_React$useState44[1];var _React$useState45=React.useState(false),_React$useState46=_slicedToArray(_React$useState45,2),isLoading=_React$useState46[0],setIsLoading=_React$useState46[1];var _React$useState47=React.useState(false),_React$useState48=_slicedToArray(_React$useState47,2),isError=_React$useState48[0],setIsError=_React$useState48[1];var _React$useState49=React.useState(false),_React$useState50=_slicedToArray(_React$useState49,2),isStartedFilling=_React$useState50[0],setIsStartedFilling=_React$useState50[1];var _useSnackbar5=useSnackbar(),enqueueSnackbar=_useSnackbar5.enqueueSnackbar;var updateSummary=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){var timeNow,mRef;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setIsLoading(true);//No image is changed. So update all text\ntimeNow=new Date();_context6.prev=2;mRef=doc(db,\"perm-sec\",\"\"+id);_context6.next=6;return updateDoc(mRef,{summary:body,updatedAt:timeNow});case 6:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Summary updated successfully\",{variant:\"success\"});_context6.next=15;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](2);setIsLoading(false);enqueueSnackbar(\"\".concat(_context6.t0===null||_context6.t0===void 0?void 0:_context6.t0.message),{variant:\"error\"});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[2,11]]);}));return function updateSummary(_x6){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateSummary,children:[/*#__PURE__*/_jsx(RichText,{value:body,setValue:setBody,error:isError,setError:setIsError,setIsStartedFilling:setIsStartedFilling}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update\"})]})]});};export default PermSec;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/home/perm_sec.js"],"names":["ArrowBackIosNew","Edit","Avatar","Backdrop","Button","CircularProgress","Container","Divider","Grid","IconButton","Typography","Box","React","useSelector","useHistory","MUIRichTextEditor","ValidatorForm","TextValidator","CustomDialog","CustomDialog2","CustomDialog3","CustomDialog4","CustomDialog5","useSnackbar","doc","getDownloadURL","uploadBytesResumable","ref","db","storage","updateDoc","deleteObject","makeStyles","RichText","CircularProgressWithLabel","props","color","fontFamily","Math","round","value","PermSec","state","permSec","permSecData","history","useState","open","setOpen","open2","setOpen2","open3","setOpen3","open4","setOpen4","open5","setOpen5","image","name","biography","message","summary","goBack","mt","textTransform","position","useStyles","theme","margin","width","height","mb","marginBottom","UpdateImage","classes","id","formValues","setFormValues","file","setFile","isUploading","setIsUploading","isLoading","setIsLoading","progress","setProgress","previewImage","setPreviewImage","enqueueSnackbar","handleChange","e","target","files","URL","createObjectURL","prevData","uploadNewImage","storageRef","uploadTask","on","snapshot","uprogress","bytesTransferred","totalBytes","error","variant","then","downloadURL","mRef","updateImage","fileRef","catch","zIndex","UpdateName","updateName","timeNow","Date","updatedAt","UpdateBio","bio","body","setBody","isError","setIsError","isStartedFilling","setIsStartedFilling","UpdateMessage","updateMessage","UpdateSummary","updateSummary"],"mappings":"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","sourcesContent":["import { ArrowBackIosNew, Edit } from \"@mui/icons-material\";\nimport {\n  Avatar,\n  Backdrop,\n  Button,\n  CircularProgress,\n  Container,\n  Divider,\n  Grid,\n  IconButton,\n  Typography,\n} from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport MUIRichTextEditor from \"mui-rte\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport CustomDialog from \"../../../../components/dialogs/custom-dialog\";\nimport CustomDialog2 from \"../../../../components/dialogs/custom-dialog\";\nimport CustomDialog3 from \"../../../../components/dialogs/custom-dialog\";\nimport CustomDialog4 from \"../../../../components/dialogs/custom-dialog\";\nimport CustomDialog5 from \"../../../../components/dialogs/custom-dialog\";\nimport { useSnackbar } from \"notistack\";\nimport {\n  doc,\n  getDownloadURL,\n  uploadBytesResumable,\n  ref,\n  db,\n  storage,\n  updateDoc,\n  deleteObject,\n} from \"../../../../../data/firebase\";\nimport { makeStyles } from \"@mui/styles\";\nimport RichText from \"../../../../components/misc/richtext\";\n\nconst CircularProgressWithLabel = (props) => {\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress\n        variant=\"determinate\"\n        {...props}\n        size={90}\n        thickness={3.0}\n        style={{ color: \"green\" }}\n      />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography\n          variant=\"body1\"\n          component=\"div\"\n          style={{ color: \"white\", fontFamily: \"roboto\" }}\n        >{`${Math.round(props.value)}%`}</Typography>\n      </Box>\n    </Box>\n  );\n};\n\nconst PermSec = () => {\n  const { permSecData } = useSelector((state) => state.permSec);\n  const history = useHistory();\n\n  const [open, setOpen] = React.useState(false);\n  const [open2, setOpen2] = React.useState(false);\n  const [open3, setOpen3] = React.useState(false);\n  const [open4, setOpen4] = React.useState(false);\n  const [open5, setOpen5] = React.useState(false);\n\n  return (\n    <div>\n      <Container>\n        <CustomDialog\n          title=\"Update Picture\"\n          open={open}\n          handleClose={() => setOpen(false)}\n          bodyComponent={\n            <UpdateImage\n              setOpen={setOpen}\n              image={permSecData?.image}\n              id={\"info\"}\n            />\n          }\n        />\n        <CustomDialog2\n          title=\"Update Name\"\n          open={open2}\n          handleClose={() => setOpen2(false)}\n          bodyComponent={\n            <UpdateName\n              setOpen={setOpen2}\n              name={permSecData?.name}\n              id={\"info\"}\n            />\n          }\n        />\n        <CustomDialog3\n          title=\"Update Biography\"\n          open={open3}\n          handleClose={() => setOpen3(false)}\n          bodyComponent={\n            <UpdateBio\n              setOpen={setOpen3}\n              bio={permSecData?.biography}\n              id={\"info\"}\n            />\n          }\n        />\n\n        <CustomDialog4\n          title=\"Update Message\"\n          open={open4}\n          handleClose={() => setOpen4(false)}\n          bodyComponent={\n            <UpdateMessage\n              setOpen={setOpen4}\n              message={permSecData?.message}\n              id={\"info\"}\n            />\n          }\n        />\n\n        <CustomDialog5\n          title=\"Update Summary\"\n          open={open5}\n          handleClose={() => setOpen5(false)}\n          bodyComponent={\n            <UpdateSummary\n              setOpen={setOpen5}\n              message={permSecData?.summary}\n              id={\"info\"}\n            />\n          }\n        />\n        <Button\n          onClick={() => history.goBack()}\n          startIcon={<ArrowBackIosNew />}\n        >\n          Back\n        </Button>\n        <br />\n        <br />\n        <Grid container spacing={2}>\n          <Grid item sm={6} md={5}>\n            <Box display=\"flex\" flexDirection=\"column\">\n              <img src={permSecData?.image} alt=\"\" />\n              <Button\n                sx={{ mt: 1, textTransform: \"none\" }}\n                variant=\"contained\"\n                onClick={() => setOpen(true)}\n              >\n                Update Image\n              </Button>\n              <br />\n              <Box\n                paddingY={1}\n                display={\"flex\"}\n                flexDirection=\"row\"\n                justifyContent={\"space-between\"}\n                alignItems=\"center\"\n              >\n                <Typography>{permSecData?.name}</Typography>\n                <Button\n                  variant=\"contained\"\n                  sx={{ textTransform: \"none\" }}\n                  startIcon={<Edit />}\n                  onClick={() => setOpen2(true)}\n                >\n                  Update\n                </Button>\n              </Box>\n              <Divider />\n              <Box\n                paddingY={1}\n                display={\"flex\"}\n                flexDirection=\"row\"\n                justifyContent={\"space-between\"}\n                alignItems=\"center\"\n              >\n                <Typography>{permSecData?.position}</Typography>\n              </Box>\n            </Box>\n          </Grid>\n\n          <Grid item sm={6} md={7}>\n            <Box display=\"flex\" flexDirection=\"column\">\n              <Box\n                display=\"flex\"\n                flexDirection=\"row\"\n                justifyContent=\"space-between\"\n                alignItems=\"center\"\n              >\n                <Typography variant=\"h6\">BIOGRAPHY</Typography>\n                <IconButton onClick={() => setOpen3(true)}>\n                  <Edit />\n                </IconButton>\n              </Box>\n              <Divider />\n              <MUIRichTextEditor\n                readOnly\n                inlineToolbar={false}\n                toolbar={false}\n                defaultValue={permSecData?.biography}\n              />\n            </Box>\n          </Grid>\n        </Grid>\n        <br />\n        <Divider />\n        <br />\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Typography variant=\"h6\">WELCOME MESSAGE</Typography>\n          <IconButton onClick={() => setOpen4(true)}>\n            <Edit />\n          </IconButton>\n        </Box>\n        <Divider />\n        <MUIRichTextEditor\n          readOnly\n          inlineToolbar={false}\n          toolbar={false}\n          defaultValue={permSecData?.message}\n        />\n\n        <br />\n        <Divider />\n        <br />\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Typography variant=\"h6\">\n            MESSAGE SUMMARY (SHORT DESCRIPTION ON HOME PAGE)\n          </Typography>\n          <IconButton onClick={() => setOpen5(true)}>\n            <Edit />\n          </IconButton>\n        </Box>\n        <Divider />\n        <Typography>{permSecData?.summary}</Typography>\n      </Container>\n    </div>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  image: {\n    margin: \"0px auto 15px auto\",\n    width: 128,\n    height: 100,\n  },\n  mb: {\n    marginBottom: 10,\n  },\n}));\n\nconst UpdateImage = (props) => {\n  const classes = useStyles();\n  let { image, setOpen, id } = props;\n  const [formValues, setFormValues] = React.useState({\n    image: \"\",\n  });\n  const [file, setFile] = React.useState(null);\n  const [isUploading, setIsUploading] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const [previewImage, setPreviewImage] = React.useState(\"\");\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { id, name, value } = e.target;\n\n    if (id === \"image\") {\n      setFile(e.target.files[0]);\n      setPreviewImage(URL.createObjectURL(e.target.files[0]));\n      setFormValues((prevData) => ({\n        ...prevData,\n        image: e.target.value,\n      }));\n    } else {\n      setFormValues((prevData) => ({ ...prevData, [name]: value }));\n    }\n  };\n\n  const uploadNewImage = () => {\n    setIsUploading(true);\n    // const timeNow = new Date();\n    //First upload image to firebase storage then save to firestore\n    const storageRef = ref(storage, \"perm-sec/\" + id);\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const uprogress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        setProgress(uprogress);\n      },\n      (error) => {\n        setIsUploading(false);\n        // console.log(error);\n        enqueueSnackbar(`${error.message}`, { variant: \"error\" });\n      },\n      () => {\n        setIsUploading(false);\n        setIsLoading(true);\n        getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n          const mRef = doc(db, \"perm-sec\", \"\" + id);\n          try {\n            await updateDoc(mRef, {\n              image: downloadURL,\n            });\n            setOpen(false);\n            setIsLoading(false);\n            enqueueSnackbar(`Image updated successfully`, {\n              variant: \"success\",\n            });\n          } catch (error) {\n            setIsLoading(false);\n            enqueueSnackbar(`${error?.message}`, {\n              variant: \"error\",\n            });\n          }\n        });\n      }\n    );\n  };\n\n  const updateImage = async (e) => {\n    setIsLoading(true);\n\n    //Change on the featured image and all texts\n    const fileRef = ref(storage, \"perm-sec/info\");\n\n    deleteObject(fileRef)\n      .then(() => {\n        setIsLoading(false);\n        uploadNewImage();\n      })\n      .catch((error) => {\n        setIsLoading(false);\n        // console.log(\"ErR: \", error);\n      });\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isUploading || isLoading}>\n        {isUploading ? <CircularProgressWithLabel value={progress} /> : <div />}\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateImage}>\n        <Grid container spacing={1} padding={1}>\n          <Grid item xs={12} sm={6} md={7}>\n            <TextValidator\n              id=\"image\"\n              size=\"small\"\n              variant=\"outlined\"\n              value={formValues.image}\n              name=\"image\"\n              type=\"file\"\n              fullWidth\n              disabled={isLoading}\n              accept=\".png, .jpg, .jpeg\"\n              onChange={handleChange}\n              helperText=\"Featured image\"\n            />\n          </Grid>\n\n          <Grid item xs={12} sm={6} md={5}>\n            <div>\n              <Avatar\n                variant=\"rounded\"\n                alt=\"Passport\"\n                src={previewImage ? previewImage : image}\n                className={classes.image}\n              />\n            </div>\n          </Grid>\n        </Grid>\n        <br />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading || isUploading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst UpdateName = (props) => {\n  const classes = useStyles();\n  let { setOpen, id, name } = props;\n  const [formValues, setFormValues] = React.useState({\n    name: name,\n    image: \"\",\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { id, name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const updateName = async (e) => {\n    setIsLoading(true);\n    setFormValues({\n      name: formValues.name ? formValues.name : name,\n    });\n\n    //No image is changed. So update all text\n    const timeNow = new Date();\n    try {\n      const mRef = doc(db, \"perm-sec\", \"\" + id);\n      await updateDoc(mRef, {\n        name: formValues.name,\n        updatedAt: timeNow,\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Name updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateName}>\n        <TextValidator\n          className={classes.mb}\n          id=\"name\"\n          label=\"Name\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={\n            formValues.name === \" \"\n              ? name\n              : !formValues.name\n              ? \"\"\n              : formValues.name\n          }\n          onChange={handleChange}\n          name=\"name\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Name is required\"]}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst UpdateBio = (props) => {\n  const classes = useStyles();\n  let { setOpen, id, bio } = props;\n  const [body, setBody] = React.useState(bio);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isError, setIsError] = React.useState(false);\n  const [isStartedFilling, setIsStartedFilling] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateName = async (e) => {\n    setIsLoading(true);\n\n    //No image is changed. So update all text\n    const timeNow = new Date();\n    try {\n      const mRef = doc(db, \"perm-sec\", \"\" + id);\n      await updateDoc(mRef, {\n        biography: body,\n        updatedAt: timeNow,\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Biography updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateName}>\n        <RichText\n          value={body}\n          setValue={setBody}\n          error={isError}\n          setError={setIsError}\n          setIsStartedFilling={setIsStartedFilling}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst UpdateMessage = (props) => {\n  // const classes = useStyles();\n  let { setOpen, id, message } = props;\n  const [body, setBody] = React.useState(message);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isError, setIsError] = React.useState(false);\n  const [isStartedFilling, setIsStartedFilling] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateMessage = async (e) => {\n    setIsLoading(true);\n\n    //No image is changed. So update all text\n    const timeNow = new Date();\n    try {\n      const mRef = doc(db, \"perm-sec\", \"\" + id);\n      await updateDoc(mRef, {\n        message: body,\n        updatedAt: timeNow,\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Message updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateMessage}>\n        <RichText\n          value={body}\n          setValue={setBody}\n          error={isError}\n          setError={setIsError}\n          setIsStartedFilling={setIsStartedFilling}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst UpdateSummary = (props) => {\n  // const classes = useStyles();\n  let { setOpen, id, summary } = props;\n  const [body, setBody] = React.useState(summary);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isError, setIsError] = React.useState(false);\n  const [isStartedFilling, setIsStartedFilling] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateSummary = async (e) => {\n    setIsLoading(true);\n\n    //No image is changed. So update all text\n    const timeNow = new Date();\n    try {\n      const mRef = doc(db, \"perm-sec\", \"\" + id);\n      await updateDoc(mRef, {\n        summary: body,\n        updatedAt: timeNow,\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Summary updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateSummary}>\n        <RichText\n          value={body}\n          setValue={setBody}\n          error={isError}\n          setError={setIsError}\n          setIsStartedFilling={setIsStartedFilling}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default PermSec;\n"]},"metadata":{},"sourceType":"module"}