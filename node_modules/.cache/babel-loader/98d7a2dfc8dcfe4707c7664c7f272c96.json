{"ast":null,"code":"import _toConsumableArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";// import Avatar from \"@mui/material/Avatar\";\n// import { makeStyles } from \"@mui/styles\";\nimport Button from\"@mui/material/Button\";import{db,doc,updateDoc}from\"../../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{CircularProgress}from\"@mui/material\";// const useStyles = makeStyles((theme) => ({\n//   image: {\n//     margin: \"0px auto 15px auto\",\n//     width: 128,\n//     height: 128,\n//   },\n// }));\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewFacilityForm=function NewFacilityForm(props){var setOpen=props.setOpen,id=props.id,list=props.list;var _React$useState=React.useState({name:\"\",designation:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),faci=_React$useState6[0],setFaci=_React$useState6[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;React.useEffect(function(){if(list){//   console.log(`SJHS: ${list}`);\nsetFaci(list);setIsLoading(false);}},[list]);var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var addRecord=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _list;var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// const timeNow = new Date();\nsetIsLoading(true);list=Object.assign([],list);(_list=list)===null||_list===void 0?void 0:_list.push({name:formValues.name});mRef=doc(db,\"lgas\",\"\"+id);// console.log(`GYS: ${list?.length}`);\n// list?.forEach((element) => {\n//   console.log(\"ELEM\", element);\n// });\n_context.prev=4;_context.next=7;return updateDoc(mRef,{facilities:_toConsumableArray(list)});case 7:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Facility added successfully\",{variant:\"success\"});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);setIsLoading(false);enqueueSnackbar(\"\".concat((_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)||\"Check your internet!\"),{variant:\"error\"});case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,12]]);}));return function addRecord(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:addRecord,children:[/*#__PURE__*/_jsx(TextValidator,{label:\"Name\",size:\"small\",variant:\"outlined\",value:formValues.name,onChange:handleChange,name:\"name\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Name is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Save Facility\"})]})]});};export default NewFacilityForm;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/lga/facilities/add_facility.js"],"names":["React","ValidatorForm","TextValidator","Button","db","doc","updateDoc","useSnackbar","Backdrop","CircularProgress","NewFacilityForm","props","setOpen","id","list","useState","name","designation","formValues","setFormValues","isLoading","setIsLoading","faci","setFaci","enqueueSnackbar","useEffect","handleChange","e","target","value","prevData","addRecord","Object","assign","push","mRef","facilities","variant","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\n// import Avatar from \"@mui/material/Avatar\";\n// import { makeStyles } from \"@mui/styles\";\nimport Button from \"@mui/material/Button\";\nimport { db, doc, updateDoc } from \"../../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { CircularProgress } from \"@mui/material\";\n\n// const useStyles = makeStyles((theme) => ({\n//   image: {\n//     margin: \"0px auto 15px auto\",\n//     width: 128,\n//     height: 128,\n//   },\n// }));\n\nconst NewFacilityForm = (props) => {\n  let { setOpen, id, list } = props;\n  const [formValues, setFormValues] = React.useState({\n    name: \"\",\n    designation: \"\",\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [faci, setFaci] = React.useState([]);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    if (list) {\n      //   console.log(`SJHS: ${list}`);\n      setFaci(list);\n\n      setIsLoading(false);\n    }\n  }, [list]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const addRecord = async (e) => {\n    // const timeNow = new Date();\n    setIsLoading(true);\n    list = Object.assign([], list);\n    list?.push({\n      name: formValues.name,\n    });\n    const mRef = doc(db, \"lgas\", \"\" + id);\n\n    // console.log(`GYS: ${list?.length}`);\n    // list?.forEach((element) => {\n    //   console.log(\"ELEM\", element);\n    // });\n\n    try {\n      await updateDoc(mRef, {\n        facilities: [...list],\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Facility added successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet!\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={addRecord}>\n        <TextValidator\n          label=\"Name\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.name}\n          onChange={handleChange}\n          name=\"name\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Name is required\"]}\n        />\n        <br />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Save Facility\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default NewFacilityForm;\n"]},"metadata":{},"sourceType":"module"}