{"ast":null,"code":"import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import{Add,ArrowBackIosNew,Edit}from\"@mui/icons-material\";import{Avatar,Backdrop,Button,CircularProgress,Container,Divider,Grid,TextField,Typography}from\"@mui/material\";import{Box}from\"@mui/system\";// import MUIRichTextEditor from \"mui-rte\";\nimport React from\"react\";import{TextValidator}from\"react-material-ui-form-validator\";import{ValidatorForm}from\"react-material-ui-form-validator\";import{useSelector}from\"react-redux\";import{useHistory,useLocation}from\"react-router-dom\";import CommitteeTable from\"../../../../../components/misc/table/comm_table\";import FacilitiesTable from\"../../../../../components/misc/table/facility_table\";import{updateDoc,uploadBytesResumable,db,ref,doc,storage,getDownloadURL}from\"../../../../../../data/firebase\";import{makeStyles}from\"@mui/styles\";import{useSnackbar}from\"notistack\";import CustomDialog from\"../../../../../components/dialogs/custom-dialog\";import CustomDialog2 from\"../../../../../components/dialogs/custom-dialog\";import CustomDialog3 from\"../../../../../components/dialogs/custom-dialog\";import CustomDialog4 from\"../../../../../components/dialogs/custom-dialog\";import NewCommitteeForm from\"../../../../../forms/lga/committee/add_committee\";import NewFacilityForm from\"../../../../../forms/lga/facilities/add_facility\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LGAItem=function LGAItem(){var _location$state2;var history=useHistory();var location=useLocation();var _useSelector=useSelector(function(state){return state.lgas;}),LGAsData=_useSelector.LGAsData;// const [lgaFacilities, setLGAFacilities] = React.useState();\nvar _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),lgaItem=_React$useState2[0],setLGAItem=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),open2=_React$useState6[0],setOpen2=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),open3=_React$useState8[0],setOpen3=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),open4=_React$useState10[0],setOpen4=_React$useState10[1];React.useEffect(function(){var faci=LGAsData===null||LGAsData===void 0?void 0:LGAsData.filter(function(it){var _location$state;return(it===null||it===void 0?void 0:it.lga)===((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.title);});// setLGAFacilities(faci[0]?.facilities);\nsetLGAItem(faci[0]);// console.log(\"Facility: \", faci);\n},[LGAsData,(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.title]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CustomDialog,{title:\"Update Featured Image\",open:open,handleClose:function handleClose(){return setOpen(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateImage,{setOpen:setOpen,image:lgaItem===null||lgaItem===void 0?void 0:lgaItem.image,id:lgaItem===null||lgaItem===void 0?void 0:lgaItem.id})}),/*#__PURE__*/_jsx(CustomDialog2,{title:\" Update Background Information Text. \",open:open2,handleClose:function handleClose(){return setOpen2(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateTitle,{setOpen:setOpen2,title:lgaItem===null||lgaItem===void 0?void 0:lgaItem.bg_info,id:lgaItem===null||lgaItem===void 0?void 0:lgaItem.id})}),/*#__PURE__*/_jsx(CustomDialog3,{title:\"Add New Committee Record\",open:open3,handleClose:function handleClose(){return setOpen3(false);},bodyComponent:/*#__PURE__*/_jsx(NewCommitteeForm,{setOpen:setOpen3,id:lgaItem===null||lgaItem===void 0?void 0:lgaItem.id,list:lgaItem===null||lgaItem===void 0?void 0:lgaItem.committees})}),/*#__PURE__*/_jsx(CustomDialog4,{title:\"Add New Facility Record\",open:open4,handleClose:function handleClose(){return setOpen4(false);},bodyComponent:/*#__PURE__*/_jsx(NewFacilityForm,{setOpen:setOpen4,id:lgaItem===null||lgaItem===void 0?void 0:lgaItem.id,list:lgaItem===null||lgaItem===void 0?void 0:lgaItem.facilities})}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return history.goBack();},startIcon:/*#__PURE__*/_jsx(ArrowBackIosNew,{}),children:\"Back\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"end\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(Edit,{}),onClick:function onClick(){return setOpen2(true);},children:\"Edit\"})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:5,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",children:[/*#__PURE__*/_jsx(\"img\",{src:lgaItem===null||lgaItem===void 0?void 0:lgaItem.image,alt:\"\",width:\"100%\"}),/*#__PURE__*/_jsx(Button,{sx:{mt:1,textTransform:\"none\"},variant:\"contained\",onClick:function onClick(){return setOpen(true);},children:\"Update Image\"}),/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:7,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:\"BACKGROUND INFORMATION\"}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:lgaItem===null||lgaItem===void 0?void 0:lgaItem.bg_info}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:\"PHC TECHNICAL COMMITTEES\"}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:lgaItem===null||lgaItem===void 0?void 0:lgaItem.comm_desc}),/*#__PURE__*/_jsx(\"br\",{})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:\"COMMITTEES\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:function onClick(){return setOpen3(true);},children:\"Add New\"})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(CommitteeTable,{list:lgaItem===null||lgaItem===void 0?void 0:lgaItem.committees})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:\"FACILITIES\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:function onClick(){return setOpen4(true);},children:\"Add New\"})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(FacilitiesTable,{list:lgaItem===null||lgaItem===void 0?void 0:lgaItem.facilities})})]})]});};var CircularProgressWithLabel=function CircularProgressWithLabel(props){return/*#__PURE__*/_jsxs(Box,{position:\"relative\",display:\"inline-flex\",children:[/*#__PURE__*/_jsx(CircularProgress,_objectSpread(_objectSpread({variant:\"determinate\"},props),{},{size:90,thickness:3.0,style:{color:\"green\"}})),/*#__PURE__*/_jsx(Box,{top:0,left:0,bottom:0,right:0,position:\"absolute\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"div\",style:{color:\"white\",fontFamily:\"roboto\"},children:\"\".concat(Math.round(props.value),\"%\")})})]});};var useStyles=makeStyles(function(theme){return{image:{margin:\"0px auto 15px auto\",width:128,height:100},mb:{marginBottom:10}};});var UpdateImage=function UpdateImage(props){var classes=useStyles();var image=props.image,setOpen=props.setOpen,id=props.id;var _React$useState11=React.useState({image:\"\"}),_React$useState12=_slicedToArray(_React$useState11,2),formValues=_React$useState12[0],setFormValues=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),file=_React$useState14[0],setFile=_React$useState14[1];var _React$useState15=React.useState(false),_React$useState16=_slicedToArray(_React$useState15,2),isUploading=_React$useState16[0],setIsUploading=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),isLoading=_React$useState18[0],setIsLoading=_React$useState18[1];var _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),progress=_React$useState20[0],setProgress=_React$useState20[1];var _React$useState21=React.useState(\"\"),_React$useState22=_slicedToArray(_React$useState21,2),previewImage=_React$useState22[0],setPreviewImage=_React$useState22[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,name=_e$target.name,value=_e$target.value;if(id===\"image\"){setFile(e.target.files[0]);setPreviewImage(URL.createObjectURL(e.target.files[0]));setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{image:e.target.value});});}else{setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});}};var uploadNewImage=function uploadNewImage(){setIsUploading(true);// const timeNow = new Date();\n//First upload image to firebase storage then save to firestore\nvar storageRef=ref(storage,\"lgas/\"+id);var uploadTask=uploadBytesResumable(storageRef,file);uploadTask.on(\"state_changed\",function(snapshot){var uprogress=snapshot.bytesTransferred/snapshot.totalBytes*100;setProgress(uprogress);},function(error){setIsUploading(false);// console.log(error);\nenqueueSnackbar(\"\".concat(error===null||error===void 0?void 0:error.message),{variant:\"error\"});},function(){setIsUploading(false);setIsLoading(true);getDownloadURL(uploadTask.snapshot.ref).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(downloadURL){var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mRef=doc(db,\"lgas\",\"\"+id);_context.prev=1;_context.next=4;return updateDoc(mRef,{image:downloadURL});case 4:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Image updated successfully\",{variant:\"success\"});_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setIsLoading(false);enqueueSnackbar(\"\".concat(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message),{variant:\"error\"});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}());});};var updateImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);uploadNewImage();case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function updateImage(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Backdrop,{style:{zIndex:1200},open:isUploading||isLoading,children:[isUploading?/*#__PURE__*/_jsx(CircularProgressWithLabel,{value:progress}):/*#__PURE__*/_jsx(\"div\",{}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateImage,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,padding:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:7,children:/*#__PURE__*/_jsx(TextValidator,{id:\"image\",size:\"small\",variant:\"outlined\",value:formValues.image,name:\"image\",type:\"file\",fullWidth:true,disabled:isLoading,accept:\".png, .jpg, .jpeg\",onChange:handleChange,helperText:\"Featured image\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:5,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Avatar,{variant:\"rounded\",alt:\"Passport\",src:previewImage?previewImage:image,className:classes.image})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading||isUploading,fullWidth:true,children:\"Update\"})]})]});};var UpdateTitle=function UpdateTitle(props){var classes=useStyles();var setOpen=props.setOpen,title=props.title,id=props.id;var _React$useState23=React.useState({title:title}),_React$useState24=_slicedToArray(_React$useState23,2),formValues=_React$useState24[0],setFormValues=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),isLoading=_React$useState26[0],setIsLoading=_React$useState26[1];var _useSnackbar2=useSnackbar(),enqueueSnackbar=_useSnackbar2.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var updateName=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var mRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setIsLoading(true);setFormValues({title:formValues.title?formValues.title:title});_context3.prev=2;mRef=doc(db,\"lgas\",\"\"+id);_context3.next=6;return updateDoc(mRef,{bg_info:formValues.title}).then(function(){setOpen(false);setIsLoading(false);enqueueSnackbar(\"Updated successfully\",{variant:\"success\"});});case 6:_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);setIsLoading(false);enqueueSnackbar(\"\".concat((_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[2,8]]);}));return function updateName(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateName,children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-multiline-static\",multiline:true,label:\"Background Information\",placeholder:\"Type here...\",size:\"small\",variant:\"outlined\",value:formValues.title===\" \"?title:!formValues.title?\"\":formValues.title,onChange:handleChange,name:\"title\",rows:10,fullWidth:true,required:true,className:classes.mb}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update Bg Info\"})]})]});};export default LGAItem;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/about/components/lga_item.js"],"names":["Add","ArrowBackIosNew","Edit","Avatar","Backdrop","Button","CircularProgress","Container","Divider","Grid","TextField","Typography","Box","React","TextValidator","ValidatorForm","useSelector","useHistory","useLocation","CommitteeTable","FacilitiesTable","updateDoc","uploadBytesResumable","db","ref","doc","storage","getDownloadURL","makeStyles","useSnackbar","CustomDialog","CustomDialog2","CustomDialog3","CustomDialog4","NewCommitteeForm","NewFacilityForm","LGAItem","history","location","state","lgas","LGAsData","useState","lgaItem","setLGAItem","open","setOpen","open2","setOpen2","open3","setOpen3","open4","setOpen4","useEffect","faci","filter","it","lga","title","image","id","bg_info","committees","facilities","goBack","mt","textTransform","comm_desc","CircularProgressWithLabel","props","color","fontFamily","Math","round","value","useStyles","theme","margin","width","height","mb","marginBottom","UpdateImage","classes","formValues","setFormValues","file","setFile","isUploading","setIsUploading","isLoading","setIsLoading","progress","setProgress","previewImage","setPreviewImage","enqueueSnackbar","handleChange","e","target","name","files","URL","createObjectURL","prevData","uploadNewImage","storageRef","uploadTask","on","snapshot","uprogress","bytesTransferred","totalBytes","error","message","variant","then","downloadURL","mRef","updateImage","zIndex","UpdateTitle","updateName"],"mappings":"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","sourcesContent":["import { Add, ArrowBackIosNew, Edit } from \"@mui/icons-material\";\nimport {\n  Avatar,\n  Backdrop,\n  Button,\n  CircularProgress,\n  Container,\n  Divider,\n  Grid,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { Box } from \"@mui/system\";\n// import MUIRichTextEditor from \"mui-rte\";\nimport React from \"react\";\nimport { TextValidator } from \"react-material-ui-form-validator\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport CommitteeTable from \"../../../../../components/misc/table/comm_table\";\nimport FacilitiesTable from \"../../../../../components/misc/table/facility_table\";\nimport {\n  updateDoc,\n  uploadBytesResumable,\n  db,\n  ref,\n  doc,\n  storage,\n  getDownloadURL,\n} from \"../../../../../../data/firebase\";\nimport { makeStyles } from \"@mui/styles\";\nimport { useSnackbar } from \"notistack\";\nimport CustomDialog from \"../../../../../components/dialogs/custom-dialog\";\nimport CustomDialog2 from \"../../../../../components/dialogs/custom-dialog\";\nimport CustomDialog3 from \"../../../../../components/dialogs/custom-dialog\";\nimport CustomDialog4 from \"../../../../../components/dialogs/custom-dialog\";\nimport NewCommitteeForm from \"../../../../../forms/lga/committee/add_committee\";\nimport NewFacilityForm from \"../../../../../forms/lga/facilities/add_facility\";\n\nconst LGAItem = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const { LGAsData } = useSelector((state) => state.lgas);\n  // const [lgaFacilities, setLGAFacilities] = React.useState();\n  const [lgaItem, setLGAItem] = React.useState();\n  const [open, setOpen] = React.useState(false);\n  const [open2, setOpen2] = React.useState(false);\n  const [open3, setOpen3] = React.useState(false);\n  const [open4, setOpen4] = React.useState(false);\n\n  React.useEffect(() => {\n    let faci = LGAsData?.filter((it) => it?.lga === location.state?.title);\n    // setLGAFacilities(faci[0]?.facilities);\n    setLGAItem(faci[0]);\n    // console.log(\"Facility: \", faci);\n  }, [LGAsData, location.state?.title]);\n\n  return (\n    <div>\n      <CustomDialog\n        title=\"Update Featured Image\"\n        open={open}\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <UpdateImage\n            setOpen={setOpen}\n            image={lgaItem?.image}\n            id={lgaItem?.id}\n          />\n        }\n      />\n      <CustomDialog2\n        title=\" Update Background Information Text. \"\n        open={open2}\n        handleClose={() => setOpen2(false)}\n        bodyComponent={\n          <UpdateTitle\n            setOpen={setOpen2}\n            title={lgaItem?.bg_info}\n            id={lgaItem?.id}\n          />\n        }\n      />\n      <CustomDialog3\n        title=\"Add New Committee Record\"\n        open={open3}\n        handleClose={() => setOpen3(false)}\n        bodyComponent={\n          <NewCommitteeForm\n            setOpen={setOpen3}\n            id={lgaItem?.id}\n            list={lgaItem?.committees}\n          />\n        }\n      />\n      <CustomDialog4\n        title=\"Add New Facility Record\"\n        open={open4}\n        handleClose={() => setOpen4(false)}\n        bodyComponent={\n          <NewFacilityForm\n            setOpen={setOpen4}\n            id={lgaItem?.id}\n            list={lgaItem?.facilities}\n          />\n        }\n      />\n      <Container>\n        <Button\n          onClick={() => history.goBack()}\n          startIcon={<ArrowBackIosNew />}\n        >\n          Back\n        </Button>\n        <br />\n        <br />\n\n        <Box\n          display={\"flex\"}\n          flexDirection=\"row\"\n          justifyContent={\"end\"}\n          alignItems=\"center\"\n        >\n          <Button startIcon={<Edit />} onClick={() => setOpen2(true)}>\n            Edit\n          </Button>\n        </Box>\n        <Divider />\n        <br />\n        <Grid container spacing={2}>\n          <Grid item sm={6} md={5}>\n            <Box display=\"flex\" flexDirection=\"column\">\n              <img src={lgaItem?.image} alt=\"\" width={\"100%\"} />\n              <Button\n                sx={{ mt: 1, textTransform: \"none\" }}\n                variant=\"contained\"\n                onClick={() => setOpen(true)}\n              >\n                Update Image\n              </Button>\n              <br />\n            </Box>\n          </Grid>\n\n          <Grid item sm={6} md={7}>\n            <Box display=\"flex\" flexDirection=\"column\">\n              <Typography gutterBottom>BACKGROUND INFORMATION</Typography>\n              <Typography gutterBottom>{lgaItem?.bg_info}</Typography>\n              <br />\n              <br />\n              <Typography gutterBottom>PHC TECHNICAL COMMITTEES</Typography>\n              <Typography gutterBottom>{lgaItem?.comm_desc}</Typography>\n              <br />\n            </Box>\n          </Grid>\n        </Grid>\n\n        <br />\n        <br />\n        <br />\n        <Box\n          display={\"flex\"}\n          flexDirection=\"row\"\n          justifyContent={\"space-between\"}\n          alignItems=\"center\"\n        >\n          <Typography gutterBottom>COMMITTEES</Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => setOpen3(true)}\n          >\n            Add New\n          </Button>\n        </Box>\n        <Divider />\n        <br />\n        <Box>\n          <CommitteeTable list={lgaItem?.committees} />\n        </Box>\n\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <Box\n          display={\"flex\"}\n          flexDirection=\"row\"\n          justifyContent={\"space-between\"}\n          alignItems=\"center\"\n        >\n          <Typography gutterBottom>FACILITIES</Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => setOpen4(true)}\n          >\n            Add New\n          </Button>\n        </Box>\n        <Divider />\n        <br />\n        <Box>\n          <FacilitiesTable list={lgaItem?.facilities} />\n        </Box>\n      </Container>\n    </div>\n  );\n};\n\nconst CircularProgressWithLabel = (props) => {\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress\n        variant=\"determinate\"\n        {...props}\n        size={90}\n        thickness={3.0}\n        style={{ color: \"green\" }}\n      />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography\n          variant=\"body1\"\n          component=\"div\"\n          style={{ color: \"white\", fontFamily: \"roboto\" }}\n        >{`${Math.round(props.value)}%`}</Typography>\n      </Box>\n    </Box>\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  image: {\n    margin: \"0px auto 15px auto\",\n    width: 128,\n    height: 100,\n  },\n  mb: {\n    marginBottom: 10,\n  },\n}));\n\nconst UpdateImage = (props) => {\n  const classes = useStyles();\n  let { image, setOpen, id } = props;\n  const [formValues, setFormValues] = React.useState({\n    image: \"\",\n  });\n  const [file, setFile] = React.useState(null);\n  const [isUploading, setIsUploading] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const [previewImage, setPreviewImage] = React.useState(\"\");\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { id, name, value } = e.target;\n\n    if (id === \"image\") {\n      setFile(e.target.files[0]);\n      setPreviewImage(URL.createObjectURL(e.target.files[0]));\n      setFormValues((prevData) => ({\n        ...prevData,\n        image: e.target.value,\n      }));\n    } else {\n      setFormValues((prevData) => ({ ...prevData, [name]: value }));\n    }\n  };\n\n  const uploadNewImage = () => {\n    setIsUploading(true);\n    // const timeNow = new Date();\n    //First upload image to firebase storage then save to firestore\n    const storageRef = ref(storage, \"lgas/\" + id);\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const uprogress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        setProgress(uprogress);\n      },\n      (error) => {\n        setIsUploading(false);\n        // console.log(error);\n        enqueueSnackbar(`${error?.message}`, { variant: \"error\" });\n      },\n      () => {\n        setIsUploading(false);\n        setIsLoading(true);\n        getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n          const mRef = doc(db, \"lgas\", \"\" + id);\n          try {\n            await updateDoc(mRef, {\n              image: downloadURL,\n            });\n            setOpen(false);\n            setIsLoading(false);\n            enqueueSnackbar(`Image updated successfully`, {\n              variant: \"success\",\n            });\n          } catch (error) {\n            setIsLoading(false);\n            enqueueSnackbar(`${error?.message}`, {\n              variant: \"error\",\n            });\n          }\n        });\n      }\n    );\n  };\n\n  const updateImage = async (e) => {\n    setIsLoading(true);\n    uploadNewImage();\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isUploading || isLoading}>\n        {isUploading ? <CircularProgressWithLabel value={progress} /> : <div />}\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateImage}>\n        <Grid container spacing={1} padding={1}>\n          <Grid item xs={12} sm={6} md={7}>\n            <TextValidator\n              id=\"image\"\n              size=\"small\"\n              variant=\"outlined\"\n              value={formValues.image}\n              name=\"image\"\n              type=\"file\"\n              fullWidth\n              disabled={isLoading}\n              accept=\".png, .jpg, .jpeg\"\n              onChange={handleChange}\n              helperText=\"Featured image\"\n            />\n          </Grid>\n\n          <Grid item xs={12} sm={6} md={5}>\n            <div>\n              <Avatar\n                variant=\"rounded\"\n                alt=\"Passport\"\n                src={previewImage ? previewImage : image}\n                className={classes.image}\n              />\n            </div>\n          </Grid>\n        </Grid>\n        <br />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading || isUploading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst UpdateTitle = (props) => {\n  const classes = useStyles();\n  let { setOpen, title, id } = props;\n  const [formValues, setFormValues] = React.useState({\n    title: title,\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const updateName = async (e) => {\n    setIsLoading(true);\n    setFormValues({\n      title: formValues.title ? formValues.title : title,\n    });\n\n    try {\n      const mRef = doc(db, \"lgas\", \"\" + id);\n      await updateDoc(mRef, {\n        bg_info: formValues.title,\n      }).then(() => {\n        setOpen(false);\n        setIsLoading(false);\n        enqueueSnackbar(`Updated successfully`, {\n          variant: \"success\",\n        });\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet connection\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateName}>\n        <TextField\n          id=\"outlined-multiline-static\"\n          multiline\n          label=\"Background Information\"\n          placeholder=\"Type here...\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={\n            formValues.title === \" \"\n              ? title\n              : !formValues.title\n              ? \"\"\n              : formValues.title\n          }\n          onChange={handleChange}\n          name=\"title\"\n          rows={10}\n          fullWidth\n          required\n          className={classes.mb}\n        />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update Bg Info\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default LGAItem;\n"]},"metadata":{},"sourceType":"module"}