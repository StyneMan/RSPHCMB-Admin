{"ast":null,"code":"import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import{Add,ArrowBackIos,Delete}from\"@mui/icons-material\";import{Button,Card,CardActionArea,CardMedia,Divider,Grid,IconButton,Typography}from\"@mui/material\";import React from\"react\";import{useLocation,useHistory}from\"react-router-dom\";import CustomDialog from\"../../../../components/dialogs/custom-dialog\";import DeleteDialog from\"../../../../components/dialogs/custom-dialog\";import{useSnackbar}from\"notistack\";import{makeStyles}from\"@mui/styles\";import CloudOffIcon from\"@mui/icons-material/CloudOff\";import{db,doc,deleteDoc,onSnapshot}from\"../../../../../data/firebase\";import AddSubAlbumForm from\"../../../../forms/gallery/add_sub_album\";import UpdateSubAlbumForm from\"../../../../forms/gallery/update_sub_album\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{height:286,width:\"100%\"},row:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\"},rowHeader:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",padding:10},main:{display:\"flex\",flex:1,flexDirection:\"column\",margin:\"auto\",minHeight:275,minWidth:320,alignItems:\"center\"},cardMedia:{height:156,width:\"100%\"},subRow:{display:\"flex\",flexDirection:\"row\",justifyContent:\"end\",alignItems:\"center\"},lhsRow:{display:\"flex\",flexDirection:\"row\",justifyContent:\"start\",alignItems:\"center\"},avatar:{height:36,width:36},column:{display:\"flex\",flexDirection:\"column\",justifyContent:\"start\",alignItems:\"start\",padding:4}};});var ItemCard=function ItemCard(props){var _item$desc,_item$desc2;var item=props.item,index=props.index,list=props.list;var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),openDelete=_React$useState4[0],setOpenDelete=_React$useState4[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var deleteService=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setOpenDelete(false);_context.prev=1;_context.next=4;return deleteDoc(doc(db,\"gallery\",\"\"+(item===null||item===void 0?void 0:item.id)));case 4:enqueueSnackbar(\"Item deleted successfully\",{variant:\"success\"});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.log(\"ERR: Del: \",_context.t0);enqueueSnackbar(\"Item not deleted. Try again\",{variant:\"error\"});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function deleteService(){return _ref.apply(this,arguments);};}();var deleteBody=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",gutterBottom:true,children:\"Are you sure you want to delete this item?\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.subRow,children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"contained\",style:{marginRight:4},onClick:function onClick(){return setOpenDelete(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"contained\",color:\"error\",onClick:deleteService,children:\"Delete\"})]})]});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DeleteDialog,{open:openDelete,title:\"Delete Gallery Album\",handleClose:function handleClose(){return setOpenDelete(false);},bodyComponent:deleteBody}),/*#__PURE__*/_jsx(CustomDialog,{open:open,title:\"Update Gallery Items\",handleClose:function handleClose(){return setOpen(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateSubAlbumForm,{setOpen:setOpen,id:index,list:list})}),/*#__PURE__*/_jsxs(Card,{elevation:3,className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.rowHeader,children:/*#__PURE__*/_jsx(\"div\",{className:classes.subRow,children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"delete\",color:\"error\",onClick:function onClick(){return setOpenDelete(true);},children:/*#__PURE__*/_jsx(Delete,{})})})}),/*#__PURE__*/_jsxs(CardActionArea,{children:[/*#__PURE__*/_jsx(CardMedia,{image:item===null||item===void 0?void 0:item.image,className:classes.cardMedia}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"div\",{className:classes.row,children:/*#__PURE__*/_jsx(Typography,{pt:2,fontSize:16,color:\"black\",paddingLeft:1,textAlign:\"start\",fontWeight:\"bold\",children:(item===null||item===void 0?void 0:(_item$desc=item.desc)===null||_item$desc===void 0?void 0:_item$desc.length)>100?(item===null||item===void 0?void 0:(_item$desc2=item.desc)===null||_item$desc2===void 0?void 0:_item$desc2.substring(0,98))+\"...\":item===null||item===void 0?void 0:item.desc})})]})]})]});};var GalleryInfo=function GalleryInfo(){var _location$state2,_location$state3,_location$state4;var location=useLocation();var history=useHistory();var classes=useStyles();var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),open=_React$useState6[0],setOpen=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),items=_React$useState8[0],setItems=_React$useState8[1];React.useEffect(function(){var _location$state;onSnapshot(doc(db,\"gallery\",\"\"+(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.id)),function(doc){var _doc$data;// console.log(\"Current data: \", doc.data());\nsetItems((_doc$data=doc.data())===null||_doc$data===void 0?void 0:_doc$data.items);});},[items,location===null||location===void 0?void 0:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.id]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CustomDialog,{open:open,title:\"Add New Album Item\",handleClose:function handleClose(){return setOpen(false);},bodyComponent:/*#__PURE__*/_jsx(AddSubAlbumForm,{setOpen:setOpen,list:(location===null||location===void 0?void 0:(_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.items)||items,id:location===null||location===void 0?void 0:(_location$state4=location.state)===null||_location$state4===void 0?void 0:_location$state4.id})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.lhsRow,children:[/*#__PURE__*/_jsx(Button,{variant:\"text\",startIcon:/*#__PURE__*/_jsx(ArrowBackIos,{}),onClick:function onClick(){return history.goBack();},children:\"Back\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"blue\",fontSize:21,children:\"GALLERY ALBUM\"})]}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(Add,{}),color:\"primary\",variant:\"contained\",onClick:function onClick(){return setOpen(true);},children:\"Add Sub Album\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[items&&/*#__PURE__*/_jsx(Grid,{container:true,spacing:{xs:2,md:2},columns:{xs:4,sm:8,md:12},children:items===null||items===void 0?void 0:items.map(function(item,index){return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:6,children:/*#__PURE__*/_jsx(ItemCard,{item:item,index:index,list:items})},index);})}),(items===null||items===void 0?void 0:items.length)<1&&/*#__PURE__*/_jsx(\"div\",{className:classes.main,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"auto\"},children:[/*#__PURE__*/_jsx(CloudOffIcon,{fontSize:\"large\"}),/*#__PURE__*/_jsx(Typography,{children:\"No records found\"})]})})]})]});};export default GalleryInfo;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/resources/gallery_info.js"],"names":["Add","ArrowBackIos","Delete","Button","Card","CardActionArea","CardMedia","Divider","Grid","IconButton","Typography","React","useLocation","useHistory","CustomDialog","DeleteDialog","useSnackbar","makeStyles","CloudOffIcon","db","doc","deleteDoc","onSnapshot","AddSubAlbumForm","UpdateSubAlbumForm","useStyles","theme","root","height","width","row","display","flexDirection","justifyContent","alignItems","rowHeader","padding","main","flex","margin","minHeight","minWidth","cardMedia","subRow","lhsRow","avatar","column","ItemCard","props","item","index","list","classes","useState","open","setOpen","openDelete","setOpenDelete","enqueueSnackbar","deleteService","id","variant","console","log","deleteBody","marginRight","image","desc","length","substring","GalleryInfo","location","history","items","setItems","useEffect","state","data","goBack","xs","md","sm","map","marginTop"],"mappings":"6XAAA,OAASA,GAAT,CAAcC,YAAd,CAA4BC,MAA5B,KAA0C,qBAA1C,CACA,OACEC,MADF,CAEEC,IAFF,CAGEC,cAHF,CAIEC,SAJF,CAKEC,OALF,CAMEC,IANF,CAOEC,UAPF,CAQEC,UARF,KASO,eATP,CAUA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,kBAAxC,CACA,MAAOC,CAAAA,YAAP,KAAyB,8CAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8CAAzB,CACA,OAASC,WAAT,KAA4B,WAA5B,CACA,OAASC,UAAT,KAA2B,aAA3B,CAEA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,OAASC,EAAT,CAAaC,GAAb,CAAkBC,SAAlB,CAA6BC,UAA7B,KAA+C,8BAA/C,CACA,MAAOC,CAAAA,eAAP,KAA4B,yCAA5B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,4CAA/B,C,6IAEA,GAAMC,CAAAA,SAAS,CAAGR,UAAU,CAAC,SAACS,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,MAAM,CAAE,GADJ,CAEJC,KAAK,CAAE,MAFH,CADiC,CAKvCC,GAAG,CAAE,CACHC,OAAO,CAAE,MADN,CAEHC,aAAa,CAAE,KAFZ,CAGHC,cAAc,CAAE,eAHb,CAIHC,UAAU,CAAE,QAJT,CALkC,CAWvCC,SAAS,CAAE,CACTJ,OAAO,CAAE,MADA,CAETC,aAAa,CAAE,KAFN,CAGTC,cAAc,CAAE,eAHP,CAITC,UAAU,CAAE,QAJH,CAKTE,OAAO,CAAE,EALA,CAX4B,CAkBvCC,IAAI,CAAE,CACJN,OAAO,CAAE,MADL,CAEJO,IAAI,CAAE,CAFF,CAGJN,aAAa,CAAE,QAHX,CAIJO,MAAM,CAAE,MAJJ,CAKJC,SAAS,CAAE,GALP,CAMJC,QAAQ,CAAE,GANN,CAOJP,UAAU,CAAE,QAPR,CAlBiC,CA2BvCQ,SAAS,CAAE,CACTd,MAAM,CAAE,GADC,CAETC,KAAK,CAAE,MAFE,CA3B4B,CA+BvCc,MAAM,CAAE,CACNZ,OAAO,CAAE,MADH,CAENC,aAAa,CAAE,KAFT,CAGNC,cAAc,CAAE,KAHV,CAINC,UAAU,CAAE,QAJN,CA/B+B,CAqCvCU,MAAM,CAAE,CACNb,OAAO,CAAE,MADH,CAENC,aAAa,CAAE,KAFT,CAGNC,cAAc,CAAE,OAHV,CAINC,UAAU,CAAE,QAJN,CArC+B,CA2CvCW,MAAM,CAAE,CACNjB,MAAM,CAAE,EADF,CAENC,KAAK,CAAE,EAFD,CA3C+B,CA+CvCiB,MAAM,CAAE,CACNf,OAAO,CAAE,MADH,CAENC,aAAa,CAAE,QAFT,CAGNC,cAAc,CAAE,OAHV,CAINC,UAAU,CAAE,OAJN,CAKNE,OAAO,CAAE,CALH,CA/C+B,CAAZ,EAAD,CAA5B,CAwDA,GAAMW,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,4BAC1B,GAAQC,CAAAA,IAAR,CAA8BD,KAA9B,CAAQC,IAAR,CAAcC,KAAd,CAA8BF,KAA9B,CAAcE,KAAd,CAAqBC,IAArB,CAA8BH,KAA9B,CAAqBG,IAArB,CACA,GAAMC,CAAAA,OAAO,CAAG3B,SAAS,EAAzB,CACA,oBAAwBd,KAAK,CAAC0C,QAAN,CAAe,KAAf,CAAxB,oDAAOC,IAAP,qBAAaC,OAAb,qBACA,qBAAoC5C,KAAK,CAAC0C,QAAN,CAAe,KAAf,CAApC,qDAAOG,UAAP,qBAAmBC,aAAnB,qBACA,iBAA4BzC,WAAW,EAAvC,CAAQ0C,eAAR,cAAQA,eAAR,CAEA,GAAMC,CAAAA,aAAa,0FAAG,mIACpBF,aAAa,CAAC,KAAD,CAAb,CADoB,sCAGZpC,CAAAA,SAAS,CAACD,GAAG,CAACD,EAAD,CAAK,SAAL,CAAgB,IAAK8B,IAAL,SAAKA,IAAL,iBAAKA,IAAI,CAAEW,EAAX,CAAhB,CAAJ,CAHG,QAIlBF,eAAe,6BAA8B,CAC3CG,OAAO,CAAE,SADkC,CAA9B,CAAf,CAJkB,+EAQlBC,OAAO,CAACC,GAAR,CAAY,YAAZ,cACAL,eAAe,+BAAgC,CAC7CG,OAAO,CAAE,OADoC,CAAhC,CAAf,CATkB,oEAAH,kBAAbF,CAAAA,aAAa,0CAAnB,CAeA,GAAMK,CAAAA,UAAU,cACd,oCACE,KAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,YAAY,KAAxC,wDADF,cAIE,aAJF,cAKE,aAAK,SAAS,CAAEZ,OAAO,CAACT,MAAxB,wBACE,KAAC,MAAD,EACE,IAAI,CAAC,OADP,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAE,CAAEsB,WAAW,CAAE,CAAf,CAHT,CAIE,OAAO,CAAE,yBAAMR,CAAAA,aAAa,CAAC,KAAD,CAAnB,EAJX,oBADF,cAUE,KAAC,MAAD,EACE,IAAI,CAAC,OADP,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAC,OAHR,CAIE,OAAO,CAAEE,aAJX,oBAVF,GALF,GADF,CA4BA,mBACE,wCACE,KAAC,YAAD,EACE,IAAI,CAAEH,UADR,CAEE,KAAK,CAAC,sBAFR,CAGE,WAAW,CAAE,6BAAMC,CAAAA,aAAa,CAAC,KAAD,CAAnB,EAHf,CAIE,aAAa,CAAEO,UAJjB,EADF,cAOE,KAAC,YAAD,EACE,IAAI,CAAEV,IADR,CAEE,KAAK,CAAC,sBAFR,CAGE,WAAW,CAAE,6BAAMC,CAAAA,OAAO,CAAC,KAAD,CAAb,EAHf,CAIE,aAAa,cACX,KAAC,kBAAD,EAAoB,OAAO,CAAEA,OAA7B,CAAsC,EAAE,CAAEL,KAA1C,CAAiD,IAAI,CAAEC,IAAvD,EALJ,EAPF,cAeE,MAAC,IAAD,EAAM,SAAS,CAAE,CAAjB,CAAoB,SAAS,CAAEC,OAAO,CAACzB,IAAvC,wBACE,YAAK,SAAS,CAAEyB,OAAO,CAACjB,SAAxB,uBACE,YAAK,SAAS,CAAEiB,OAAO,CAACT,MAAxB,uBACE,KAAC,UAAD,EACE,aAAW,QADb,CAEE,KAAK,CAAC,OAFR,CAGE,OAAO,CAAE,yBAAMc,CAAAA,aAAa,CAAC,IAAD,CAAnB,EAHX,uBAKE,KAAC,MAAD,IALF,EADF,EADF,EADF,cAeE,MAAC,cAAD,yBACE,KAAC,SAAD,EAAW,KAAK,CAAER,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEiB,KAAxB,CAA+B,SAAS,CAAEd,OAAO,CAACV,SAAlD,EADF,cAEE,KAAC,OAAD,IAFF,cAGE,YAAK,SAAS,CAAEU,OAAO,CAACtB,GAAxB,uBACE,KAAC,UAAD,EACE,EAAE,CAAE,CADN,CAEE,QAAQ,CAAE,EAFZ,CAGE,KAAK,CAAC,OAHR,CAIE,WAAW,CAAE,CAJf,CAKE,SAAS,CAAC,OALZ,CAME,UAAU,CAAC,MANb,UAQG,CAAAmB,IAAI,OAAJ,EAAAA,IAAI,SAAJ,oBAAAA,IAAI,CAAEkB,IAAN,gDAAYC,MAAZ,EAAqB,GAArB,CACG,CAAAnB,IAAI,OAAJ,EAAAA,IAAI,SAAJ,qBAAAA,IAAI,CAAEkB,IAAN,kDAAYE,SAAZ,CAAsB,CAAtB,CAAyB,EAAzB,GAA+B,KADlC,CAEGpB,IAFH,SAEGA,IAFH,iBAEGA,IAAI,CAAEkB,IAVZ,EADF,EAHF,GAfF,GAfF,GADF,CAoDD,CAtGD,CAwGA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,wDACxB,GAAMC,CAAAA,QAAQ,CAAG3D,WAAW,EAA5B,CACA,GAAM4D,CAAAA,OAAO,CAAG3D,UAAU,EAA1B,CACA,GAAMuC,CAAAA,OAAO,CAAG3B,SAAS,EAAzB,CAEA,qBAAwBd,KAAK,CAAC0C,QAAN,CAAe,KAAf,CAAxB,qDAAOC,IAAP,qBAAaC,OAAb,qBACA,qBAA0B5C,KAAK,CAAC0C,QAAN,CAAe,EAAf,CAA1B,qDAAOoB,KAAP,qBAAcC,QAAd,qBAEA/D,KAAK,CAACgE,SAAN,CAAgB,UAAM,qBACpBrD,UAAU,CAACF,GAAG,CAACD,EAAD,CAAK,SAAL,CAAgB,IAAKoD,QAAL,SAAKA,QAAL,kCAAKA,QAAQ,CAAEK,KAAf,0CAAK,gBAAiBhB,EAAtB,CAAhB,CAAJ,CAA+C,SAACxC,GAAD,CAAS,eAChE;AACAsD,QAAQ,YAACtD,GAAG,CAACyD,IAAJ,EAAD,oCAAC,UAAYJ,KAAb,CAAR,CACD,CAHS,CAAV,CAID,CALD,CAKG,CAACA,KAAD,CAAQF,QAAR,SAAQA,QAAR,mCAAQA,QAAQ,CAAEK,KAAlB,2CAAQ,iBAAiBhB,EAAzB,CALH,EAOA,mBACE,oCACE,KAAC,YAAD,EACE,IAAI,CAAEN,IADR,CAEE,KAAK,CAAC,oBAFR,CAGE,WAAW,CAAE,6BAAMC,CAAAA,OAAO,CAAC,KAAD,CAAb,EAHf,CAIE,aAAa,cACX,KAAC,eAAD,EACE,OAAO,CAAEA,OADX,CAEE,IAAI,CAAE,CAAAgB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,0BAAAA,QAAQ,CAAEK,KAAV,4DAAiBH,KAAjB,GAA0BA,KAFlC,CAGE,EAAE,CAAEF,QAAF,SAAEA,QAAF,mCAAEA,QAAQ,CAAEK,KAAZ,2CAAE,iBAAiBhB,EAHvB,EALJ,EADF,cAaE,aAAK,SAAS,CAAER,OAAO,CAACtB,GAAxB,wBACE,aAAK,SAAS,CAAEsB,OAAO,CAACR,MAAxB,wBACE,KAAC,MAAD,EACE,OAAO,CAAC,MADV,CAEE,SAAS,cAAE,KAAC,YAAD,IAFb,CAGE,OAAO,CAAE,yBAAM4B,CAAAA,OAAO,CAACM,MAAR,EAAN,EAHX,kBADF,cAQE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAC,MAA/B,CAAsC,QAAQ,CAAE,EAAhD,2BARF,GADF,cAaE,KAAC,MAAD,EACE,SAAS,cAAE,KAAC,GAAD,IADb,CAEE,KAAK,CAAC,SAFR,CAGE,OAAO,CAAC,WAHV,CAIE,OAAO,CAAE,yBAAMvB,CAAAA,OAAO,CAAC,IAAD,CAAb,EAJX,2BAbF,GAbF,cAmCE,aAnCF,cAoCE,uBACGkB,KAAK,eACJ,KAAC,IAAD,EACE,SAAS,KADX,CAEE,OAAO,CAAE,CAAEM,EAAE,CAAE,CAAN,CAASC,EAAE,CAAE,CAAb,CAFX,CAGE,OAAO,CAAE,CAAED,EAAE,CAAE,CAAN,CAASE,EAAE,CAAE,CAAb,CAAgBD,EAAE,CAAE,EAApB,CAHX,UAKGP,KALH,SAKGA,KALH,iBAKGA,KAAK,CAAES,GAAP,CAAW,SAACjC,IAAD,CAAOC,KAAP,qBACV,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,CAA0B,EAAE,CAAE,CAA9B,uBACE,KAAC,QAAD,EAAU,IAAI,CAAED,IAAhB,CAAsB,KAAK,CAAEC,KAA7B,CAAoC,IAAI,CAAEuB,KAA1C,EADF,EAAsCvB,KAAtC,CADU,EAAX,CALH,EAFJ,CAcG,CAAAuB,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAEL,MAAP,EAAgB,CAAhB,eACC,YAAK,SAAS,CAAEhB,OAAO,CAACf,IAAxB,uBACE,aAAK,KAAK,CAAE,CAAE8C,SAAS,CAAE,MAAb,CAAZ,wBACE,KAAC,YAAD,EAAc,QAAQ,CAAC,OAAvB,EADF,cAEE,KAAC,UAAD,+BAFF,GADF,EAfJ,GApCF,GADF,CA8DD,CA7ED,CA+EA,cAAeb,CAAAA,WAAf","sourcesContent":["import { Add, ArrowBackIos, Delete } from \"@mui/icons-material\";\nimport {\n  Button,\n  Card,\n  CardActionArea,\n  CardMedia,\n  Divider,\n  Grid,\n  IconButton,\n  Typography,\n} from \"@mui/material\";\nimport React from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport CustomDialog from \"../../../../components/dialogs/custom-dialog\";\nimport DeleteDialog from \"../../../../components/dialogs/custom-dialog\";\nimport { useSnackbar } from \"notistack\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport CloudOffIcon from \"@mui/icons-material/CloudOff\";\nimport { db, doc, deleteDoc, onSnapshot } from \"../../../../../data/firebase\";\nimport AddSubAlbumForm from \"../../../../forms/gallery/add_sub_album\";\nimport UpdateSubAlbumForm from \"../../../../forms/gallery/update_sub_album\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: 286,\n    width: \"100%\",\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  rowHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 10,\n  },\n  main: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"column\",\n    margin: \"auto\",\n    minHeight: 275,\n    minWidth: 320,\n    alignItems: \"center\",\n  },\n  cardMedia: {\n    height: 156,\n    width: \"100%\",\n  },\n  subRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"end\",\n    alignItems: \"center\",\n  },\n  lhsRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"start\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    height: 36,\n    width: 36,\n  },\n  column: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"start\",\n    alignItems: \"start\",\n    padding: 4,\n  },\n}));\n\nconst ItemCard = (props) => {\n  const { item, index, list } = props;\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [openDelete, setOpenDelete] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const deleteService = async () => {\n    setOpenDelete(false);\n    try {\n      await deleteDoc(doc(db, \"gallery\", \"\" + item?.id));\n      enqueueSnackbar(`Item deleted successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      console.log(\"ERR: Del: \", error);\n      enqueueSnackbar(`Item not deleted. Try again`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  const deleteBody = (\n    <div>\n      <Typography variant=\"body2\" gutterBottom>\n        {`Are you sure you want to delete this item?`}\n      </Typography>\n      <br />\n      <div className={classes.subRow}>\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          style={{ marginRight: 4 }}\n          onClick={() => setOpenDelete(false)}\n        >\n          Cancel\n        </Button>\n\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          color=\"error\"\n          onClick={deleteService}\n        >\n          Delete\n        </Button>\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      <DeleteDialog\n        open={openDelete}\n        title=\"Delete Gallery Album\"\n        handleClose={() => setOpenDelete(false)}\n        bodyComponent={deleteBody}\n      />\n      <CustomDialog\n        open={open}\n        title=\"Update Gallery Items\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <UpdateSubAlbumForm setOpen={setOpen} id={index} list={list} />\n        }\n      />\n      <Card elevation={3} className={classes.root}>\n        <div className={classes.rowHeader}>\n          <div className={classes.subRow}>\n            <IconButton\n              aria-label=\"delete\"\n              color=\"error\"\n              onClick={() => setOpenDelete(true)}\n            >\n              <Delete />\n            </IconButton>\n          </div>\n          {/* <IconButton aria-label=\"edit\" onClick={() => setOpen(true)}>\n            <Edit />\n          </IconButton> */}\n        </div>\n        <CardActionArea>\n          <CardMedia image={item?.image} className={classes.cardMedia} />\n          <Divider />\n          <div className={classes.row}>\n            <Typography\n              pt={2}\n              fontSize={16}\n              color=\"black\"\n              paddingLeft={1}\n              textAlign=\"start\"\n              fontWeight=\"bold\"\n            >\n              {item?.desc?.length > 100\n                ? item?.desc?.substring(0, 98) + \"...\"\n                : item?.desc}\n            </Typography>\n          </div>\n        </CardActionArea>\n      </Card>\n    </>\n  );\n};\n\nconst GalleryInfo = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [open, setOpen] = React.useState(false);\n  const [items, setItems] = React.useState([]);\n\n  React.useEffect(() => {\n    onSnapshot(doc(db, \"gallery\", \"\" + location?.state?.id), (doc) => {\n      // console.log(\"Current data: \", doc.data());\n      setItems(doc.data()?.items);\n    });\n  }, [items, location?.state?.id]);\n\n  return (\n    <div>\n      <CustomDialog\n        open={open}\n        title=\"Add New Album Item\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <AddSubAlbumForm\n            setOpen={setOpen}\n            list={location?.state?.items || items}\n            id={location?.state?.id}\n          />\n        }\n      />\n      <div className={classes.row}>\n        <div className={classes.lhsRow}>\n          <Button\n            variant=\"text\"\n            startIcon={<ArrowBackIos />}\n            onClick={() => history.goBack()}\n          >\n            Back\n          </Button>\n          <Typography variant=\"h6\" color=\"blue\" fontSize={21}>\n            GALLERY ALBUM\n          </Typography>\n        </div>\n        <Button\n          startIcon={<Add />}\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={() => setOpen(true)}\n        >\n          Add Sub Album\n        </Button>\n      </div>\n      <br />\n      <div>\n        {items && (\n          <Grid\n            container\n            spacing={{ xs: 2, md: 2 }}\n            columns={{ xs: 4, sm: 8, md: 12 }}\n          >\n            {items?.map((item, index) => (\n              <Grid item xs={12} sm={6} md={6} key={index}>\n                <ItemCard item={item} index={index} list={items} />\n              </Grid>\n            ))}\n          </Grid>\n        )}\n        {items?.length < 1 && (\n          <div className={classes.main}>\n            <div style={{ marginTop: \"auto\" }}>\n              <CloudOffIcon fontSize=\"large\" />\n              <Typography>No records found</Typography>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GalleryInfo;\n"]},"metadata":{},"sourceType":"module"}