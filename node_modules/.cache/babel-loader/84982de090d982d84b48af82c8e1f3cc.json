{"ast":null,"code":"import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import Container from\"@mui/material/Container\";import Box from\"@mui/system/Box\";import Typography from\"@mui/material/Typography\";import IconButton from\"@mui/material/IconButton\";import Edit from\"@mui/icons-material/Edit\";import{Backdrop,Button,CircularProgress}from\"@mui/material\";import{ArrowBackIosNew}from\"@mui/icons-material\";import{useHistory}from\"react-router-dom\";import CustomDialog from\"../../../../components/dialogs/custom-dialog\";import{useSnackbar}from\"notistack\";import{updateDoc,db,doc}from\"../../../../../data/firebase/\";import{ValidatorForm}from\"react-material-ui-form-validator\";import RichText from\"../../../../components/misc/richtext\";import MUIRichTextEditor from\"mui-rte\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HealthCentres=function HealthCentres(){var history=useHistory();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _useSelector=useSelector(function(state){return state.healthcentre;}),data=_useSelector.data;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CustomDialog,{open:open,title:\"Update Health Centre Introduction\",handleClose:function handleClose(){return setOpen(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateBody,{body:data===null||data===void 0?void 0:data.introduction,setOpen:setOpen})}),/*#__PURE__*/_jsxs(Container,{sx:{py:4},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"start\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"text\",startIcon:/*#__PURE__*/_jsx(ArrowBackIosNew,{}),onClick:function onClick(){return history.goBack();},children:\"Back\"}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"h1\",children:\"Health Centre\"})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Introduction\"}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpen(true);},children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(MUIRichTextEditor,{readOnly:true,inlineToolbar:false,defaultValue:data===null||data===void 0?void 0:data.introduction,toolbar:false})]})]});};var UpdateBody=function UpdateBody(props){var body=props.body,setOpen=props.setOpen;var _React$useState3=React.useState(body),_React$useState4=_slicedToArray(_React$useState3,2),content=_React$useState4[0],setContent=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isError=_React$useState6[0],setError=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isLoading=_React$useState8[0],setLoading=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isStartedFilling=_React$useState10[0],setIsStartedFilling=_React$useState10[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var updateData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var timeNow,mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);timeNow=new Date();_context.prev=2;mRef=doc(db,\"about\",\"health-centres\");_context.next=6;return updateDoc(mRef,{introduction:content,updatedAt:timeNow});case 6:setOpen(false);setLoading(false);enqueueSnackbar(\"Introduction updated successfully\",{variant:\"success\"});_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setLoading(false);enqueueSnackbar(\"\".concat((_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function updateData(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateData,children:[/*#__PURE__*/_jsx(RichText,{value:content,setValue:setContent,error:isError,setError:setError,setIsStartedFilling:setIsStartedFilling}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update\"})]})]});};export default HealthCentres;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/about/health_centres.js"],"names":["React","Container","Box","Typography","IconButton","Edit","Backdrop","Button","CircularProgress","ArrowBackIosNew","useHistory","CustomDialog","useSnackbar","updateDoc","db","doc","ValidatorForm","RichText","MUIRichTextEditor","useSelector","HealthCentres","history","useState","open","setOpen","state","healthcentre","data","introduction","py","goBack","UpdateBody","props","body","content","setContent","isError","setError","isLoading","setLoading","isStartedFilling","setIsStartedFilling","enqueueSnackbar","updateData","e","timeNow","Date","mRef","updatedAt","variant","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Container from \"@mui/material/Container\";\nimport Box from \"@mui/system/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Edit from \"@mui/icons-material/Edit\";\nimport { Backdrop, Button, CircularProgress } from \"@mui/material\";\nimport { ArrowBackIosNew } from \"@mui/icons-material\";\nimport { useHistory } from \"react-router-dom\";\nimport CustomDialog from \"../../../../components/dialogs/custom-dialog\";\nimport { useSnackbar } from \"notistack\";\nimport { updateDoc, db, doc } from \"../../../../../data/firebase/\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport RichText from \"../../../../components/misc/richtext\";\nimport MUIRichTextEditor from \"mui-rte\";\nimport { useSelector } from \"react-redux\";\n\nconst HealthCentres = () => {\n  const history = useHistory();\n  const [open, setOpen] = React.useState(false);\n\n  const { data } = useSelector((state) => state.healthcentre);\n\n  return (\n    <div>\n      <CustomDialog\n        open={open}\n        title=\"Update Health Centre Introduction\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <UpdateBody body={data?.introduction} setOpen={setOpen} />\n        }\n      />\n      <Container sx={{ py: 4 }}>\n        <Box\n          display={\"flex\"}\n          flexDirection=\"row\"\n          justifyContent=\"start\"\n          alignItems={\"center\"}\n        >\n          <Button\n            variant=\"text\"\n            startIcon={<ArrowBackIosNew />}\n            onClick={() => history.goBack()}\n          >\n            Back\n          </Button>\n          <Typography gutterBottom variant=\"h5\" component={\"h1\"}>\n            Health Centre\n          </Typography>\n        </Box>\n        <Box\n          display={\"flex\"}\n          flexDirection=\"row\"\n          justifyContent=\"space-between\"\n          alignItems={\"center\"}\n        >\n          <Typography variant=\"h6\">Introduction</Typography>\n          <IconButton onClick={() => setOpen(true)}>\n            <Edit />\n          </IconButton>\n        </Box>\n        <MUIRichTextEditor\n          readOnly\n          inlineToolbar={false}\n          defaultValue={data?.introduction}\n          toolbar={false}\n        />\n      </Container>\n    </div>\n  );\n};\n\nconst UpdateBody = (props) => {\n  let { body, setOpen } = props;\n  const [content, setContent] = React.useState(body);\n  const [isError, setError] = React.useState(false);\n  const [isLoading, setLoading] = React.useState(false);\n  const [isStartedFilling, setIsStartedFilling] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateData = async (e) => {\n    setLoading(true);\n\n    const timeNow = new Date();\n    try {\n      const mRef = doc(db, \"about\", \"health-centres\");\n      await updateDoc(mRef, {\n        introduction: content,\n        updatedAt: timeNow,\n      });\n      setOpen(false);\n      setLoading(false);\n      enqueueSnackbar(`Introduction updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet connection\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateData}>\n        <RichText\n          value={content}\n          setValue={setContent}\n          error={isError}\n          setError={setError}\n          setIsStartedFilling={setIsStartedFilling}\n        />\n        <br />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default HealthCentres;\n"]},"metadata":{},"sourceType":"module"}