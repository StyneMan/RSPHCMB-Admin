{"ast":null,"code":"import _toConsumableArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import Avatar from\"@mui/material/Avatar\";import{makeStyles}from\"@mui/styles\";import Button from\"@mui/material/Button\";import{db,ref,setDoc,doc,updateDoc}from\"../../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{CircularProgress}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{image:{margin:\"0px auto 15px auto\",width:128,height:128}};});var NewCommitteeForm=function NewCommitteeForm(props){var classes=useStyles();var setOpen=props.setOpen,id=props.id,list=props.list;var _React$useState=React.useState({name:\"\",designation:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),comms=_React$useState6[0],setComms=_React$useState6[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;React.useEffect(function(){if(list){console.log(\"SJHS: \".concat(list));setComms(list);setIsLoading(false);}},[]);var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var addRecord=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _list;var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// const timeNow = new Date();\nsetIsLoading(true);list=Object.assign([],list);(_list=list)===null||_list===void 0?void 0:_list.push({name:formValues.name,designation:formValues.designation});mRef=doc(db,\"lgas\",\"\"+id);// console.log(`GYS: ${list?.length}`);\n// list?.forEach((element) => {\n//   console.log(\"ELEM\", element);\n// });\n_context.prev=4;_context.next=7;return updateDoc(mRef,{committees:_toConsumableArray(list)});case 7:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Committee added successfully\",{variant:\"success\"});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);setIsLoading(false);enqueueSnackbar(\"\".concat((_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)||\"Check your internet!\"),{variant:\"error\"});case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,12]]);}));return function addRecord(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:addRecord,children:[/*#__PURE__*/_jsx(TextValidator,{label:\"Name\",size:\"small\",variant:\"outlined\",value:formValues.name,onChange:handleChange,name:\"name\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Name is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextValidator,{label:\"Designation\",size:\"small\",variant:\"outlined\",value:formValues.designation,onChange:handleChange,name:\"designation\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Designation is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Save\"})]})]});};export default NewCommitteeForm;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/lga/committee/add_committee.js"],"names":["React","ValidatorForm","TextValidator","Avatar","makeStyles","Button","db","ref","setDoc","doc","updateDoc","useSnackbar","Backdrop","CircularProgress","useStyles","theme","image","margin","width","height","NewCommitteeForm","props","classes","setOpen","id","list","useState","name","designation","formValues","setFormValues","isLoading","setIsLoading","comms","setComms","enqueueSnackbar","useEffect","console","log","handleChange","e","target","value","prevData","addRecord","Object","assign","push","mRef","committees","variant","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport Avatar from \"@mui/material/Avatar\";\nimport { makeStyles } from \"@mui/styles\";\nimport Button from \"@mui/material/Button\";\nimport { db, ref, setDoc, doc, updateDoc } from \"../../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { CircularProgress } from \"@mui/material\";\n\nconst useStyles = makeStyles((theme) => ({\n  image: {\n    margin: \"0px auto 15px auto\",\n    width: 128,\n    height: 128,\n  },\n}));\n\nconst NewCommitteeForm = (props) => {\n  const classes = useStyles();\n  let { setOpen, id, list } = props;\n  const [formValues, setFormValues] = React.useState({\n    name: \"\",\n    designation: \"\",\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [comms, setComms] = React.useState([]);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    if (list) {\n      console.log(`SJHS: ${list}`);\n      setComms(list);\n\n      setIsLoading(false);\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const addRecord = async (e) => {\n    // const timeNow = new Date();\n    setIsLoading(true);\n    list = Object.assign([], list);\n    list?.push({\n      name: formValues.name,\n      designation: formValues.designation,\n    });\n    const mRef = doc(db, \"lgas\", \"\" + id);\n\n    // console.log(`GYS: ${list?.length}`);\n    // list?.forEach((element) => {\n    //   console.log(\"ELEM\", element);\n    // });\n\n    try {\n      await updateDoc(mRef, {\n        committees: [...list],\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Committee added successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet!\"}`, {\n        variant: \"error\",\n      });\n    }\n\n    // setDoc(doc(db, \"lgas/\", `${id}`), {\n    //   committees: {\n    //     name: formValues.name,\n    //     designation: formValues.designation,\n    //   },\n    // })\n    //   .then((res) => {\n    //     setOpen(false);\n    //     setIsLoading(false);\n    //     enqueueSnackbar(`New committee record added successfully`, {\n    //       variant: \"success\",\n    //     });\n    //   })\n    //   .catch((error) => {\n    //     setIsLoading(false);\n    //   });\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={addRecord}>\n        <TextValidator\n          label=\"Name\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.name}\n          onChange={handleChange}\n          name=\"name\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Name is required\"]}\n        />\n        <br />\n\n        <TextValidator\n          label=\"Designation\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.designation}\n          onChange={handleChange}\n          name=\"designation\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Designation is required\"]}\n        />\n        <br />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Save\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default NewCommitteeForm;\n"]},"metadata":{},"sourceType":"module"}