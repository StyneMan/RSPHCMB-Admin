{"ast":null,"code":"import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import Button from\"@mui/material/Button\";import{db,doc,setDoc}from\"../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{CircularProgress}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddDeptFunctionForm=function AddDeptFunctionForm(props){var setOpen=props.setOpen,deptId=props.deptId;var _React$useState=React.useState({text:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var addRecord=function addRecord(e){var timeNow=new Date();setIsLoading(true);setDoc(doc(db,\"dept-functions\",\"\".concat(timeNow.getTime())),{id:timeNow.getTime(),department:deptId,function:formValues.text}).then(function(resp){setOpen(false);setIsLoading(false);enqueueSnackbar(\"Department function added successfully\",{variant:\"success\"});}).catch(function(error){setIsLoading(false);enqueueSnackbar(\"\".concat((error===null||error===void 0?void 0:error.message)||\"Check your internet!\"),{variant:\"error\"});});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:addRecord,children:[/*#__PURE__*/_jsx(TextValidator,{label:\"Function\",size:\"small\",variant:\"outlined\",value:formValues.text,onChange:handleChange,name:\"text\",fullWidth:true,required:true,placeholder:\"Add new function\",validators:[\"required\"],errorMessages:[\"Function is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Save\"})]})]});};export default AddDeptFunctionForm;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/department/add_dept_function.js"],"names":["React","ValidatorForm","TextValidator","Button","db","doc","setDoc","useSnackbar","Backdrop","CircularProgress","AddDeptFunctionForm","props","setOpen","deptId","useState","text","formValues","setFormValues","isLoading","setIsLoading","enqueueSnackbar","handleChange","e","target","name","value","prevData","addRecord","timeNow","Date","getTime","id","department","function","then","resp","variant","catch","error","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport Button from \"@mui/material/Button\";\nimport { db, doc, setDoc } from \"../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { CircularProgress } from \"@mui/material\";\n\nconst AddDeptFunctionForm = (props) => {\n  let { setOpen, deptId } = props;\n  const [formValues, setFormValues] = React.useState({\n    text: \"\",\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const addRecord = (e) => {\n    const timeNow = new Date();\n    setIsLoading(true);\n    setDoc(doc(db, \"dept-functions\", `${timeNow.getTime()}`), {\n      id: timeNow.getTime(),\n      department: deptId,\n      function: formValues.text,\n    })\n      .then((resp) => {\n        setOpen(false);\n        setIsLoading(false);\n        enqueueSnackbar(`Department function added successfully`, {\n          variant: \"success\",\n        });\n      })\n      .catch((error) => {\n        setIsLoading(false);\n        enqueueSnackbar(`${error?.message || \"Check your internet!\"}`, {\n          variant: \"error\",\n        });\n      });\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={addRecord}>\n        <TextValidator\n          label=\"Function\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.text}\n          onChange={handleChange}\n          name=\"text\"\n          fullWidth\n          required\n          placeholder=\"Add new function\"\n          validators={[\"required\"]}\n          errorMessages={[\"Function is required\"]}\n        />\n        <br />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Save\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default AddDeptFunctionForm;\n"]},"metadata":{},"sourceType":"module"}