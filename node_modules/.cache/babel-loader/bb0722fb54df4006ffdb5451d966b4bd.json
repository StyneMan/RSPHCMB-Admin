{"ast":null,"code":"import _toConsumableArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import Button from\"@mui/material/Button\";import{db,doc,updateDoc}from\"../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{CircularProgress}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddFunctionForm=function AddFunctionForm(props){var setOpen=props.setOpen,id=props.id,list=props.list;var _React$useState=React.useState({text:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};React.useEffect(function(){console.log(\"LIST:::\",list);},[]);var addRecord=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _list;var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// const timeNow = new Date();\nsetIsLoading(true);list=Object.assign([],list);(_list=list)===null||_list===void 0?void 0:_list.push({text:formValues.text});mRef=doc(db,\"departments\",\"\"+id);_context.prev=4;_context.next=7;return updateDoc(mRef,{functions:_toConsumableArray(list)});case 7:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Department function added successfully\",{variant:\"success\"});_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);setIsLoading(false);enqueueSnackbar(\"\".concat((_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)||\"Check your internet!\"),{variant:\"error\"});case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,12]]);}));return function addRecord(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:addRecord,children:[/*#__PURE__*/_jsx(TextValidator,{label:\"Text\",size:\"small\",variant:\"outlined\",value:formValues.text,onChange:handleChange,name:\"text\",fullWidth:true,required:true,validators:[\"required\"],errorMessages:[\"Text is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Save\"})]})]});};export default AddFunctionForm;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/department/add_function.js"],"names":["React","ValidatorForm","TextValidator","Button","db","doc","updateDoc","useSnackbar","Backdrop","CircularProgress","AddFunctionForm","props","setOpen","id","list","useState","text","formValues","setFormValues","isLoading","setIsLoading","enqueueSnackbar","handleChange","e","target","name","value","prevData","useEffect","console","log","addRecord","Object","assign","push","mRef","functions","variant","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport Button from \"@mui/material/Button\";\nimport { db, doc, updateDoc } from \"../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { CircularProgress } from \"@mui/material\";\n\nconst AddFunctionForm = (props) => {\n  let { setOpen, id, list } = props;\n  const [formValues, setFormValues] = React.useState({\n    text: \"\",\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  React.useEffect(() => {\n    console.log(\"LIST:::\", list);\n  }, []);\n\n  const addRecord = async (e) => {\n    // const timeNow = new Date();\n    setIsLoading(true);\n    list = Object.assign([], list);\n    list?.push({\n      text: formValues.text,\n    });\n    const mRef = doc(db, \"departments\", \"\" + id);\n\n    try {\n      await updateDoc(mRef, {\n        functions: [...list],\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Department function added successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet!\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={addRecord}>\n        <TextValidator\n          label=\"Text\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.text}\n          onChange={handleChange}\n          name=\"text\"\n          fullWidth\n          required\n          validators={[\"required\"]}\n          errorMessages={[\"Text is required\"]}\n        />\n        <br />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Save\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default AddFunctionForm;\n"]},"metadata":{},"sourceType":"module"}