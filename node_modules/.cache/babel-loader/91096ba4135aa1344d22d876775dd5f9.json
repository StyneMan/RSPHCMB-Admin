{"ast":null,"code":"import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import Avatar from\"@mui/material/Avatar\";import{makeStyles}from\"@mui/styles\";import Button from\"@mui/material/Button\";import{db,ref,storage,setDoc,doc,uploadBytesResumable,getDownloadURL}from\"../../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{Box}from\"@mui/system\";import{CircularProgress,Grid}from\"@mui/material\";import{Typography}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{image:{margin:\"0px auto 15px auto\",width:128,height:128}};});var CircularProgressWithLabel=function CircularProgressWithLabel(props){return/*#__PURE__*/_jsxs(Box,{position:\"relative\",display:\"inline-flex\",children:[/*#__PURE__*/_jsx(CircularProgress,_objectSpread(_objectSpread({variant:\"determinate\"},props),{},{size:90,thickness:3.0,style:{color:\"green\"}})),/*#__PURE__*/_jsx(Box,{top:0,left:0,bottom:0,right:0,position:\"absolute\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"div\",style:{color:\"white\",fontFamily:\"roboto\"},children:\"\".concat(Math.round(props.value),\"%\")})})]});};var NewBannerForm=function NewBannerForm(props){var classes=useStyles();var setOpen=props.setOpen;var _React$useState=React.useState({title:\"\",description:\"\",image:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),file=_React$useState4[0],setFile=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isUploading=_React$useState6[0],setIsUploading=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isLoading=_React$useState8[0],setIsLoading=_React$useState8[1];var _React$useState9=React.useState(0),_React$useState10=_slicedToArray(_React$useState9,2),progress=_React$useState10[0],setProgress=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),previewPassport=_React$useState12[0],setPreviewPassport=_React$useState12[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,name=_e$target.name,value=_e$target.value;if(id===\"image\"){setFile(e.target.files[0]);setPreviewPassport(URL.createObjectURL(e.target.files[0]));setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{image:e.target.value});});}else{setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});}};var createBanner=function createBanner(e){setIsUploading(true);var timeNow=new Date();//First upload image to firebase storage then save to firestore\nvar storageRef=ref(storage,\"home-banner/\"+timeNow.getTime());var uploadTask=uploadBytesResumable(storageRef,file);uploadTask.on(\"state_changed\",function(snapshot){var uprogress=snapshot.bytesTransferred/snapshot.totalBytes*100;// console.log(\"Upload is \" + progress + \"% done\");\nsetProgress(uprogress);},function(error){// Handle unsuccessful uploads\nsetIsUploading(false);console.log(error);enqueueSnackbar(\"\".concat(error===null||error===void 0?void 0:error.message),{variant:\"error\"});},function(){setIsUploading(false);setIsLoading(true);getDownloadURL(uploadTask.snapshot.ref).then(function(downloadURL){setDoc(doc(db,\"home-banner\",\"\".concat(timeNow.getTime())),{id:timeNow.getTime(),title:formValues.title,image:downloadURL,description:formValues.description}).then(function(res){setOpen(false);setIsLoading(false);enqueueSnackbar(\"New banner added successfully\",{variant:\"success\"});}).catch(function(error){setIsLoading(false);});});});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Backdrop,{style:{zIndex:1200},open:isUploading||isLoading,children:[isUploading?/*#__PURE__*/_jsx(CircularProgressWithLabel,{value:progress}):/*#__PURE__*/_jsx(\"div\",{}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:createBanner,children:[/*#__PURE__*/_jsx(TextValidator,{id:\"title\",label:\"Banner title\",size:\"small\",variant:\"outlined\",value:formValues.title,onChange:handleChange,name:\"title\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Title of slide is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:6,children:/*#__PURE__*/_jsx(TextValidator,{id:\"image\",size:\"small\",variant:\"outlined\",value:formValues.image,name:\"image\",type:\"file\",fullWidth:true,disabled:isLoading,accept:\".png, .jpg, .jpeg,\",onChange:handleChange,validators:[\"required\"],errorMessages:[\"Featured image is required\"],helperText:\"Upload featured image\"})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:6,children:/*#__PURE__*/_jsx(\"div\",{children:previewPassport&&/*#__PURE__*/_jsx(Avatar,{variant:\"rounded\",alt:\"Passport\",src:previewPassport,className:classes.image})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextValidator,{className:classes.mb,id:\"description\",multiLine:true,rows:2,rowsMax:3,label:\"Banner description\",placeholder:\"Type description here...\",size:\"small\",variant:\"outlined\",value:formValues.description,onChange:handleChange,name:\"description\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Banner description is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading||isUploading,fullWidth:true,children:\"Save\"})]})]});};export default NewBannerForm;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/home/banner/add_banner.js"],"names":["React","ValidatorForm","TextValidator","Avatar","makeStyles","Button","db","ref","storage","setDoc","doc","uploadBytesResumable","getDownloadURL","useSnackbar","Backdrop","Box","CircularProgress","Grid","Typography","useStyles","theme","image","margin","width","height","CircularProgressWithLabel","props","color","fontFamily","Math","round","value","NewBannerForm","classes","setOpen","useState","title","description","formValues","setFormValues","file","setFile","isUploading","setIsUploading","isLoading","setIsLoading","progress","setProgress","previewPassport","setPreviewPassport","enqueueSnackbar","handleChange","e","target","id","name","files","URL","createObjectURL","prevData","createBanner","timeNow","Date","storageRef","getTime","uploadTask","on","snapshot","uprogress","bytesTransferred","totalBytes","error","console","log","message","variant","then","downloadURL","res","catch","zIndex","mb"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport Avatar from \"@mui/material/Avatar\";\nimport { makeStyles } from \"@mui/styles\";\nimport Button from \"@mui/material/Button\";\nimport {\n  db,\n  ref,\n  storage,\n  setDoc,\n  doc,\n  uploadBytesResumable,\n  getDownloadURL,\n} from \"../../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { Box } from \"@mui/system\";\nimport { CircularProgress, Grid } from \"@mui/material\";\nimport { Typography } from \"@mui/material\";\n\nconst useStyles = makeStyles((theme) => ({\n  image: {\n    margin: \"0px auto 15px auto\",\n    width: 128,\n    height: 128,\n  },\n}));\n\nconst CircularProgressWithLabel = (props) => {\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress\n        variant=\"determinate\"\n        {...props}\n        size={90}\n        thickness={3.0}\n        style={{ color: \"green\" }}\n      />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography\n          variant=\"body1\"\n          component=\"div\"\n          style={{ color: \"white\", fontFamily: \"roboto\" }}\n        >{`${Math.round(props.value)}%`}</Typography>\n      </Box>\n    </Box>\n  );\n};\n\nconst NewBannerForm = (props) => {\n  const classes = useStyles();\n  let { setOpen } = props;\n  const [formValues, setFormValues] = React.useState({\n    title: \"\",\n    description: \"\",\n    image: \"\",\n  });\n  const [file, setFile] = React.useState(null);\n  const [isUploading, setIsUploading] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const [previewPassport, setPreviewPassport] = React.useState(\"\");\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { id, name, value } = e.target;\n\n    if (id === \"image\") {\n      setFile(e.target.files[0]);\n      setPreviewPassport(URL.createObjectURL(e.target.files[0]));\n      setFormValues((prevData) => ({\n        ...prevData,\n        image: e.target.value,\n      }));\n    } else {\n      setFormValues((prevData) => ({ ...prevData, [name]: value }));\n    }\n  };\n\n  const createBanner = (e) => {\n    setIsUploading(true);\n    const timeNow = new Date();\n    //First upload image to firebase storage then save to firestore\n    const storageRef = ref(storage, \"home-banner/\" + timeNow.getTime());\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const uprogress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        // console.log(\"Upload is \" + progress + \"% done\");\n        setProgress(uprogress);\n      },\n      (error) => {\n        // Handle unsuccessful uploads\n        setIsUploading(false);\n        console.log(error);\n        enqueueSnackbar(`${error?.message}`, { variant: \"error\" });\n      },\n      () => {\n        setIsUploading(false);\n        setIsLoading(true);\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n          setDoc(doc(db, \"home-banner\", `${timeNow.getTime()}`), {\n            id: timeNow.getTime(),\n            title: formValues.title,\n            image: downloadURL,\n            description: formValues.description,\n          })\n            .then((res) => {\n              setOpen(false);\n              setIsLoading(false);\n              enqueueSnackbar(`New banner added successfully`, {\n                variant: \"success\",\n              });\n            })\n            .catch((error) => {\n              setIsLoading(false);\n            });\n        });\n      }\n    );\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isUploading || isLoading}>\n        {isUploading ? <CircularProgressWithLabel value={progress} /> : <div />}\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={createBanner}>\n        <TextValidator\n          id=\"title\"\n          label=\"Banner title\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.title}\n          onChange={handleChange}\n          name=\"title\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Title of slide is required\"]}\n        />\n        <br />\n        <Grid container spacing={2}>\n          <Grid item sm={6} md={6}>\n            <TextValidator\n              id=\"image\"\n              size=\"small\"\n              variant=\"outlined\"\n              value={formValues.image}\n              name=\"image\"\n              type=\"file\"\n              fullWidth\n              disabled={isLoading}\n              accept=\".png, .jpg, .jpeg,\"\n              onChange={handleChange}\n              validators={[\"required\"]}\n              errorMessages={[\"Featured image is required\"]}\n              helperText=\"Upload featured image\"\n            />\n          </Grid>\n          <Grid item sm={6} md={6}>\n            <div>\n              {previewPassport && (\n                <Avatar\n                  variant=\"rounded\"\n                  alt=\"Passport\"\n                  src={previewPassport}\n                  className={classes.image}\n                />\n              )}\n            </div>\n          </Grid>\n        </Grid>\n        <br />\n\n        <TextValidator\n          className={classes.mb}\n          id=\"description\"\n          multiLine\n          rows={2}\n          rowsMax={3}\n          label=\"Banner description\"\n          placeholder=\"Type description here...\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.description}\n          onChange={handleChange}\n          name=\"description\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Banner description is required\"]}\n        />\n        <br />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading || isUploading}\n          fullWidth\n        >\n          Save\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default NewBannerForm;\n"]},"metadata":{},"sourceType":"module"}