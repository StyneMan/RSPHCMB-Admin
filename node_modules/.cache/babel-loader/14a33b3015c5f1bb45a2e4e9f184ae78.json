{"ast":null,"code":"import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{Menu,MenuItem,IconButton,ListItemText,Fade,Backdrop,CircularProgress,Button,Typography}from\"@mui/material\";import{useSnackbar}from\"notistack\";import MoreVertIcon from\"@mui/icons-material/MoreVert\";import CustomDialogEdit from\"../dialogs/custom-dialog\";import CustomDialogDelete from\"../dialogs/custom-dialog\";import{ValidatorForm}from\"react-material-ui-form-validator\";import{TextValidator}from\"react-material-ui-form-validator\";import{Box}from\"@mui/system\";import{doc,updateDoc,db}from\"../../../data/firebase\";//Committee Action Button\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ActionButton=function ActionButton(_ref){var selected=_ref.selected,list=_ref.list,index=_ref.index,lgaID=_ref.lgaID;// const classes = useStyles();\nvar _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),openUpdate=_React$useState4[0],setOpenUpdate=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),openDelete=_React$useState6[0],setOpenDelete=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,1),setLoading=_React$useState8[0];var openAction=Boolean(anchorEl);var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;//   const { notifications, userData } = useSelector((state) => state.user);\nvar handleMoreAction=function handleMoreAction(e){return setAnchorEl(e.currentTarget);};var handleCloseMoreAction=function handleCloseMoreAction(){return setAnchorEl(null);};var updateRow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(index){var mRef,arrCopy;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);mRef=doc(db,\"lgas\",\"\"+lgaID);arrCopy=list;arrCopy.forEach(function(el,key){if(key===index){//Update here\n}});_context.prev=4;_context.next=7;return updateDoc(mRef,{committees:list===null||list===void 0?void 0:list.filter(function(el,key){return key!==index;})});case 7:setLoading(false);enqueueSnackbar(\"Row deleted successfully\",{variant:\"success\"});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);// setIsLoading(false);\nenqueueSnackbar(\"\".concat((_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 14:case\"end\":return _context.stop();}}},_callee,null,[[4,11]]);}));return function updateRow(_x){return _ref2.apply(this,arguments);};}();// const { data: scholarData } = useSWR('/applicants/scholars/' + selected.row._id, APIService.authFetcher);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"actions\",\"aria-controls\":\"fade-menu\",\"aria-haspopup\":\"true\",onClick:handleMoreAction,children:/*#__PURE__*/_jsx(MoreVertIcon,{})}),/*#__PURE__*/_jsxs(Menu,{id:\"fade-menu\",anchorEl:anchorEl,keepMounted:true,open:openAction,onClose:handleCloseMoreAction,TransitionComponent:Fade,elevation:1,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){return setOpenUpdate(true);},children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Edit\"})}),/*#__PURE__*/_jsx(CustomDialogEdit,{title:\"Update \"+(selected===null||selected===void 0?void 0:selected.name)+\"'s data \",bodyComponent:/*#__PURE__*/_jsx(UpdateView,{setOpen:setOpenUpdate,name:selected===null||selected===void 0?void 0:selected.name,designation:selected===null||selected===void 0?void 0:selected.designation}),open:openUpdate,handleClose:function handleClose(){return setOpenUpdate(false);}}),/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){return setOpenDelete(true);},children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Delete\"})}),/*#__PURE__*/_jsx(CustomDialogDelete,{title:\"Delete \"+(selected===null||selected===void 0?void 0:selected.name)+\"'s data \",bodyComponent:/*#__PURE__*/_jsx(DeleteView,{setOpen:setOpenDelete,name:selected===null||selected===void 0?void 0:selected.name,id:index,lgaID:lgaID,list:list,index:index}),open:openDelete,handleClose:function handleClose(){return setOpenDelete(false);}})]})]});};var UpdateView=function UpdateView(props){var setOpen=props.setOpen,name=props.name,designation=props.designation;var _React$useState9=React.useState({name:name,designation:designation}),_React$useState10=_slicedToArray(_React$useState9,2),formValues=_React$useState10[0],setFormValues=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isLoading=_React$useState12[0],setIsLoading=_React$useState12[1];var _useSnackbar2=useSnackbar(),enqueueSnackbar=_useSnackbar2.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var submit=function submit(e){setIsLoading(true);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:submit,children:[/*#__PURE__*/_jsx(TextValidator,{name:\"name\",fullWidth:true,placeholder:\"Name\",label:\"Name\",size:\"small\",variant:\"outlined\",value:formValues.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextValidator,{name:\"designation\",fullWidth:true,placeholder:\"Designation\",label:\"Designation\",size:\"small\",variant:\"outlined\",value:formValues.designation,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",type:\"submit\",fullWidth:true,children:\"Update\"})]})]});};var DeleteView=function DeleteView(props){var list=props.list,lgaID=props.lgaID,name=props.name,index=props.index,id=props.id,setOpen=props.setOpen;var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),isLoading=_React$useState14[0],setLoading=_React$useState14[1];var _useSnackbar3=useSnackbar(),enqueueSnackbar=_useSnackbar3.enqueueSnackbar;var deleteRow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var mRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);mRef=doc(db,\"lgas\",\"\"+lgaID);_context2.prev=2;_context2.next=5;return updateDoc(mRef,{committees:list===null||list===void 0?void 0:list.filter(function(el,key){return key!==index;})});case 5:setLoading(false);setOpen(false);enqueueSnackbar(\"Row deleted successfully\",{variant:\"success\"});_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);// setIsLoading(false);\nenqueueSnackbar(\"\".concat((_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function deleteRow(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,children:[\"Are you sure you want to delete \",name,\" from table?\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"end\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",sx:{textTransform:\"none\",mx:2},onClick:function onClick(){return setOpen(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{textTransform:\"none\"},onClick:deleteRow,children:\"Delete\"})]})]});};export default ActionButton;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/components/button/action_button.js"],"names":["React","Menu","MenuItem","IconButton","ListItemText","Fade","Backdrop","CircularProgress","Button","Typography","useSnackbar","MoreVertIcon","CustomDialogEdit","CustomDialogDelete","ValidatorForm","TextValidator","Box","doc","updateDoc","db","ActionButton","selected","list","index","lgaID","useState","anchorEl","setAnchorEl","openUpdate","setOpenUpdate","openDelete","setOpenDelete","setLoading","openAction","Boolean","enqueueSnackbar","handleMoreAction","e","currentTarget","handleCloseMoreAction","updateRow","mRef","arrCopy","forEach","el","key","committees","filter","variant","message","name","designation","UpdateView","props","setOpen","formValues","setFormValues","isLoading","setIsLoading","handleChange","target","value","prevData","submit","zIndex","color","DeleteView","id","deleteRow","textTransform","mx"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Menu,\n  MenuItem,\n  IconButton,\n  ListItemText,\n  Fade,\n  Backdrop,\n  CircularProgress,\n  Button,\n  Typography,\n} from \"@mui/material\";\nimport { useSnackbar } from \"notistack\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport CustomDialogEdit from \"../dialogs/custom-dialog\";\nimport CustomDialogDelete from \"../dialogs/custom-dialog\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport { TextValidator } from \"react-material-ui-form-validator\";\nimport { Box } from \"@mui/system\";\nimport { doc, updateDoc, db } from \"../../../data/firebase\";\n\n//Committee Action Button\nconst ActionButton = ({ selected, list, index, lgaID }) => {\n  // const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [openUpdate, setOpenUpdate] = React.useState(false);\n  const [openDelete, setOpenDelete] = React.useState(false);\n\n  const [setLoading] = React.useState(false);\n\n  const openAction = Boolean(anchorEl);\n  const { enqueueSnackbar } = useSnackbar();\n  //   const { notifications, userData } = useSelector((state) => state.user);\n  const handleMoreAction = (e) => setAnchorEl(e.currentTarget);\n  const handleCloseMoreAction = () => setAnchorEl(null);\n\n  const updateRow = async (index) => {\n    setLoading(true);\n    const mRef = doc(db, \"lgas\", \"\" + lgaID);\n\n    let arrCopy = list;\n    arrCopy.forEach((el, key) => {\n      if (key === index) {\n        //Update here\n      }\n    });\n\n    try {\n      await updateDoc(mRef, {\n        committees: list?.filter((el, key) => key !== index),\n      });\n      setLoading(false);\n      enqueueSnackbar(`Row deleted successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      // setIsLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet connection\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  // const { data: scholarData } = useSWR('/applicants/scholars/' + selected.row._id, APIService.authFetcher);\n\n  return (\n    <>\n      <IconButton\n        aria-label=\"actions\"\n        aria-controls=\"fade-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleMoreAction}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"fade-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={openAction}\n        onClose={handleCloseMoreAction}\n        TransitionComponent={Fade}\n        elevation={1}\n      >\n        <MenuItem onClick={() => setOpenUpdate(true)}>\n          <ListItemText primary=\"Edit\" />\n        </MenuItem>\n        <CustomDialogEdit\n          title={\"Update \" + selected?.name + \"'s data \"}\n          bodyComponent={\n            <UpdateView\n              setOpen={setOpenUpdate}\n              name={selected?.name}\n              designation={selected?.designation}\n            />\n          }\n          open={openUpdate}\n          handleClose={() => setOpenUpdate(false)}\n        />\n        <MenuItem onClick={() => setOpenDelete(true)}>\n          <ListItemText primary=\"Delete\" />\n        </MenuItem>\n        <CustomDialogDelete\n          title={\"Delete \" + selected?.name + \"'s data \"}\n          bodyComponent={\n            <DeleteView\n              setOpen={setOpenDelete}\n              name={selected?.name}\n              id={index}\n              lgaID={lgaID}\n              list={list}\n              index={index}\n            />\n          }\n          open={openDelete}\n          handleClose={() => setOpenDelete(false)}\n        />\n      </Menu>\n    </>\n  );\n};\n\nconst UpdateView = (props) => {\n  let { setOpen, name, designation } = props;\n\n  const [formValues, setFormValues] = React.useState({\n    name: name,\n    designation: designation,\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    let { name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const submit = (e) => {\n    setIsLoading(true);\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={submit}>\n        <TextValidator\n          name=\"name\"\n          fullWidth\n          placeholder=\"Name\"\n          label=\"Name\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.name}\n          onChange={handleChange}\n        />\n        <br />\n        <TextValidator\n          name=\"designation\"\n          fullWidth\n          placeholder=\"Designation\"\n          label=\"Designation\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.designation}\n          onChange={handleChange}\n        />\n        <br />\n        <Button variant=\"contained\" type=\"submit\" fullWidth>\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst DeleteView = (props) => {\n  let { list, lgaID, name, index, id, setOpen } = props;\n\n  const [isLoading, setLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const deleteRow = async () => {\n    setLoading(true);\n    const mRef = doc(db, \"lgas\", \"\" + lgaID);\n    try {\n      await updateDoc(mRef, {\n        committees: list?.filter((el, key) => key !== index),\n      });\n      setLoading(false);\n      setOpen(false);\n      enqueueSnackbar(`Row deleted successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      // setIsLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet connection\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <Typography gutterBottom>\n        Are you sure you want to delete {name} from table?\n      </Typography>\n      <br />\n      <Box\n        display=\"flex\"\n        flexDirection={\"row\"}\n        justifyContent=\"end\"\n        alignItems={\"center\"}\n      >\n        <Button\n          variant=\"contained\"\n          color=\"error\"\n          sx={{ textTransform: \"none\", mx: 2 }}\n          onClick={() => setOpen(false)}\n        >\n          Cancel\n        </Button>\n\n        <Button\n          variant=\"contained\"\n          sx={{ textTransform: \"none\" }}\n          onClick={deleteRow}\n        >\n          Delete\n        </Button>\n      </Box>\n    </div>\n  );\n};\n\nexport default ActionButton;\n"]},"metadata":{},"sourceType":"module"}