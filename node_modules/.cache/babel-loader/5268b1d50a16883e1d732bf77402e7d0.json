{"ast":null,"code":"import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import{Avatar,Backdrop,Button,CircularProgress,Grid,Typography,IconButton,Divider}from\"@mui/material\";import React from\"react\";import{useSelector}from\"react-redux\";import{useSnackbar}from\"notistack\";import{makeStyles}from\"@mui/styles\";import{useTheme}from\"@mui/material\";import{useMediaQuery}from\"@mui/material\";import{Box}from\"@mui/system\";import{db,doc,ref,storage,uploadBytesResumable,updateDoc,getDownloadURL}from\"../../../../../data/firebase\";import Edit from\"@mui/icons-material/Edit\";import CustomDialogFN from\"../../../../components/dialogs/custom-dialog\";import CustomDialogLN from\"../../../../components/dialogs/custom-dialog\";import CustomDialogNUM from\"../../../../components/dialogs/custom-dialog\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{},divRoot:{display:\"flex\",padding:theme.spacing(3),flexDirection:\"column\",alignItems:\"center\"},avatarContainer:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",borderColor:\"#3EB3CE\",borderWidth:3,borderStyle:\"solid\"},avatar:{backgroundColor:theme.palette.secondary.main},buttonRow:{display:\"flex\",flexDirection:\"row\",justifyContent:\"center\"},button:{margin:theme.spacing(1)},progress:{color:\"white\",zIndex:500,margin:\"auto\"}};});var CircularProgressWithLabel=function CircularProgressWithLabel(props){return/*#__PURE__*/_jsxs(Box,{position:\"relative\",display:\"inline-flex\",children:[/*#__PURE__*/_jsx(CircularProgress,_objectSpread(_objectSpread({variant:\"determinate\"},props),{},{size:90,thickness:3.0,style:{color:\"green\"}})),/*#__PURE__*/_jsx(Box,{top:0,left:0,bottom:0,right:0,position:\"absolute\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"div\",style:{color:\"white\",fontFamily:\"roboto\"},children:\"\".concat(Math.round(props.value),\"%\")})})]});};var Account=function Account(){var _myData$firstname,_myData$lastname;var classes=useStyles();var _useSelector=useSelector(function(state){return state.user;}),myData=_useSelector.myData;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),imageFile=_React$useState2[0],setImageFile=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),imageUrl=_React$useState4[0],setImageUrl=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isUploading=_React$useState6[0],setIsUploading=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isLoading=_React$useState8[0],setLoading=_React$useState8[1];var _React$useState9=React.useState(0),_React$useState10=_slicedToArray(_React$useState9,2),progress=_React$useState10[0],setProgress=_React$useState10[1];var fileInputRef=React.useRef();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),openFN=_React$useState12[0],setOpenFN=_React$useState12[1];var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),openLN=_React$useState14[0],setOpenLN=_React$useState14[1];var _React$useState15=React.useState(false),_React$useState16=_slicedToArray(_React$useState15,2),openNum=_React$useState16[0],setOpenNum=_React$useState16[1];React.useEffect(function(){console.log(\"USER DATA::\",myData);},[myData]);var initials=(myData===null||myData===void 0?void 0:(_myData$firstname=myData.firstname)===null||_myData$firstname===void 0?void 0:_myData$firstname.slice(0,1).toUpperCase())+(myData===null||myData===void 0?void 0:(_myData$lastname=myData.lastname)===null||_myData$lastname===void 0?void 0:_myData$lastname.slice(0,1).toUpperCase());var imgSize;var theme=useTheme();var xsmall=useMediaQuery(theme.breakpoints.only(\"xs\"));var small=useMediaQuery(theme.breakpoints.only(\"sm\"));var medium=useMediaQuery(theme.breakpoints.only(\"md\"));var others=useMediaQuery(theme.breakpoints.up(\"lg\"));if(xsmall){imgSize=150;}else if(small){imgSize=174;}else if(medium){imgSize=200;}else if(others){imgSize=236;}var handleFile=function handleFile(e){setImageFile(e.target.files[0]);setImageUrl(URL.createObjectURL(e.target.files[0]));};var performSubmit=function performSubmit(e){setIsUploading(true);var timeNow=new Date();//First upload image to firebase storage then save to firestore\nvar storageRef=ref(storage,\"users-\"+(myData===null||myData===void 0?void 0:myData.id)+\"/\"+timeNow.getTime());var uploadTask=uploadBytesResumable(storageRef,imageFile);uploadTask.on(\"state_changed\",function(snapshot){var uprogress=snapshot.bytesTransferred/snapshot.totalBytes*100;// console.log(\"Upload is \" + progress + \"% done\");\nsetProgress(uprogress);},function(error){// Handle unsuccessful uploads\nsetIsUploading(false);// console.log(error);\nenqueueSnackbar(\"\".concat(error===null||error===void 0?void 0:error.message),{variant:\"error\"});},function(){setIsUploading(false);setLoading(true);getDownloadURL(uploadTask.snapshot.ref).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(downloadURL){var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mRef=doc(db,\"users\",\"\"+(myData===null||myData===void 0?void 0:myData.id));_context.prev=1;_context.next=4;return updateDoc(mRef,{image:downloadURL});case 4:setLoading(false);setImageUrl(null);setImageFile(null);enqueueSnackbar(\"Image updated successfully\",{variant:\"success\"});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setLoading(false);enqueueSnackbar(\"\".concat((_context.t0===null||_context.t0===void 0?void 0:_context.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}());});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CustomDialogFN,{open:openFN,title:\"Update My Firstname\",handleClose:function handleClose(){return setOpenFN(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateFN,{setOpen:setOpenFN,userId:myData===null||myData===void 0?void 0:myData.id,firstname:myData===null||myData===void 0?void 0:myData.firstname})}),/*#__PURE__*/_jsx(CustomDialogLN,{open:openLN,title:\"Update My Lastname\",handleClose:function handleClose(){return setOpenLN(false);},bodyComponent:/*#__PURE__*/_jsx(UpdateLN,{setOpen:setOpenLN,userId:myData===null||myData===void 0?void 0:myData.id,lastname:myData===null||myData===void 0?void 0:myData.lastname})}),/*#__PURE__*/_jsxs(Backdrop,{style:{zIndex:1200},open:isUploading||isLoading,children:[isUploading?/*#__PURE__*/_jsx(CircularProgressWithLabel,{value:progress}):/*#__PURE__*/_jsx(\"div\",{}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",fontWeight:\"600\",gutterBottom:true,children:\"Personal Account Information\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\",height:\"70vh\"},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:6,md:6,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.divRoot,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.avatarContainer,style:{width:imgSize+3,height:imgSize+3,borderRadius:(imgSize+3)/2},children:/*#__PURE__*/_jsx(Avatar,{src:imageUrl?imageUrl:(myData===null||myData===void 0?void 0:myData.image)!==\"\"?myData===null||myData===void 0?void 0:myData.image:\"\",style:{width:imgSize-12,height:imgSize-12,borderRadius:(imgSize-12)/2,fontSize:64},children:(myData===null||myData===void 0?void 0:myData.image)!==\"\"?\"\":initials})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{hidden:true,ref:fileInputRef,type:\"file\",onChange:handleFile}),/*#__PURE__*/_jsxs(\"div\",{className:classes.buttonRow,children:[/*#__PURE__*/_jsx(Button,{className:classes.button,variant:\"contained\",color:\"secondary\",disableElevation:true,sx:{backgroundColor:\"#00B0EF\",textTransform:\"none\"},onClick:function onClick(){return fileInputRef.current.click();},children:\"Change Profile\"}),/*#__PURE__*/_jsx(Button,{hidden:imageFile?false:true,disabled:isLoading||isUploading,className:classes.button,variant:\"contained\",color:\"primary\",disableElevation:true,onClick:performSubmit,sx:{textTransform:\"none\"},children:\"Save\"})]})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,sm:6,md:6,alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Box,{paddingY:1,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"start\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{children:\"FIRSTNAME\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",pl:2,children:myData===null||myData===void 0?void 0:myData.firstname})]}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpenFN(true);},children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Box,{paddingY:1,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"start\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{children:\"LASTNAME\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",pl:2,children:myData===null||myData===void 0?void 0:myData.lastname})]}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setOpenLN(true);},children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Box,{paddingY:1,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"row\",justifyContent:\"start\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{children:\"PHONE NUMBER\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",pl:2,children:myData===null||myData===void 0?void 0:myData.phone})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(Edit,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Box,{paddingTop:5,display:\"flex\",flexDirection:\"row\",justifyContent:\"stretch\",alignItems:\"center\",children:/*#__PURE__*/_jsxs(Button,{variant:\"contained\",fullWidth:true,disableElevation:true,sx:{textTransform:\"none\"},children:[\"Update Password\",\" \"]})})]})]})})]});};var UpdateFN=function UpdateFN(props){var firstname=props.firstname,setOpen=props.setOpen,userId=props.userId;var _React$useState17=React.useState({firstname:firstname}),_React$useState18=_slicedToArray(_React$useState17,2),formValues=_React$useState18[0],setFormValues=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),isLoading=_React$useState20[0],setLoading=_React$useState20[1];var _useSnackbar2=useSnackbar(),enqueueSnackbar=_useSnackbar2.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var updateData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var mRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;mRef=doc(db,\"users\",\"\"+userId);_context2.next=5;return updateDoc(mRef,{firstname:formValues.firstname});case 5:setOpen(false);setLoading(false);enqueueSnackbar(\"First name updated successfully\",{variant:\"success\"});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);setLoading(false);enqueueSnackbar(\"\".concat((_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function updateData(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateData,children:[/*#__PURE__*/_jsx(TextValidator,{label:\"First Name\",size:\"small\",variant:\"outlined\",value:formValues.firstname,onChange:handleChange,name:\"firstname\",fullWidth:true,validators:[\"required\"],errorMessages:[\"First name is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update Firstname\"})]})]});};var UpdateLN=function UpdateLN(props){var lastname=props.lastname,setOpen=props.setOpen,userId=props.userId;var _React$useState21=React.useState({lastname:lastname}),_React$useState22=_slicedToArray(_React$useState21,2),formValues=_React$useState22[0],setFormValues=_React$useState22[1];var _React$useState23=React.useState(false),_React$useState24=_slicedToArray(_React$useState23,2),isLoading=_React$useState24[0],setLoading=_React$useState24[1];var _useSnackbar3=useSnackbar(),enqueueSnackbar=_useSnackbar3.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var updateData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var mRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(true);_context3.prev=1;mRef=doc(db,\"users\",\"\"+userId);_context3.next=5;return updateDoc(mRef,{lastname:formValues.lastname});case 5:setOpen(false);setLoading(false);enqueueSnackbar(\"Last name updated successfully\",{variant:\"success\"});_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);setLoading(false);enqueueSnackbar(\"\".concat((_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.message)||\"Check your internet connection\"),{variant:\"error\"});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function updateData(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateData,children:[/*#__PURE__*/_jsx(TextValidator,{label:\"last Name\",size:\"small\",variant:\"outlined\",value:formValues.lastname,onChange:handleChange,name:\"lastname\",fullWidth:true,validators:[\"required\"],errorMessages:[\"Last name is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update Lastname\"})]})]});};export default Account;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/pages/dashboard/tabs/account/index.js"],"names":["Avatar","Backdrop","Button","CircularProgress","Grid","Typography","IconButton","Divider","React","useSelector","useSnackbar","makeStyles","useTheme","useMediaQuery","Box","db","doc","ref","storage","uploadBytesResumable","updateDoc","getDownloadURL","Edit","CustomDialogFN","CustomDialogLN","CustomDialogNUM","ValidatorForm","TextValidator","useStyles","theme","root","divRoot","display","padding","spacing","flexDirection","alignItems","avatarContainer","justifyContent","borderColor","borderWidth","borderStyle","avatar","backgroundColor","palette","secondary","main","buttonRow","button","margin","progress","color","zIndex","CircularProgressWithLabel","props","fontFamily","Math","round","value","Account","classes","state","user","myData","useState","imageFile","setImageFile","imageUrl","setImageUrl","isUploading","setIsUploading","isLoading","setLoading","setProgress","fileInputRef","useRef","enqueueSnackbar","openFN","setOpenFN","openLN","setOpenLN","openNum","setOpenNum","useEffect","console","log","initials","firstname","slice","toUpperCase","lastname","imgSize","xsmall","breakpoints","only","small","medium","others","up","handleFile","e","target","files","URL","createObjectURL","performSubmit","timeNow","Date","storageRef","id","getTime","uploadTask","on","snapshot","uprogress","bytesTransferred","totalBytes","error","message","variant","then","downloadURL","mRef","image","height","width","borderRadius","fontSize","textTransform","current","click","phone","UpdateFN","setOpen","userId","formValues","setFormValues","handleChange","name","prevData","updateData","UpdateLN"],"mappings":"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","sourcesContent":["import {\n  Avatar,\n  Backdrop,\n  Button,\n  CircularProgress,\n  Grid,\n  Typography,\n  IconButton,\n  Divider,\n} from \"@mui/material\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport { makeStyles } from \"@mui/styles\";\nimport { useTheme } from \"@mui/material\";\nimport { useMediaQuery } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport {\n  db,\n  doc,\n  ref,\n  storage,\n  uploadBytesResumable,\n  updateDoc,\n  getDownloadURL,\n} from \"../../../../../data/firebase\";\nimport Edit from \"@mui/icons-material/Edit\";\n\nimport CustomDialogFN from \"../../../../components/dialogs/custom-dialog\";\nimport CustomDialogLN from \"../../../../components/dialogs/custom-dialog\";\nimport CustomDialogNUM from \"../../../../components/dialogs/custom-dialog\";\n\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  divRoot: {\n    display: \"flex\",\n    padding: theme.spacing(3),\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatarContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderColor: \"#3EB3CE\",\n    borderWidth: 3,\n    borderStyle: \"solid\",\n  },\n  avatar: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n  buttonRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n  progress: {\n    color: \"white\",\n    zIndex: 500,\n    margin: \"auto\",\n  },\n}));\n\nconst CircularProgressWithLabel = (props) => {\n  return (\n    <Box position=\"relative\" display=\"inline-flex\">\n      <CircularProgress\n        variant=\"determinate\"\n        {...props}\n        size={90}\n        thickness={3.0}\n        style={{ color: \"green\" }}\n      />\n      <Box\n        top={0}\n        left={0}\n        bottom={0}\n        right={0}\n        position=\"absolute\"\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography\n          variant=\"body1\"\n          component=\"div\"\n          style={{ color: \"white\", fontFamily: \"roboto\" }}\n        >{`${Math.round(props.value)}%`}</Typography>\n      </Box>\n    </Box>\n  );\n};\n\nconst Account = () => {\n  const classes = useStyles();\n  const { myData } = useSelector((state) => state.user);\n  const [imageFile, setImageFile] = React.useState(null);\n  const [imageUrl, setImageUrl] = React.useState(\"\");\n  const [isUploading, setIsUploading] = React.useState(false);\n  const [isLoading, setLoading] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const fileInputRef = React.useRef();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [openFN, setOpenFN] = React.useState(false);\n  const [openLN, setOpenLN] = React.useState(false);\n  const [openNum, setOpenNum] = React.useState(false);\n\n  React.useEffect(() => {\n    console.log(\"USER DATA::\", myData);\n  }, [myData]);\n\n  const initials =\n    myData?.firstname?.slice(0, 1).toUpperCase() +\n    myData?.lastname?.slice(0, 1).toUpperCase();\n\n  let imgSize;\n  const theme = useTheme();\n  const xsmall = useMediaQuery(theme.breakpoints.only(\"xs\"));\n  const small = useMediaQuery(theme.breakpoints.only(\"sm\"));\n  const medium = useMediaQuery(theme.breakpoints.only(\"md\"));\n  const others = useMediaQuery(theme.breakpoints.up(\"lg\"));\n\n  if (xsmall) {\n    imgSize = 150;\n  } else if (small) {\n    imgSize = 174;\n  } else if (medium) {\n    imgSize = 200;\n  } else if (others) {\n    imgSize = 236;\n  }\n\n  const handleFile = (e) => {\n    setImageFile(e.target.files[0]);\n    setImageUrl(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const performSubmit = (e) => {\n    setIsUploading(true);\n    const timeNow = new Date();\n    //First upload image to firebase storage then save to firestore\n    const storageRef = ref(\n      storage,\n      \"users-\" + myData?.id + \"/\" + timeNow.getTime()\n    );\n    const uploadTask = uploadBytesResumable(storageRef, imageFile);\n\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const uprogress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        // console.log(\"Upload is \" + progress + \"% done\");\n        setProgress(uprogress);\n      },\n      (error) => {\n        // Handle unsuccessful uploads\n        setIsUploading(false);\n        // console.log(error);\n        enqueueSnackbar(`${error?.message}`, { variant: \"error\" });\n      },\n      () => {\n        setIsUploading(false);\n        setLoading(true);\n        getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n          const mRef = doc(db, \"users\", \"\" + myData?.id);\n          try {\n            await updateDoc(mRef, {\n              image: downloadURL,\n            });\n            setLoading(false);\n            setImageUrl(null);\n            setImageFile(null);\n            enqueueSnackbar(`Image updated successfully`, {\n              variant: \"success\",\n            });\n          } catch (error) {\n            setLoading(false);\n            enqueueSnackbar(\n              `${error?.message || \"Check your internet connection\"}`,\n              {\n                variant: \"error\",\n              }\n            );\n          }\n        });\n      }\n    );\n  };\n\n  return (\n    <div>\n      <CustomDialogFN\n        open={openFN}\n        title=\"Update My Firstname\"\n        handleClose={() => setOpenFN(false)}\n        bodyComponent={\n          <UpdateFN\n            setOpen={setOpenFN}\n            userId={myData?.id}\n            firstname={myData?.firstname}\n          />\n        }\n      />\n\n      <CustomDialogLN\n        open={openLN}\n        title=\"Update My Lastname\"\n        handleClose={() => setOpenLN(false)}\n        bodyComponent={\n          <UpdateLN\n            setOpen={setOpenLN}\n            userId={myData?.id}\n            lastname={myData?.lastname}\n          />\n        }\n      />\n      <Backdrop style={{ zIndex: 1200 }} open={isUploading || isLoading}>\n        {isUploading ? <CircularProgressWithLabel value={progress} /> : <div />}\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <Typography variant=\"h6\" fontWeight=\"600\" gutterBottom={true}>\n        Personal Account Information\n      </Typography>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"70vh\",\n        }}\n      >\n        <Grid\n          container\n          spacing={4}\n          justifyContent=\"space-between\"\n          alignItems={\"center\"}\n        >\n          <Grid item sm={6} md={6}>\n            <div className={classes.divRoot}>\n              <div\n                className={classes.avatarContainer}\n                style={{\n                  width: imgSize + 3,\n                  height: imgSize + 3,\n                  borderRadius: (imgSize + 3) / 2,\n                }}\n              >\n                <Avatar\n                  src={\n                    imageUrl\n                      ? imageUrl\n                      : myData?.image !== \"\"\n                      ? myData?.image\n                      : \"\"\n                  }\n                  style={{\n                    width: imgSize - 12,\n                    height: imgSize - 12,\n                    borderRadius: (imgSize - 12) / 2,\n                    fontSize: 64,\n                  }}\n                >\n                  {myData?.image !== \"\" ? \"\" : initials}\n                </Avatar>\n              </div>\n              <br />\n              <input\n                hidden={true}\n                ref={fileInputRef}\n                type=\"file\"\n                onChange={handleFile}\n              />\n\n              <div className={classes.buttonRow}>\n                <Button\n                  className={classes.button}\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  disableElevation={true}\n                  sx={{ backgroundColor: \"#00B0EF\", textTransform: \"none\" }}\n                  onClick={() => fileInputRef.current.click()}\n                >\n                  Change Profile\n                </Button>\n\n                <Button\n                  hidden={imageFile ? false : true}\n                  disabled={isLoading || isUploading}\n                  className={classes.button}\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disableElevation={true}\n                  onClick={performSubmit}\n                  sx={{ textTransform: \"none\" }}\n                >\n                  Save\n                </Button>\n              </div>\n            </div>\n          </Grid>\n          <Grid item sm={6} md={6} alignItems={\"center\"}>\n            <Box\n              paddingY={1}\n              display=\"flex\"\n              flexDirection=\"row\"\n              justifyContent={\"space-between\"}\n              alignItems=\"center\"\n            >\n              <Box\n                display=\"flex\"\n                flexDirection=\"row\"\n                justifyContent={\"start\"}\n                alignItems=\"center\"\n              >\n                <Typography>FIRSTNAME</Typography>\n                <Typography variant=\"h6\" pl={2}>\n                  {myData?.firstname}\n                </Typography>\n              </Box>\n              <IconButton onClick={() => setOpenFN(true)}>\n                <Edit />\n              </IconButton>\n            </Box>\n            <Divider />\n            <Box\n              paddingY={1}\n              display=\"flex\"\n              flexDirection=\"row\"\n              justifyContent={\"space-between\"}\n              alignItems=\"center\"\n            >\n              <Box\n                display=\"flex\"\n                flexDirection=\"row\"\n                justifyContent={\"start\"}\n                alignItems=\"center\"\n              >\n                <Typography>LASTNAME</Typography>\n                <Typography variant=\"h6\" pl={2}>\n                  {myData?.lastname}\n                </Typography>\n              </Box>\n              <IconButton onClick={() => setOpenLN(true)}>\n                <Edit />\n              </IconButton>\n            </Box>\n            <Divider />\n            <Box\n              paddingY={1}\n              display=\"flex\"\n              flexDirection=\"row\"\n              justifyContent={\"space-between\"}\n              alignItems=\"center\"\n            >\n              <Box\n                display=\"flex\"\n                flexDirection=\"row\"\n                justifyContent={\"start\"}\n                alignItems=\"center\"\n              >\n                <Typography>PHONE NUMBER</Typography>\n                <Typography variant=\"h6\" pl={2}>\n                  {myData?.phone}\n                </Typography>\n              </Box>\n              <IconButton>\n                <Edit />\n              </IconButton>\n            </Box>\n            <Divider />\n            <Box\n              paddingTop={5}\n              display=\"flex\"\n              flexDirection=\"row\"\n              justifyContent={\"stretch\"}\n              alignItems=\"center\"\n            >\n              <Button\n                variant=\"contained\"\n                fullWidth\n                disableElevation={true}\n                sx={{ textTransform: \"none\" }}\n              >\n                Update Password{\" \"}\n              </Button>\n            </Box>\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  );\n};\n\nconst UpdateFN = (props) => {\n  let { firstname, setOpen, userId } = props;\n  const [formValues, setFormValues] = React.useState({\n    firstname: firstname,\n  });\n  const [isLoading, setLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const updateData = async (e) => {\n    setLoading(true);\n\n    try {\n      const mRef = doc(db, \"users\", \"\" + userId);\n      await updateDoc(mRef, {\n        firstname: formValues.firstname,\n      });\n      setOpen(false);\n      setLoading(false);\n      enqueueSnackbar(`First name updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet connection\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateData}>\n        <TextValidator\n          label=\"First Name\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.firstname}\n          onChange={handleChange}\n          name=\"firstname\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"First name is required\"]}\n        />\n        <br />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update Firstname\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nconst UpdateLN = (props) => {\n  let { lastname, setOpen, userId } = props;\n  const [formValues, setFormValues] = React.useState({\n    lastname: lastname,\n  });\n  const [isLoading, setLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const updateData = async (e) => {\n    setLoading(true);\n\n    try {\n      const mRef = doc(db, \"users\", \"\" + userId);\n      await updateDoc(mRef, {\n        lastname: formValues.lastname,\n      });\n      setOpen(false);\n      setLoading(false);\n      enqueueSnackbar(`Last name updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setLoading(false);\n      enqueueSnackbar(`${error?.message || \"Check your internet connection\"}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateData}>\n        <TextValidator\n          label=\"last Name\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={formValues.lastname}\n          onChange={handleChange}\n          name=\"lastname\"\n          fullWidth\n          validators={[\"required\"]}\n          errorMessages={[\"Last name is required\"]}\n        />\n        <br />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update Lastname\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default Account;\n"]},"metadata":{},"sourceType":"module"}