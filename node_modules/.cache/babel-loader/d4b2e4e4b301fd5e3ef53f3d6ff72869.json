{"ast":null,"code":"import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{ValidatorForm,TextValidator}from\"react-material-ui-form-validator\";import{makeStyles}from\"@mui/styles\";import Button from\"@mui/material/Button\";import{db,doc,updateDoc}from\"../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{CircularProgress}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(){return{image:{margin:\"0px auto 15px auto\",width:128,height:100},mb:{marginBottom:10}};});var UpdateFunctionForm=function UpdateFunctionForm(props){var classes=useStyles();var setOpen=props.setOpen,id=props.id,func=props.func;var _React$useState=React.useState({function:func}),_React$useState2=_slicedToArray(_React$useState,2),formValues=_React$useState2[0],setFormValues=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var updateDepartment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setFormValues({function:formValues.function?formValues.function:func});_context.prev=2;mRef=doc(db,\"dept-functions\",\"\"+id);_context.next=6;return updateDoc(mRef,{function:formValues.function});case 6:setOpen(false);setIsLoading(false);enqueueSnackbar(\"Function updated successfully\",{variant:\"success\"});_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setIsLoading(false);enqueueSnackbar(\"\".concat(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message),{variant:\"error\"});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function updateDepartment(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateDepartment,children:[/*#__PURE__*/_jsx(TextValidator,{className:classes.mb,label:\"Function\",size:\"small\",variant:\"outlined\",value:formValues.function===\" \"?func:!formValues.function?\"\":formValues.function,onChange:handleChange,name:\"function\",fullWidth:true,required:true,validators:[\"required\"],errorMessages:[\"Function is required\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update Function\"})]})]});};export default UpdateFunctionForm;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/department/update_function.js"],"names":["React","ValidatorForm","TextValidator","makeStyles","Button","db","doc","updateDoc","useSnackbar","Backdrop","CircularProgress","useStyles","image","margin","width","height","mb","marginBottom","UpdateFunctionForm","props","classes","setOpen","id","func","useState","function","formValues","setFormValues","isLoading","setIsLoading","enqueueSnackbar","handleChange","e","target","name","value","prevData","updateDepartment","mRef","variant","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport { makeStyles } from \"@mui/styles\";\nimport Button from \"@mui/material/Button\";\nimport { db, doc, updateDoc } from \"../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { CircularProgress } from \"@mui/material\";\n\nconst useStyles = makeStyles(() => ({\n  image: {\n    margin: \"0px auto 15px auto\",\n    width: 128,\n    height: 100,\n  },\n  mb: {\n    marginBottom: 10,\n  },\n}));\n\nconst UpdateFunctionForm = (props) => {\n  const classes = useStyles();\n  let { setOpen, id, func } = props;\n  const [formValues, setFormValues] = React.useState({\n    function: func,\n  });\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const updateDepartment = async (e) => {\n    setIsLoading(true);\n    setFormValues({\n      function: formValues.function ? formValues.function : func,\n    });\n\n    try {\n      const mRef = doc(db, \"dept-functions\", \"\" + id);\n      await updateDoc(mRef, {\n        function: formValues.function,\n      });\n      setOpen(false);\n      setIsLoading(false);\n      enqueueSnackbar(`Function updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <ValidatorForm onSubmit={updateDepartment}>\n        <TextValidator\n          className={classes.mb}\n          label=\"Function\"\n          size=\"small\"\n          variant=\"outlined\"\n          value={\n            formValues.function === \" \"\n              ? func\n              : !formValues.function\n              ? \"\"\n              : formValues.function\n          }\n          onChange={handleChange}\n          name=\"function\"\n          fullWidth\n          required\n          validators={[\"required\"]}\n          errorMessages={[\"Function is required\"]}\n        />\n        <br />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update Function\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default UpdateFunctionForm;\n"]},"metadata":{},"sourceType":"module"}