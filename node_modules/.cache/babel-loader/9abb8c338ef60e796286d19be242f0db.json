{"ast":null,"code":"import _asyncToGenerator from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/macintosh/Developer/RSPHCMB-Admin/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{ValidatorForm}from\"react-material-ui-form-validator\";import Button from\"@mui/material/Button\";import{db,doc,updateDoc}from\"../../../data/firebase\";import{useSnackbar}from\"notistack\";import Backdrop from\"@mui/material/Backdrop\";import{CircularProgress}from\"@mui/material\";import RichText from\"../../components/misc/richtext\";import{useLocation,useHistory}from\"react-router-dom\";import{ArrowBackIosNew}from\"@mui/icons-material\";import EditableRichText from\"../../components/misc/richtext/editable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WhoWeAreContent=function WhoWeAreContent(props){var _location$state;var location=useLocation();var history=useHistory();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isLoading=_React$useState2[0],setIsLoading=_React$useState2[1];var _React$useState3=React.useState((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.content),_React$useState4=_slicedToArray(_React$useState3,2),body=_React$useState4[0],setBody=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isError=_React$useState6[0],setIsError=_React$useState6[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isStartedFilling=_React$useState8[0],setIsStartedFilling=_React$useState8[1];var updateData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var timeNow,mRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);//No image is changed. So update all text\ntimeNow=new Date();_context.prev=2;mRef=doc(db,\"about\",\"rsphcmb\");_context.next=6;return updateDoc(mRef,{who_we_are:body,updatedAt:timeNow});case 6:history.goBack();setIsLoading(false);enqueueSnackbar(\"Data updated successfully\",{variant:\"success\"});_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setIsLoading(false);enqueueSnackbar(\"\".concat(_context.t0===null||_context.t0===void 0?void 0:_context.t0.message),{variant:\"error\"});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function updateData(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Backdrop,{style:{zIndex:1200},open:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:90,thickness:3.0,style:{color:\"white\"}}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(ArrowBackIosNew,{}),onClick:function onClick(){return history.goBack();},children:\"Back\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(ValidatorForm,{onSubmit:updateData,children:[/*#__PURE__*/_jsx(EditableRichText,{value:body,setValue:setBody,error:isError,setError:setIsError,setIsStartedFilling:setIsStartedFilling}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isLoading,fullWidth:true,children:\"Update\"})]})]});};export default WhoWeAreContent;","map":{"version":3,"sources":["/Users/macintosh/Developer/RSPHCMB-Admin/src/presentation/forms/about-rsphcmb/who_we_are_content.js"],"names":["React","ValidatorForm","Button","db","doc","updateDoc","useSnackbar","Backdrop","CircularProgress","RichText","useLocation","useHistory","ArrowBackIosNew","EditableRichText","WhoWeAreContent","props","location","history","useState","isLoading","setIsLoading","state","content","body","setBody","isError","setIsError","enqueueSnackbar","isStartedFilling","setIsStartedFilling","updateData","e","timeNow","Date","mRef","who_we_are","updatedAt","goBack","variant","message","zIndex","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { ValidatorForm } from \"react-material-ui-form-validator\";\nimport Button from \"@mui/material/Button\";\nimport { db, doc, updateDoc } from \"../../../data/firebase\";\nimport { useSnackbar } from \"notistack\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { CircularProgress } from \"@mui/material\";\nimport RichText from \"../../components/misc/richtext\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { ArrowBackIosNew } from \"@mui/icons-material\";\nimport EditableRichText from \"../../components/misc/richtext/editable\";\n\nconst WhoWeAreContent = (props) => {\n  const location = useLocation();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const [body, setBody] = React.useState(location.state?.content);\n  const [isError, setIsError] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const [isStartedFilling, setIsStartedFilling] = React.useState(false);\n\n  const updateData = async (e) => {\n    setIsLoading(true);\n\n    //No image is changed. So update all text\n    const timeNow = new Date();\n    try {\n      const mRef = doc(db, \"about\", \"rsphcmb\");\n      await updateDoc(mRef, {\n        who_we_are: body,\n        updatedAt: timeNow,\n      });\n      history.goBack();\n      setIsLoading(false);\n      enqueueSnackbar(`Data updated successfully`, {\n        variant: \"success\",\n      });\n    } catch (error) {\n      setIsLoading(false);\n      enqueueSnackbar(`${error?.message}`, {\n        variant: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Backdrop style={{ zIndex: 1200 }} open={isLoading}>\n        {isLoading ? (\n          <CircularProgress\n            size={90}\n            thickness={3.0}\n            style={{ color: \"white\" }}\n          />\n        ) : (\n          <div />\n        )}\n      </Backdrop>\n      <Button startIcon={<ArrowBackIosNew />} onClick={() => history.goBack()}>\n        Back\n      </Button>\n      <br />\n      <br />\n      <ValidatorForm onSubmit={updateData}>\n        <EditableRichText\n          value={body}\n          setValue={setBody}\n          error={isError}\n          setError={setIsError}\n          setIsStartedFilling={setIsStartedFilling}\n        />\n        <br />\n\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          disabled={isLoading}\n          fullWidth\n        >\n          Update\n        </Button>\n      </ValidatorForm>\n    </div>\n  );\n};\n\nexport default WhoWeAreContent;\n"]},"metadata":{},"sourceType":"module"}